{
  "openapi": "3.0.3",
  "info": {
    "title": "Order Management System API",
    "description": "Auto-generated OpenAPI spec from tRPC routes with OpenAPI metadata",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "http://localhost:3001/api/v1"
    }
  ],
  "paths": {
    "/auth/login": {
      "post": {
        "operationId": "auth-login",
        "summary": "User login",
        "description": "Authenticate user with email and password",
        "tags": [
          "auth"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6
                  }
                },
                "required": [
                  "email",
                  "password"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "auth_user_id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "role": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "auth_user_id",
                        "email",
                        "name",
                        "role"
                      ],
                      "additionalProperties": false
                    },
                    "session": {
                      "type": "object",
                      "properties": {
                        "access_token": {
                          "type": "string"
                        },
                        "refresh_token": {
                          "type": "string"
                        },
                        "expires_at": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "access_token",
                        "refresh_token"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "user",
                    "session"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/auth/register": {
      "post": {
        "operationId": "auth-register",
        "summary": "User registration",
        "description": "Register a new admin user",
        "tags": [
          "auth"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "email",
                  "password",
                  "name"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "role": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "email",
                        "name",
                        "role"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "user"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/auth/me": {
      "get": {
        "operationId": "auth-me",
        "summary": "Get current user",
        "description": "Get current authenticated user information",
        "tags": [
          "auth"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "auth_user_id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "role": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "auth_user_id",
                        "email",
                        "name",
                        "role"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "user"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/auth/refresh": {
      "post": {
        "operationId": "auth-refresh",
        "summary": "Refresh token",
        "description": "Refresh authentication token",
        "tags": [
          "auth"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "refresh_token": {
                    "type": "string"
                  }
                },
                "required": [
                  "refresh_token"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "session": {
                      "type": "object",
                      "properties": {
                        "access_token": {
                          "type": "string"
                        },
                        "refresh_token": {
                          "type": "string"
                        },
                        "expires_at": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "access_token",
                        "refresh_token"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "session"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "operationId": "auth-logout",
        "summary": "User logout",
        "description": "Logout current user",
        "tags": [
          "auth"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers": {
      "get": {
        "operationId": "customers-list",
        "summary": "List customers",
        "tags": [
          "customers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "account_status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "credit_hold",
                "closed"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "customers": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "external_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "name": {
                            "type": "string"
                          },
                          "tax_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "phone": {
                            "type": "string",
                            "nullable": true
                          },
                          "email": {
                            "type": "string",
                            "nullable": true
                          },
                          "account_status": {
                            "type": "string",
                            "enum": [
                              "active",
                              "credit_hold",
                              "closed"
                            ]
                          },
                          "credit_terms_days": {
                            "type": "number"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "primary_address": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "city": {
                                  "type": "string"
                                },
                                "label": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "line1": {
                                  "type": "string"
                                },
                                "line2": {
                                  "type": "string"
                                },
                                "state": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "country": {
                                  "type": "string"
                                },
                                "latitude": {
                                  "type": "number"
                                },
                                "longitude": {
                                  "type": "number"
                                },
                                "created_at": {
                                  "type": "string"
                                },
                                "is_primary": {
                                  "type": "boolean"
                                },
                                "postal_code": {
                                  "type": "string"
                                },
                                "instructions": {
                                  "type": "string"
                                },
                                "delivery_window_end": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "delivery_window_start": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "id",
                                "city",
                                "label",
                                "line1",
                                "line2",
                                "state",
                                "country",
                                "latitude",
                                "longitude",
                                "created_at",
                                "is_primary",
                                "postal_code",
                                "instructions",
                                "delivery_window_end",
                                "delivery_window_start"
                              ],
                              "additionalProperties": false
                            }
                          }
                        },
                        "required": [
                          "id",
                          "external_id",
                          "name",
                          "tax_id",
                          "phone",
                          "email",
                          "account_status",
                          "credit_terms_days",
                          "created_at",
                          "updated_at",
                          "primary_address"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "customers",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "customers-create",
        "summary": "Create customer",
        "tags": [
          "customers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "external_id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "tax_id": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "account_status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "credit_hold",
                      "closed"
                    ],
                    "default": "active"
                  },
                  "credit_terms_days": {
                    "type": "integer",
                    "minimum": 0,
                    "default": 30
                  },
                  "address": {
                    "type": "object",
                    "properties": {
                      "line1": {
                        "type": "string",
                        "minLength": 1
                      },
                      "line2": {
                        "type": "string"
                      },
                      "city": {
                        "type": "string",
                        "minLength": 1
                      },
                      "state": {
                        "type": "string"
                      },
                      "postal_code": {
                        "type": "string"
                      },
                      "country": {
                        "type": "string",
                        "minLength": 2
                      },
                      "latitude": {
                        "type": "number"
                      },
                      "longitude": {
                        "type": "number"
                      },
                      "delivery_window_start": {
                        "type": "string"
                      },
                      "delivery_window_end": {
                        "type": "string"
                      },
                      "instructions": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "line1",
                      "city",
                      "country"
                    ],
                    "additionalProperties": false
                  }
                },
                "required": [
                  "name",
                  "address"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "external_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "name": {
                      "type": "string"
                    },
                    "tax_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "phone": {
                      "type": "string",
                      "nullable": true
                    },
                    "email": {
                      "type": "string",
                      "nullable": true
                    },
                    "account_status": {
                      "type": "string",
                      "enum": [
                        "active",
                        "credit_hold",
                        "closed"
                      ]
                    },
                    "credit_terms_days": {
                      "type": "number"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "primary_address": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "customer_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "label": {
                          "type": "string",
                          "nullable": true
                        },
                        "line1": {
                          "type": "string"
                        },
                        "line2": {
                          "type": "string",
                          "nullable": true
                        },
                        "city": {
                          "type": "string"
                        },
                        "state": {
                          "type": "string",
                          "nullable": true
                        },
                        "postal_code": {
                          "type": "string",
                          "nullable": true
                        },
                        "country": {
                          "type": "string"
                        },
                        "latitude": {
                          "type": "number",
                          "nullable": true
                        },
                        "longitude": {
                          "type": "number",
                          "nullable": true
                        },
                        "delivery_window_start": {
                          "type": "string",
                          "nullable": true
                        },
                        "delivery_window_end": {
                          "type": "string",
                          "nullable": true
                        },
                        "is_primary": {
                          "type": "boolean"
                        },
                        "instructions": {
                          "type": "string",
                          "nullable": true
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "updated_at": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "customer_id",
                        "label",
                        "line1",
                        "line2",
                        "city",
                        "state",
                        "postal_code",
                        "country",
                        "latitude",
                        "longitude",
                        "delivery_window_start",
                        "delivery_window_end",
                        "is_primary",
                        "instructions",
                        "created_at"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "id",
                    "external_id",
                    "name",
                    "tax_id",
                    "phone",
                    "email",
                    "account_status",
                    "credit_terms_days",
                    "created_at",
                    "updated_at",
                    "primary_address"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/{customer_id}": {
      "get": {
        "operationId": "customers-getById",
        "summary": "Get customer by ID",
        "description": "Get a single customer by their ID",
        "tags": [
          "customers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "external_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "name": {
                      "type": "string"
                    },
                    "tax_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "phone": {
                      "type": "string",
                      "nullable": true
                    },
                    "email": {
                      "type": "string",
                      "nullable": true
                    },
                    "account_status": {
                      "type": "string",
                      "enum": [
                        "active",
                        "credit_hold",
                        "closed"
                      ]
                    },
                    "credit_terms_days": {
                      "type": "number"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "primary_address": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "city": {
                            "type": "string"
                          },
                          "label": {
                            "type": "string",
                            "nullable": true
                          },
                          "line1": {
                            "type": "string"
                          },
                          "line2": {
                            "type": "string"
                          },
                          "state": {
                            "type": "string",
                            "nullable": true
                          },
                          "country": {
                            "type": "string"
                          },
                          "latitude": {
                            "type": "number"
                          },
                          "longitude": {
                            "type": "number"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "is_primary": {
                            "type": "boolean"
                          },
                          "postal_code": {
                            "type": "string"
                          },
                          "instructions": {
                            "type": "string"
                          },
                          "delivery_window_end": {
                            "type": "string",
                            "nullable": true
                          },
                          "delivery_window_start": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "id",
                          "city",
                          "label",
                          "line1",
                          "line2",
                          "state",
                          "country",
                          "latitude",
                          "longitude",
                          "created_at",
                          "is_primary",
                          "postal_code",
                          "instructions",
                          "delivery_window_end",
                          "delivery_window_start"
                        ],
                        "additionalProperties": false
                      },
                      "nullable": true
                    }
                  },
                  "required": [
                    "id",
                    "external_id",
                    "name",
                    "tax_id",
                    "phone",
                    "email",
                    "account_status",
                    "credit_terms_days",
                    "created_at",
                    "updated_at",
                    "primary_address"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "delete": {
        "operationId": "customers-delete",
        "summary": "Delete customer",
        "tags": [
          "customers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/{id}": {
      "put": {
        "operationId": "customers-update",
        "summary": "Update customer",
        "tags": [
          "customers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "external_id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "tax_id": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "account_status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "credit_hold",
                      "closed"
                    ]
                  },
                  "credit_terms_days": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "address": {
                    "type": "object",
                    "properties": {
                      "line1": {
                        "type": "string",
                        "minLength": 1
                      },
                      "line2": {
                        "type": "string"
                      },
                      "city": {
                        "type": "string",
                        "minLength": 1
                      },
                      "state": {
                        "type": "string"
                      },
                      "postal_code": {
                        "type": "string"
                      },
                      "country": {
                        "type": "string",
                        "minLength": 2
                      },
                      "latitude": {
                        "type": "number"
                      },
                      "longitude": {
                        "type": "number"
                      },
                      "delivery_window_start": {
                        "type": "string"
                      },
                      "delivery_window_end": {
                        "type": "string"
                      },
                      "instructions": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "line1",
                      "city",
                      "country"
                    ],
                    "additionalProperties": false
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "external_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "name": {
                      "type": "string"
                    },
                    "tax_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "phone": {
                      "type": "string",
                      "nullable": true
                    },
                    "email": {
                      "type": "string",
                      "nullable": true
                    },
                    "account_status": {
                      "type": "string",
                      "enum": [
                        "active",
                        "credit_hold",
                        "closed"
                      ]
                    },
                    "credit_terms_days": {
                      "type": "number"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "external_id",
                    "name",
                    "tax_id",
                    "phone",
                    "email",
                    "account_status",
                    "credit_terms_days",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/{customer_id}/orders": {
      "get": {
        "operationId": "customers-getOrderHistory",
        "summary": "Get customer order history",
        "tags": [
          "customers",
          "orders"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "draft",
                "confirmed",
                "scheduled",
                "en_route",
                "delivered",
                "invoiced",
                "cancelled"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "orders": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "customer_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "draft",
                              "confirmed",
                              "scheduled",
                              "en_route",
                              "delivered",
                              "invoiced",
                              "cancelled"
                            ]
                          },
                          "total_amount": {
                            "type": "number"
                          },
                          "order_date": {
                            "type": "string"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "customer": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "name": {
                                "type": "string"
                              },
                              "email": {
                                "type": "string",
                                "nullable": true
                              },
                              "phone": {
                                "type": "string",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "email",
                              "phone"
                            ],
                            "additionalProperties": false
                          },
                          "delivery_address": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "customer_id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "label": {
                                "type": "string",
                                "nullable": true
                              },
                              "line1": {
                                "type": "string"
                              },
                              "line2": {
                                "type": "string",
                                "nullable": true
                              },
                              "city": {
                                "type": "string"
                              },
                              "state": {
                                "type": "string",
                                "nullable": true
                              },
                              "postal_code": {
                                "type": "string",
                                "nullable": true
                              },
                              "country": {
                                "type": "string"
                              },
                              "latitude": {
                                "type": "number",
                                "nullable": true
                              },
                              "longitude": {
                                "type": "number",
                                "nullable": true
                              },
                              "delivery_window_start": {
                                "type": "string",
                                "nullable": true
                              },
                              "delivery_window_end": {
                                "type": "string",
                                "nullable": true
                              },
                              "is_primary": {
                                "type": "boolean"
                              },
                              "instructions": {
                                "type": "string",
                                "nullable": true
                              },
                              "created_at": {
                                "type": "string"
                              },
                              "updated_at": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "customer_id",
                              "label",
                              "line1",
                              "line2",
                              "city",
                              "state",
                              "postal_code",
                              "country",
                              "latitude",
                              "longitude",
                              "delivery_window_start",
                              "delivery_window_end",
                              "is_primary",
                              "instructions",
                              "created_at"
                            ],
                            "additionalProperties": false,
                            "nullable": true
                          },
                          "order_lines": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "product_id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "quantity": {
                                  "type": "number"
                                },
                                "unit_price": {
                                  "type": "number"
                                },
                                "subtotal": {
                                  "type": "number"
                                },
                                "product": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string",
                                      "format": "uuid"
                                    },
                                    "sku": {
                                      "type": "string"
                                    },
                                    "name": {
                                      "type": "string"
                                    },
                                    "unit_of_measure": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "sku",
                                    "name",
                                    "unit_of_measure"
                                  ],
                                  "additionalProperties": false
                                }
                              },
                              "required": [
                                "id",
                                "product_id",
                                "quantity",
                                "unit_price",
                                "subtotal",
                                "product"
                              ],
                              "additionalProperties": false
                            }
                          }
                        },
                        "required": [
                          "id",
                          "customer_id",
                          "status",
                          "total_amount",
                          "order_date",
                          "created_at",
                          "customer",
                          "delivery_address",
                          "order_lines"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "hasMore": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "orders",
                    "totalCount",
                    "hasMore"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/{customer_id}/analytics": {
      "get": {
        "operationId": "customers-getAnalytics",
        "summary": "Get customer analytics",
        "tags": [
          "customers",
          "analytics"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "period",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "month",
                "quarter",
                "year"
              ],
              "default": "year"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "customer": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "name": {
                          "type": "string"
                        },
                        "created_at": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "created_at"
                      ],
                      "additionalProperties": false
                    },
                    "period": {
                      "type": "string",
                      "enum": [
                        "month",
                        "quarter",
                        "year"
                      ]
                    },
                    "analytics": {
                      "type": "object",
                      "properties": {
                        "totalOrders": {
                          "type": "number"
                        },
                        "totalRevenue": {
                          "type": "number"
                        },
                        "avgOrderValue": {
                          "type": "number"
                        },
                        "statusCounts": {
                          "type": "object",
                          "additionalProperties": {
                            "type": "number"
                          }
                        }
                      },
                      "required": [
                        "totalOrders",
                        "totalRevenue",
                        "avgOrderValue",
                        "statusCounts"
                      ],
                      "additionalProperties": false
                    },
                    "recentOrders": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "draft",
                              "confirmed",
                              "scheduled",
                              "en_route",
                              "delivered",
                              "invoiced",
                              "cancelled"
                            ]
                          },
                          "total_amount": {
                            "type": "number"
                          },
                          "order_date": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "status",
                          "total_amount",
                          "order_date"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "customer",
                    "period",
                    "analytics",
                    "recentOrders"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/validate": {
      "post": {
        "operationId": "customers-validate",
        "summary": "Validate customer data",
        "tags": [
          "customers",
          "validation"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "external_id": {
                    "type": "string"
                  },
                  "tax_id": {
                    "type": "string"
                  },
                  "exclude_id": {
                    "type": "string",
                    "format": "uuid"
                  }
                },
                "required": [
                  "name"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "valid": {
                      "type": "boolean"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "valid",
                    "errors",
                    "warnings"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/{customer_id}/addresses": {
      "get": {
        "operationId": "customers-getAddresses",
        "summary": "Get customer addresses",
        "tags": [
          "customers",
          "addresses"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "customer_id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "label": {
                        "type": "string",
                        "nullable": true
                      },
                      "line1": {
                        "type": "string"
                      },
                      "line2": {
                        "type": "string",
                        "nullable": true
                      },
                      "city": {
                        "type": "string"
                      },
                      "state": {
                        "type": "string",
                        "nullable": true
                      },
                      "postal_code": {
                        "type": "string",
                        "nullable": true
                      },
                      "country": {
                        "type": "string"
                      },
                      "latitude": {
                        "type": "number",
                        "nullable": true
                      },
                      "longitude": {
                        "type": "number",
                        "nullable": true
                      },
                      "delivery_window_start": {
                        "type": "string",
                        "nullable": true
                      },
                      "delivery_window_end": {
                        "type": "string",
                        "nullable": true
                      },
                      "is_primary": {
                        "type": "boolean"
                      },
                      "instructions": {
                        "type": "string",
                        "nullable": true
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "id",
                      "customer_id",
                      "label",
                      "line1",
                      "line2",
                      "city",
                      "state",
                      "postal_code",
                      "country",
                      "latitude",
                      "longitude",
                      "delivery_window_start",
                      "delivery_window_end",
                      "is_primary",
                      "instructions",
                      "created_at"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "customers-createAddress",
        "summary": "Create customer address",
        "description": "Add a new address for a customer",
        "tags": [
          "customers",
          "addresses"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "label": {
                    "type": "string"
                  },
                  "line1": {
                    "type": "string",
                    "minLength": 1
                  },
                  "line2": {
                    "type": "string"
                  },
                  "city": {
                    "type": "string",
                    "minLength": 1
                  },
                  "state": {
                    "type": "string"
                  },
                  "postal_code": {
                    "type": "string"
                  },
                  "country": {
                    "type": "string",
                    "minLength": 2
                  },
                  "latitude": {
                    "type": "number"
                  },
                  "longitude": {
                    "type": "number"
                  },
                  "delivery_window_start": {
                    "type": "string"
                  },
                  "delivery_window_end": {
                    "type": "string"
                  },
                  "is_primary": {
                    "type": "boolean",
                    "default": false
                  },
                  "instructions": {
                    "type": "string"
                  }
                },
                "required": [
                  "line1",
                  "city",
                  "country"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "customer_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "label": {
                      "type": "string",
                      "nullable": true
                    },
                    "line1": {
                      "type": "string"
                    },
                    "line2": {
                      "type": "string",
                      "nullable": true
                    },
                    "city": {
                      "type": "string"
                    },
                    "state": {
                      "type": "string",
                      "nullable": true
                    },
                    "postal_code": {
                      "type": "string",
                      "nullable": true
                    },
                    "country": {
                      "type": "string"
                    },
                    "latitude": {
                      "type": "number",
                      "nullable": true
                    },
                    "longitude": {
                      "type": "number",
                      "nullable": true
                    },
                    "delivery_window_start": {
                      "type": "string",
                      "nullable": true
                    },
                    "delivery_window_end": {
                      "type": "string",
                      "nullable": true
                    },
                    "is_primary": {
                      "type": "boolean"
                    },
                    "instructions": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "customer_id",
                    "label",
                    "line1",
                    "line2",
                    "city",
                    "state",
                    "postal_code",
                    "country",
                    "latitude",
                    "longitude",
                    "delivery_window_start",
                    "delivery_window_end",
                    "is_primary",
                    "instructions",
                    "created_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/addresses/{address_id}": {
      "put": {
        "operationId": "customers-updateAddress",
        "summary": "Update address",
        "description": "Update an existing address",
        "tags": [
          "addresses"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "customer_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "label": {
                    "type": "string"
                  },
                  "line1": {
                    "type": "string"
                  },
                  "line2": {
                    "type": "string"
                  },
                  "city": {
                    "type": "string"
                  },
                  "state": {
                    "type": "string"
                  },
                  "postal_code": {
                    "type": "string"
                  },
                  "country": {
                    "type": "string"
                  },
                  "latitude": {
                    "type": "number"
                  },
                  "longitude": {
                    "type": "number"
                  },
                  "delivery_window_start": {
                    "type": "string"
                  },
                  "delivery_window_end": {
                    "type": "string"
                  },
                  "is_primary": {
                    "type": "boolean"
                  },
                  "instructions": {
                    "type": "string"
                  },
                  "special_instructions": {
                    "type": "string"
                  },
                  "preferred_delivery_days": {
                    "type": "string"
                  },
                  "avoid_delivery_dates": {
                    "type": "string"
                  },
                  "access_code": {
                    "type": "string"
                  },
                  "gate_code": {
                    "type": "string"
                  }
                },
                "required": [
                  "customer_id"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "address_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "customer_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "label": {
                      "type": "string",
                      "nullable": true
                    },
                    "line1": {
                      "type": "string"
                    },
                    "line2": {
                      "type": "string",
                      "nullable": true
                    },
                    "city": {
                      "type": "string"
                    },
                    "state": {
                      "type": "string",
                      "nullable": true
                    },
                    "postal_code": {
                      "type": "string",
                      "nullable": true
                    },
                    "country": {
                      "type": "string"
                    },
                    "latitude": {
                      "type": "number",
                      "nullable": true
                    },
                    "longitude": {
                      "type": "number",
                      "nullable": true
                    },
                    "delivery_window_start": {
                      "type": "string",
                      "nullable": true
                    },
                    "delivery_window_end": {
                      "type": "string",
                      "nullable": true
                    },
                    "is_primary": {
                      "type": "boolean"
                    },
                    "instructions": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "customer_id",
                    "label",
                    "line1",
                    "line2",
                    "city",
                    "state",
                    "postal_code",
                    "country",
                    "latitude",
                    "longitude",
                    "delivery_window_start",
                    "delivery_window_end",
                    "is_primary",
                    "instructions",
                    "created_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "delete": {
        "operationId": "customers-deleteAddress",
        "summary": "Delete address",
        "description": "Delete an address",
        "tags": [
          "addresses"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "address_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/addresses/{address_id}/set-primary": {
      "post": {
        "operationId": "customers-setPrimaryAddress",
        "summary": "Set primary address",
        "description": "Set an address as the primary address for a customer",
        "tags": [
          "addresses"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "customer_id": {
                    "type": "string",
                    "format": "uuid"
                  }
                },
                "required": [
                  "customer_id"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "address_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "customer_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "label": {
                      "type": "string",
                      "nullable": true
                    },
                    "line1": {
                      "type": "string"
                    },
                    "line2": {
                      "type": "string",
                      "nullable": true
                    },
                    "city": {
                      "type": "string"
                    },
                    "state": {
                      "type": "string",
                      "nullable": true
                    },
                    "postal_code": {
                      "type": "string",
                      "nullable": true
                    },
                    "country": {
                      "type": "string"
                    },
                    "latitude": {
                      "type": "number",
                      "nullable": true
                    },
                    "longitude": {
                      "type": "number",
                      "nullable": true
                    },
                    "delivery_window_start": {
                      "type": "string",
                      "nullable": true
                    },
                    "delivery_window_end": {
                      "type": "string",
                      "nullable": true
                    },
                    "is_primary": {
                      "type": "boolean"
                    },
                    "instructions": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "customer_id",
                    "label",
                    "line1",
                    "line2",
                    "city",
                    "state",
                    "postal_code",
                    "country",
                    "latitude",
                    "longitude",
                    "delivery_window_start",
                    "delivery_window_end",
                    "is_primary",
                    "instructions",
                    "created_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/addresses/geocode": {
      "post": {
        "operationId": "customers-geocodeAddress",
        "summary": "Geocode address",
        "description": "Get latitude and longitude coordinates for an address",
        "tags": [
          "addresses",
          "geocoding"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "line1": {
                    "type": "string",
                    "minLength": 1
                  },
                  "line2": {
                    "type": "string"
                  },
                  "city": {
                    "type": "string",
                    "minLength": 1
                  },
                  "state": {
                    "type": "string"
                  },
                  "country": {
                    "type": "string",
                    "minLength": 2
                  },
                  "postal_code": {
                    "type": "string"
                  }
                },
                "required": [
                  "line1",
                  "city",
                  "country"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "latitude": {
                      "type": "number"
                    },
                    "longitude": {
                      "type": "number"
                    },
                    "formatted_address": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "latitude",
                    "longitude"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/addresses/validate": {
      "post": {
        "operationId": "customers-validateAddress",
        "summary": "Validate address",
        "description": "Validate address format and existence through geocoding",
        "tags": [
          "addresses",
          "validation"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "line1": {
                    "type": "string",
                    "minLength": 1
                  },
                  "line2": {
                    "type": "string"
                  },
                  "city": {
                    "type": "string",
                    "minLength": 1
                  },
                  "state": {
                    "type": "string"
                  },
                  "country": {
                    "type": "string",
                    "minLength": 2
                  },
                  "postal_code": {
                    "type": "string"
                  }
                },
                "required": [
                  "line1",
                  "city",
                  "country"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "valid": {
                      "type": "boolean"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "geocode_result": {
                      "type": "object",
                      "properties": {
                        "latitude": {
                          "type": "number"
                        },
                        "longitude": {
                          "type": "number"
                        },
                        "formatted_address": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "latitude",
                        "longitude"
                      ],
                      "additionalProperties": false,
                      "nullable": true
                    }
                  },
                  "required": [
                    "valid",
                    "errors",
                    "warnings",
                    "geocode_result"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/addresses/validate-delivery-window": {
      "post": {
        "operationId": "customers-validateDeliveryWindow",
        "summary": "Validate delivery window",
        "description": "Validate delivery window times against business rules",
        "tags": [
          "addresses",
          "validation"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "delivery_window_start": {
                    "type": "string"
                  },
                  "delivery_window_end": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "valid": {
                      "type": "boolean"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "valid",
                    "errors",
                    "warnings"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deliveries/process": {
      "post": {
        "operationId": "deliveries-process",
        "summary": "Process delivery or pickup",
        "description": "Process a delivery or pickup operation with items and location data",
        "tags": [
          "deliveries"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "delivery",
                      "pickup"
                    ]
                  },
                  "data": {
                    "anyOf": [
                      {
                        "type": "object",
                        "properties": {
                          "order_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "customer_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "delivery_address_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "truck_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "delivery_items": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "product_id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "quantity_delivered": {
                                  "type": "integer",
                                  "minimum": 0
                                },
                                "quantity_returned": {
                                  "type": "integer",
                                  "minimum": 0
                                },
                                "unit_price": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "product_id",
                                "quantity_delivered"
                              ],
                              "additionalProperties": false
                            },
                            "minItems": 1
                          },
                          "driver_name": {
                            "type": "string"
                          },
                          "driver_notes": {
                            "type": "string"
                          },
                          "delivery_latitude": {
                            "type": "number"
                          },
                          "delivery_longitude": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "customer_id",
                          "truck_id",
                          "delivery_items"
                        ],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "customer_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "pickup_address_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "truck_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "pickup_items": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "product_id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "quantity_picked_up": {
                                  "type": "integer",
                                  "minimum": 0
                                },
                                "condition": {
                                  "type": "string",
                                  "enum": [
                                    "good",
                                    "damaged",
                                    "needs_repair"
                                  ]
                                }
                              },
                              "required": [
                                "product_id",
                                "quantity_picked_up"
                              ],
                              "additionalProperties": false
                            },
                            "minItems": 1
                          },
                          "driver_name": {
                            "type": "string"
                          },
                          "driver_notes": {
                            "type": "string"
                          },
                          "pickup_latitude": {
                            "type": "number"
                          },
                          "pickup_longitude": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "customer_id",
                          "truck_id",
                          "pickup_items"
                        ],
                        "additionalProperties": false
                      }
                    ]
                  }
                },
                "required": [
                  "type",
                  "data"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "delivery_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "pickup_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "delivery_number": {
                      "type": "string"
                    },
                    "pickup_number": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deliveries/complete": {
      "post": {
        "operationId": "deliveries-complete",
        "summary": "Complete delivery or pickup",
        "description": "Mark a delivery or pickup as completed with optional signature and photo proof",
        "tags": [
          "deliveries"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "delivery",
                      "pickup"
                    ]
                  },
                  "data": {
                    "anyOf": [
                      {
                        "type": "object",
                        "properties": {
                          "delivery_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "customer_signature": {
                            "type": "string"
                          },
                          "photo_proof": {
                            "type": "string"
                          },
                          "delivery_latitude": {
                            "type": "number"
                          },
                          "delivery_longitude": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "delivery_id"
                        ],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "pickup_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "customer_signature": {
                            "type": "string"
                          },
                          "photo_proof": {
                            "type": "string"
                          },
                          "pickup_latitude": {
                            "type": "number"
                          },
                          "pickup_longitude": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "pickup_id"
                        ],
                        "additionalProperties": false
                      }
                    ]
                  }
                },
                "required": [
                  "type",
                  "data"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deliveries": {
      "get": {
        "operationId": "deliveries-listDeliveries",
        "summary": "List deliveries",
        "description": "Get a paginated list of deliveries with optional filtering",
        "tags": [
          "deliveries"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "customer_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "truck_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "in_transit",
                "delivered",
                "failed",
                "cancelled"
              ]
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "deliveries": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "delivery_number": {
                            "type": "string"
                          },
                          "customer_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "truck_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "pending",
                              "in_transit",
                              "delivered",
                              "failed",
                              "cancelled"
                            ]
                          },
                          "delivery_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "driver_name": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "delivery_number",
                          "customer_id",
                          "truck_id",
                          "status",
                          "delivery_date",
                          "driver_name",
                          "created_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "total": {
                      "type": "number"
                    },
                    "page": {
                      "type": "number"
                    },
                    "limit": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "deliveries",
                    "total",
                    "page",
                    "limit",
                    "totalPages"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pickups": {
      "get": {
        "operationId": "deliveries-listPickups",
        "summary": "List pickups",
        "description": "Get a paginated list of pickups with optional filtering",
        "tags": [
          "deliveries",
          "pickups"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "customer_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "truck_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "in_transit",
                "completed",
                "failed",
                "cancelled"
              ]
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "pickups": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "pickup_number": {
                            "type": "string"
                          },
                          "customer_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "truck_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "pending",
                              "in_transit",
                              "completed",
                              "failed",
                              "cancelled"
                            ]
                          },
                          "pickup_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "driver_name": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "pickup_number",
                          "customer_id",
                          "truck_id",
                          "status",
                          "pickup_date",
                          "driver_name",
                          "created_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "total": {
                      "type": "number"
                    },
                    "page": {
                      "type": "number"
                    },
                    "limit": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "pickups",
                    "total",
                    "page",
                    "limit",
                    "totalPages"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/{customer_id}/cylinder-balance": {
      "get": {
        "operationId": "deliveries-getCustomerBalance",
        "summary": "Get customer cylinder balance",
        "description": "Get the current cylinder balance for a customer",
        "tags": [
          "deliveries",
          "customers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "product_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "product_id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "product_name": {
                        "type": "string"
                      },
                      "product_sku": {
                        "type": "string"
                      },
                      "balance": {
                        "type": "number"
                      },
                      "delivered": {
                        "type": "number"
                      },
                      "picked_up": {
                        "type": "number"
                      },
                      "last_transaction_date": {
                        "type": "string",
                        "nullable": true
                      }
                    },
                    "required": [
                      "product_id",
                      "product_name",
                      "product_sku",
                      "balance",
                      "delivered",
                      "picked_up",
                      "last_transaction_date"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deliveries/{delivery_id}": {
      "get": {
        "operationId": "deliveries-getDelivery",
        "summary": "Get delivery details",
        "description": "Get detailed information about a specific delivery including items",
        "tags": [
          "deliveries"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "delivery_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "delivery_number": {
                      "type": "string"
                    },
                    "order_id": {
                      "type": "string",
                      "format": "uuid",
                      "nullable": true
                    },
                    "customer_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "delivery_address_id": {
                      "type": "string",
                      "format": "uuid",
                      "nullable": true
                    },
                    "truck_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "pending",
                        "in_transit",
                        "delivered",
                        "failed",
                        "cancelled"
                      ]
                    },
                    "delivery_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "driver_name": {
                      "type": "string",
                      "nullable": true
                    },
                    "driver_notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "customer_signature": {
                      "type": "string",
                      "nullable": true
                    },
                    "photo_proof": {
                      "type": "string",
                      "nullable": true
                    },
                    "delivery_latitude": {
                      "type": "number",
                      "nullable": true
                    },
                    "delivery_longitude": {
                      "type": "number",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "customer": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "name": {
                          "type": "string"
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "phone",
                        "email"
                      ],
                      "additionalProperties": false
                    },
                    "delivery_address": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "line1": {
                          "type": "string"
                        },
                        "line2": {
                          "type": "string",
                          "nullable": true
                        },
                        "city": {
                          "type": "string"
                        },
                        "state": {
                          "type": "string",
                          "nullable": true
                        },
                        "postal_code": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "line1",
                        "line2",
                        "city",
                        "state",
                        "postal_code"
                      ],
                      "additionalProperties": false,
                      "nullable": true
                    },
                    "truck": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "fleet_number": {
                          "type": "string"
                        },
                        "driver_name": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "fleet_number",
                        "driver_name"
                      ],
                      "additionalProperties": false
                    },
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "delivery_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "product_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "quantity_delivered": {
                            "type": "number"
                          },
                          "quantity_returned": {
                            "type": "number",
                            "nullable": true
                          },
                          "unit_price": {
                            "type": "number",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "name": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "sku"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "delivery_id",
                          "product_id",
                          "quantity_delivered",
                          "quantity_returned",
                          "unit_price",
                          "created_at",
                          "product"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "id",
                    "delivery_number",
                    "order_id",
                    "customer_id",
                    "delivery_address_id",
                    "truck_id",
                    "status",
                    "delivery_date",
                    "driver_name",
                    "driver_notes",
                    "customer_signature",
                    "photo_proof",
                    "delivery_latitude",
                    "delivery_longitude",
                    "created_at",
                    "customer",
                    "delivery_address",
                    "truck",
                    "items"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pickups/{pickup_id}": {
      "get": {
        "operationId": "deliveries-getPickup",
        "summary": "Get pickup details",
        "description": "Get detailed information about a specific pickup including items",
        "tags": [
          "deliveries",
          "pickups"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "pickup_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "pickup_number": {
                      "type": "string"
                    },
                    "customer_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "pickup_address_id": {
                      "type": "string",
                      "format": "uuid",
                      "nullable": true
                    },
                    "truck_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "pending",
                        "in_transit",
                        "completed",
                        "failed",
                        "cancelled"
                      ]
                    },
                    "pickup_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "driver_name": {
                      "type": "string",
                      "nullable": true
                    },
                    "driver_notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "customer_signature": {
                      "type": "string",
                      "nullable": true
                    },
                    "photo_proof": {
                      "type": "string",
                      "nullable": true
                    },
                    "pickup_latitude": {
                      "type": "number",
                      "nullable": true
                    },
                    "pickup_longitude": {
                      "type": "number",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "customer": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "name": {
                          "type": "string"
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "phone",
                        "email"
                      ],
                      "additionalProperties": false
                    },
                    "pickup_address": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "line1": {
                          "type": "string"
                        },
                        "line2": {
                          "type": "string",
                          "nullable": true
                        },
                        "city": {
                          "type": "string"
                        },
                        "state": {
                          "type": "string",
                          "nullable": true
                        },
                        "postal_code": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "line1",
                        "line2",
                        "city",
                        "state",
                        "postal_code"
                      ],
                      "additionalProperties": false,
                      "nullable": true
                    },
                    "truck": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "fleet_number": {
                          "type": "string"
                        },
                        "driver_name": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "fleet_number",
                        "driver_name"
                      ],
                      "additionalProperties": false
                    },
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "pickup_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "product_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "quantity_picked_up": {
                            "type": "number"
                          },
                          "condition": {
                            "type": "string",
                            "enum": [
                              "good",
                              "damaged",
                              "needs_repair"
                            ],
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "name": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "sku"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "pickup_id",
                          "product_id",
                          "quantity_picked_up",
                          "condition",
                          "created_at",
                          "product"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "id",
                    "pickup_number",
                    "customer_id",
                    "pickup_address_id",
                    "truck_id",
                    "status",
                    "pickup_date",
                    "driver_name",
                    "driver_notes",
                    "customer_signature",
                    "photo_proof",
                    "pickup_latitude",
                    "pickup_longitude",
                    "created_at",
                    "customer",
                    "pickup_address",
                    "truck",
                    "items"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/{customer_id}/transactions": {
      "get": {
        "operationId": "deliveries-getCustomerTransactions",
        "summary": "Get customer transactions",
        "description": "Get paginated transaction history for a customer with optional filtering",
        "tags": [
          "deliveries",
          "customers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "product_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "transactions": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "customer_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "product_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "transaction_type": {
                            "type": "string",
                            "enum": [
                              "delivery",
                              "pickup"
                            ]
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "transaction_date": {
                            "type": "string"
                          },
                          "delivery_id": {
                            "type": "string",
                            "format": "uuid",
                            "nullable": true
                          },
                          "pickup_id": {
                            "type": "string",
                            "format": "uuid",
                            "nullable": true
                          },
                          "notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "name": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "sku"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "customer_id",
                          "product_id",
                          "transaction_type",
                          "quantity",
                          "transaction_date",
                          "delivery_id",
                          "pickup_id",
                          "notes",
                          "created_at",
                          "product"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "total": {
                      "type": "number"
                    },
                    "page": {
                      "type": "number"
                    },
                    "limit": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "transactions",
                    "total",
                    "page",
                    "limit",
                    "totalPages"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory": {
      "get": {
        "operationId": "inventory-list",
        "summary": "List inventory with advanced filtering",
        "description": "Get inventory balance with advanced filtering, stock level analysis, and business intelligence. Supports filtering by warehouse, product, stock levels, and search terms.",
        "tags": [
          "inventory"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "warehouse_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "product_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "low_stock_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          },
          {
            "name": "out_of_stock_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          },
          {
            "name": "overstocked_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          },
          {
            "name": "critical_stock_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          },
          {
            "name": "product_status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "obsolete"
              ]
            }
          },
          {
            "name": "stock_threshold_days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 365,
              "default": 30
            }
          },
          {
            "name": "min_qty_available",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0
            }
          },
          {
            "name": "max_qty_available",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0
            }
          },
          {
            "name": "include_reserved",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "updated_at",
                "qty_available",
                "product_name",
                "warehouse_name",
                "stock_level_ratio"
              ],
              "default": "updated_at"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "inventory": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "warehouse_id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "qty_full": {
                            "type": "number"
                          },
                          "qty_empty": {
                            "type": "number"
                          },
                          "qty_reserved": {
                            "type": "number"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "warehouse": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ],
                            "additionalProperties": false
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string"
                              },
                              "status": {
                                "type": "string"
                              },
                              "capacity_kg": {
                                "type": "number"
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure"
                            ],
                            "additionalProperties": false
                          },
                          "qty_available": {
                            "type": "number"
                          },
                          "stock_level": {
                            "type": "string",
                            "enum": [
                              "critical",
                              "low",
                              "normal",
                              "overstocked"
                            ]
                          },
                          "stock_level_ratio": {
                            "type": "number"
                          },
                          "days_of_stock": {
                            "type": "number"
                          },
                          "is_critical": {
                            "type": "boolean"
                          },
                          "is_low": {
                            "type": "boolean"
                          },
                          "is_out_of_stock": {
                            "type": "boolean"
                          },
                          "is_overstocked": {
                            "type": "boolean"
                          },
                          "turnover_rate": {
                            "type": "number"
                          },
                          "storage_cost": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "id",
                          "warehouse_id",
                          "product_id",
                          "qty_full",
                          "qty_empty",
                          "qty_reserved",
                          "updated_at",
                          "warehouse",
                          "product",
                          "qty_available",
                          "stock_level",
                          "stock_level_ratio",
                          "days_of_stock",
                          "is_critical",
                          "is_low",
                          "is_out_of_stock",
                          "is_overstocked",
                          "turnover_rate",
                          "storage_cost"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_cylinders": {
                          "type": "number"
                        },
                        "total_full": {
                          "type": "number"
                        },
                        "total_empty": {
                          "type": "number"
                        },
                        "total_available": {
                          "type": "number"
                        },
                        "low_stock_items": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "total_cylinders",
                        "total_full",
                        "total_empty",
                        "total_available",
                        "low_stock_items"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "inventory",
                    "totalCount",
                    "summary"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/warehouse/{warehouse_id}": {
      "get": {
        "operationId": "inventory-getByWarehouse",
        "summary": "Get inventory by warehouse",
        "description": "Retrieve all inventory records for a specific warehouse with product details.",
        "tags": [
          "inventory"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "warehouse_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "warehouse_id": {
                        "type": "string"
                      },
                      "product_id": {
                        "type": "string"
                      },
                      "qty_full": {
                        "type": "number"
                      },
                      "qty_empty": {
                        "type": "number"
                      },
                      "qty_reserved": {
                        "type": "number"
                      },
                      "updated_at": {
                        "type": "string"
                      },
                      "warehouse": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "name"
                        ],
                        "additionalProperties": false
                      },
                      "product": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sku": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "unit_of_measure": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string"
                          },
                          "capacity_kg": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "id",
                          "sku",
                          "name",
                          "unit_of_measure"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "required": [
                      "id",
                      "warehouse_id",
                      "product_id",
                      "qty_full",
                      "qty_empty",
                      "qty_reserved",
                      "updated_at",
                      "warehouse",
                      "product"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/product/{product_id}": {
      "get": {
        "operationId": "inventory-getByProduct",
        "summary": "Get inventory by product",
        "description": "Retrieve inventory records for a specific product across all warehouses.",
        "tags": [
          "inventory"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "product_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "warehouse_id": {
                        "type": "string"
                      },
                      "product_id": {
                        "type": "string"
                      },
                      "qty_full": {
                        "type": "number"
                      },
                      "qty_empty": {
                        "type": "number"
                      },
                      "qty_reserved": {
                        "type": "number"
                      },
                      "updated_at": {
                        "type": "string"
                      },
                      "warehouse": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "name"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "required": [
                      "id",
                      "warehouse_id",
                      "product_id",
                      "qty_full",
                      "qty_empty",
                      "qty_reserved",
                      "updated_at",
                      "warehouse"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/stats": {
      "get": {
        "operationId": "inventory-getStats",
        "summary": "Get inventory statistics",
        "description": "Get basic inventory statistics including totals and low stock counts. Optionally filter by warehouse.",
        "tags": [
          "inventory"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "warehouse_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "total_cylinders": {
                      "type": "number"
                    },
                    "total_full": {
                      "type": "number"
                    },
                    "total_empty": {
                      "type": "number"
                    },
                    "total_available": {
                      "type": "number"
                    },
                    "low_stock_products": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "total_cylinders",
                    "total_full",
                    "total_empty",
                    "total_available",
                    "low_stock_products"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/adjust": {
      "post": {
        "operationId": "inventory-adjustStock",
        "summary": "Adjust inventory stock levels",
        "description": "Adjust the quantity of full and empty cylinders in inventory with business rule validation and audit trail.",
        "tags": [
          "inventory"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "inventory_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "adjustment_type": {
                    "type": "string",
                    "enum": [
                      "received_full",
                      "received_empty",
                      "physical_count",
                      "damage_loss",
                      "other"
                    ]
                  },
                  "qty_full_change": {
                    "type": "number"
                  },
                  "qty_empty_change": {
                    "type": "number"
                  },
                  "reason": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "inventory_id",
                  "adjustment_type",
                  "qty_full_change",
                  "qty_empty_change",
                  "reason"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "warehouse_id": {
                      "type": "string"
                    },
                    "product_id": {
                      "type": "string"
                    },
                    "qty_full": {
                      "type": "number"
                    },
                    "qty_empty": {
                      "type": "number"
                    },
                    "qty_reserved": {
                      "type": "number"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "name"
                      ],
                      "additionalProperties": false
                    },
                    "product": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "sku": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "unit_of_measure": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string"
                        },
                        "capacity_kg": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "id",
                        "sku",
                        "name",
                        "unit_of_measure"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "id",
                    "warehouse_id",
                    "product_id",
                    "qty_full",
                    "qty_empty",
                    "qty_reserved",
                    "updated_at",
                    "warehouse",
                    "product"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/transfer": {
      "post": {
        "operationId": "inventory-transferStock",
        "summary": "Transfer stock between warehouses",
        "description": "Transfer inventory between warehouses with full validation and atomicity. Creates destination inventory if it doesn't exist.",
        "tags": [
          "inventory"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "from_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "to_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "product_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "qty_full": {
                    "type": "number",
                    "minimum": 0
                  },
                  "qty_empty": {
                    "type": "number",
                    "minimum": 0
                  },
                  "notes": {
                    "type": "string"
                  }
                },
                "required": [
                  "from_warehouse_id",
                  "to_warehouse_id",
                  "product_id",
                  "qty_full",
                  "qty_empty"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "transfer_result": {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean"
                        },
                        "message": {
                          "type": "string"
                        },
                        "transferred_full": {
                          "type": "number"
                        },
                        "transferred_empty": {
                          "type": "number"
                        },
                        "from_warehouse_id": {
                          "type": "string"
                        },
                        "to_warehouse_id": {
                          "type": "string"
                        },
                        "product_id": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "success",
                        "message",
                        "transferred_full",
                        "transferred_empty",
                        "from_warehouse_id",
                        "to_warehouse_id",
                        "product_id",
                        "timestamp"
                      ],
                      "additionalProperties": false
                    },
                    "transfer": {
                      "type": "object",
                      "properties": {
                        "from_warehouse_id": {
                          "type": "string"
                        },
                        "to_warehouse_id": {
                          "type": "string"
                        },
                        "product_id": {
                          "type": "string"
                        },
                        "qty_full": {
                          "type": "number"
                        },
                        "qty_empty": {
                          "type": "number"
                        },
                        "notes": {
                          "type": "string"
                        },
                        "timestamp": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "from_warehouse_id",
                        "to_warehouse_id",
                        "product_id",
                        "qty_full",
                        "qty_empty",
                        "timestamp"
                      ],
                      "additionalProperties": false
                    },
                    "source_inventory": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "warehouse_id": {
                          "type": "string"
                        },
                        "product_id": {
                          "type": "string"
                        },
                        "qty_full": {
                          "type": "number"
                        },
                        "qty_empty": {
                          "type": "number"
                        },
                        "qty_reserved": {
                          "type": "number"
                        },
                        "updated_at": {
                          "type": "string"
                        },
                        "warehouse": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "additionalProperties": false
                        },
                        "product": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "sku": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "unit_of_measure": {
                              "type": "string"
                            },
                            "status": {
                              "type": "string"
                            },
                            "capacity_kg": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "id",
                            "sku",
                            "name",
                            "unit_of_measure"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "id",
                        "warehouse_id",
                        "product_id",
                        "qty_full",
                        "qty_empty",
                        "qty_reserved",
                        "updated_at",
                        "warehouse",
                        "product"
                      ],
                      "additionalProperties": false
                    },
                    "destination_inventory": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "warehouse_id": {
                          "type": "string"
                        },
                        "product_id": {
                          "type": "string"
                        },
                        "qty_full": {
                          "type": "number"
                        },
                        "qty_empty": {
                          "type": "number"
                        },
                        "qty_reserved": {
                          "type": "number"
                        },
                        "updated_at": {
                          "type": "string"
                        },
                        "warehouse": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "additionalProperties": false
                        },
                        "product": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "sku": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "unit_of_measure": {
                              "type": "string"
                            },
                            "status": {
                              "type": "string"
                            },
                            "capacity_kg": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "id",
                            "sku",
                            "name",
                            "unit_of_measure"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "id",
                        "warehouse_id",
                        "product_id",
                        "qty_full",
                        "qty_empty",
                        "qty_reserved",
                        "updated_at",
                        "warehouse",
                        "product"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "success",
                    "transfer_result",
                    "transfer",
                    "source_inventory",
                    "destination_inventory"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/create": {
      "post": {
        "operationId": "inventory-create",
        "summary": "Create new inventory balance record",
        "description": "Create a new inventory balance record for a specific product and warehouse.",
        "tags": [
          "inventory"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "product_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "qty_full": {
                    "type": "number",
                    "minimum": 0,
                    "default": 0
                  },
                  "qty_empty": {
                    "type": "number",
                    "minimum": 0,
                    "default": 0
                  },
                  "qty_reserved": {
                    "type": "number",
                    "minimum": 0,
                    "default": 0
                  }
                },
                "required": [
                  "warehouse_id",
                  "product_id"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "warehouse_id": {
                      "type": "string"
                    },
                    "product_id": {
                      "type": "string"
                    },
                    "qty_full": {
                      "type": "number"
                    },
                    "qty_empty": {
                      "type": "number"
                    },
                    "qty_reserved": {
                      "type": "number"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "name"
                      ],
                      "additionalProperties": false
                    },
                    "product": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "sku": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "unit_of_measure": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string"
                        },
                        "capacity_kg": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "id",
                        "sku",
                        "name",
                        "unit_of_measure"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "id",
                    "warehouse_id",
                    "product_id",
                    "qty_full",
                    "qty_empty",
                    "qty_reserved",
                    "updated_at",
                    "warehouse",
                    "product"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/reserve": {
      "post": {
        "operationId": "inventory-reserve",
        "summary": "Reserve inventory for orders",
        "description": "Reserve a specified quantity of inventory for an order. This is idempotent, meaning it can be called multiple times with the same result.",
        "tags": [
          "inventory"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "order_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "reservations": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "quantity": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "warehouse_id": {
                          "type": "string",
                          "format": "uuid"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "reservations"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reservations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "inventory_id": {
                            "type": "string"
                          },
                          "warehouse_id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "quantity_reserved": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "inventory_id",
                          "warehouse_id",
                          "product_id",
                          "quantity_reserved"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "reservations"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/movements": {
      "get": {
        "operationId": "inventory-getMovements",
        "summary": "Get recent stock movements",
        "description": "Retrieve a list of recent stock movements (inventory adjustments, transfers, etc.) across all warehouses.",
        "tags": [
          "inventory"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "warehouse_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "product_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {}
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/validate-adjustment": {
      "post": {
        "operationId": "inventory-validateAdjustment",
        "summary": "Validate stock adjustment business rules",
        "description": "Validate if a proposed stock adjustment would violate any business rules (e.g., negative stock, insufficient reserved stock, large adjustments, pending transfers).",
        "tags": [
          "inventory"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "inventory_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "qty_full_change": {
                    "type": "number"
                  },
                  "qty_empty_change": {
                    "type": "number"
                  },
                  "adjustment_type": {
                    "type": "string",
                    "enum": [
                      "received_full",
                      "received_empty",
                      "physical_count",
                      "damage_loss",
                      "other"
                    ]
                  }
                },
                "required": [
                  "inventory_id",
                  "qty_full_change",
                  "qty_empty_change",
                  "adjustment_type"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "valid": {
                      "type": "boolean"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "current_stock": {
                      "type": "object",
                      "properties": {
                        "qty_full": {
                          "type": "number"
                        },
                        "qty_empty": {
                          "type": "number"
                        },
                        "qty_reserved": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "qty_full",
                        "qty_empty",
                        "qty_reserved"
                      ],
                      "additionalProperties": false
                    },
                    "resulting_stock": {
                      "type": "object",
                      "properties": {
                        "qty_full": {
                          "type": "number"
                        },
                        "qty_empty": {
                          "type": "number"
                        },
                        "qty_reserved": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "qty_full",
                        "qty_empty",
                        "qty_reserved"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "valid",
                    "errors",
                    "warnings",
                    "current_stock",
                    "resulting_stock"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/low-stock": {
      "get": {
        "operationId": "inventory-getLowStock",
        "summary": "Get low stock items with intelligent thresholds",
        "description": "Retrieve a list of products that are low on stock, considering their projected availability and urgency levels.",
        "tags": [
          "inventory"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "warehouse_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "urgency_level",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "critical",
                "low",
                "warning"
              ],
              "default": "low"
            }
          },
          {
            "name": "days_ahead",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 90,
              "default": 14
            }
          },
          {
            "name": "include_seasonal",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "low_stock_items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "warehouse_id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "qty_full": {
                            "type": "number"
                          },
                          "qty_empty": {
                            "type": "number"
                          },
                          "qty_reserved": {
                            "type": "number"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "warehouse": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ],
                            "additionalProperties": false
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string"
                              },
                              "status": {
                                "type": "string"
                              },
                              "capacity_kg": {
                                "type": "number"
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure"
                            ],
                            "additionalProperties": false,
                            "nullable": true
                          },
                          "current_stock": {
                            "type": "number"
                          },
                          "projected_stock": {
                            "type": "number"
                          },
                          "projected_days_remaining": {
                            "type": "number"
                          },
                          "urgency_level": {
                            "type": "string",
                            "enum": [
                              "critical",
                              "low",
                              "warning",
                              "ok"
                            ]
                          },
                          "suggested_reorder_quantity": {
                            "type": "number"
                          },
                          "suggested_reorder_cost": {
                            "type": "number"
                          },
                          "stockout_risk_cost": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "id",
                          "warehouse_id",
                          "product_id",
                          "qty_full",
                          "qty_empty",
                          "qty_reserved",
                          "updated_at",
                          "warehouse",
                          "product",
                          "current_stock",
                          "projected_stock",
                          "projected_days_remaining",
                          "urgency_level",
                          "suggested_reorder_quantity",
                          "suggested_reorder_cost",
                          "stockout_risk_cost"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_items": {
                          "type": "number"
                        },
                        "critical_items": {
                          "type": "number"
                        },
                        "total_reorder_cost": {
                          "type": "number"
                        },
                        "total_potential_stockout_cost": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "total_items",
                        "critical_items",
                        "total_reorder_cost",
                        "total_potential_stockout_cost"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "low_stock_items",
                    "summary"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/availability": {
      "post": {
        "operationId": "inventory-checkAvailability",
        "summary": "Check product availability with business rules",
        "description": "Validate if a requested quantity of products is available across warehouses, considering delivery dates and priority.",
        "tags": [
          "inventory"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "products": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "quantity_requested": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "warehouse_preference": {
                          "type": "string",
                          "format": "uuid"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity_requested"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "delivery_date": {
                    "type": "string"
                  },
                  "priority": {
                    "type": "string",
                    "enum": [
                      "normal",
                      "high",
                      "urgent"
                    ],
                    "default": "normal"
                  }
                },
                "required": [
                  "products"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "availability_results": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string"
                          },
                          "quantity_requested": {
                            "type": "number"
                          },
                          "can_fulfill": {
                            "type": "boolean"
                          },
                          "total_available": {
                            "type": "number"
                          },
                          "partial_quantity": {
                            "type": "number"
                          },
                          "allocation_plan": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "warehouse_id": {
                                  "type": "string"
                                },
                                "warehouse_name": {
                                  "type": "string"
                                },
                                "quantity": {
                                  "type": "number"
                                },
                                "estimated_availability_date": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "warehouse_id",
                                "quantity",
                                "estimated_availability_date"
                              ],
                              "additionalProperties": false
                            }
                          },
                          "estimated_fulfillment_date": {
                            "type": "string"
                          },
                          "alternative_products": {
                            "type": "array",
                            "items": {}
                          }
                        },
                        "required": [
                          "product_id",
                          "quantity_requested",
                          "can_fulfill",
                          "total_available",
                          "partial_quantity",
                          "allocation_plan",
                          "estimated_fulfillment_date",
                          "alternative_products"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "overall_fulfillment": {
                      "type": "object",
                      "properties": {
                        "can_fulfill_all": {
                          "type": "boolean"
                        },
                        "partial_fulfillment_possible": {
                          "type": "boolean"
                        },
                        "recommended_action": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "can_fulfill_all",
                        "partial_fulfillment_possible",
                        "recommended_action"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "availability_results",
                    "overall_fulfillment"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/receipts": {
      "post": {
        "operationId": "inventory-createReceipt",
        "summary": "Create inventory receipt",
        "description": "Add stock/receive inventory with supplier, truck, driver, receipt date, notes, and multiple products.",
        "tags": [
          "inventory"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "supplier_dn_number": {
                    "type": "string"
                  },
                  "truck_registration": {
                    "type": "string"
                  },
                  "driver_name": {
                    "type": "string"
                  },
                  "receipt_date": {
                    "type": "string"
                  },
                  "notes": {
                    "type": "string"
                  },
                  "receipt_lines": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "qty_expected": {
                          "type": "number",
                          "minimum": 0
                        },
                        "qty_received_good": {
                          "type": "number",
                          "minimum": 0
                        },
                        "qty_received_damaged": {
                          "type": "number",
                          "minimum": 0
                        },
                        "condition_flag": {
                          "type": "string",
                          "enum": [
                            "good",
                            "damaged"
                          ]
                        },
                        "notes": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "product_id",
                        "qty_expected",
                        "qty_received_good",
                        "qty_received_damaged",
                        "condition_flag"
                      ],
                      "additionalProperties": false
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "warehouse_id",
                  "receipt_lines"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "get": {
        "operationId": "inventory-listReceipts",
        "summary": "List receipts",
        "description": "Get a list of receipt transactions.",
        "tags": [
          "inventory",
          "warehouse-operations"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "warehouse_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "open",
                "partial",
                "completed",
                "cancelled"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 15
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "receipts": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "warehouse_id": {
                            "type": "string"
                          },
                          "receipt_date": {
                            "type": "string"
                          },
                          "supplier": {
                            "type": "string"
                          },
                          "truck_number": {
                            "type": "string"
                          },
                          "driver_name": {
                            "type": "string"
                          },
                          "notes": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "warehouse": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ],
                            "additionalProperties": false
                          },
                          "receipt_lines": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "receipt_id": {
                                  "type": "string"
                                },
                                "product_id": {
                                  "type": "string"
                                },
                                "qty_received_good": {
                                  "type": "number"
                                },
                                "qty_received_damaged": {
                                  "type": "number"
                                },
                                "notes": {
                                  "type": "string"
                                },
                                "created_at": {
                                  "type": "string"
                                },
                                "product": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string"
                                    },
                                    "sku": {
                                      "type": "string"
                                    },
                                    "name": {
                                      "type": "string"
                                    },
                                    "unit_of_measure": {
                                      "type": "string"
                                    },
                                    "status": {
                                      "type": "string"
                                    },
                                    "capacity_kg": {
                                      "type": "number"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "sku",
                                    "name",
                                    "unit_of_measure"
                                  ],
                                  "additionalProperties": false
                                }
                              },
                              "required": [
                                "id",
                                "receipt_id",
                                "product_id",
                                "qty_received_good",
                                "created_at",
                                "product"
                              ],
                              "additionalProperties": false
                            }
                          }
                        },
                        "required": [
                          "id",
                          "warehouse_id",
                          "receipt_date",
                          "status",
                          "created_at",
                          "updated_at",
                          "warehouse",
                          "receipt_lines"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "receipts",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/transfer/initiate": {
      "post": {
        "operationId": "inventory-initiateTransfer",
        "summary": "Initiate warehouse-to-warehouse transfer",
        "description": "Initiate a transfer between warehouses, moving stock to In Transit status.",
        "tags": [
          "inventory",
          "warehouse-operations"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "source_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "destination_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "product_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "qty_full": {
                    "type": "number",
                    "minimum": 0
                  },
                  "qty_empty": {
                    "type": "number",
                    "minimum": 0
                  },
                  "reference_number": {
                    "type": "string"
                  }
                },
                "required": [
                  "source_warehouse_id",
                  "destination_warehouse_id",
                  "product_id",
                  "qty_full",
                  "qty_empty"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "transfer_id": {
                      "type": "string"
                    },
                    "transfer": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "source_warehouse_id": {
                          "type": "string"
                        },
                        "destination_warehouse_id": {
                          "type": "string"
                        },
                        "product_id": {
                          "type": "string"
                        },
                        "qty_full": {
                          "type": "number"
                        },
                        "qty_empty": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        },
                        "reference_number": {
                          "type": "string"
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "updated_at": {
                          "type": "string"
                        },
                        "source_warehouse": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "additionalProperties": false
                        },
                        "destination_warehouse": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "id",
                        "source_warehouse_id",
                        "destination_warehouse_id",
                        "product_id",
                        "qty_full",
                        "qty_empty",
                        "status",
                        "created_at",
                        "updated_at",
                        "source_warehouse",
                        "destination_warehouse"
                      ],
                      "additionalProperties": false
                    },
                    "status": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "transfer_id",
                    "transfer",
                    "status"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/transfer/complete": {
      "post": {
        "operationId": "inventory-completeTransfer",
        "summary": "Complete warehouse transfer",
        "description": "Complete a warehouse transfer by receiving stock at destination.",
        "tags": [
          "inventory",
          "warehouse-operations"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "transfer_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "product_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "qty_full_received": {
                    "type": "number",
                    "minimum": 0
                  },
                  "qty_empty_received": {
                    "type": "number",
                    "minimum": 0
                  }
                },
                "required": [
                  "transfer_id",
                  "product_id",
                  "qty_full_received",
                  "qty_empty_received"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "transfer": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "source_warehouse_id": {
                          "type": "string"
                        },
                        "destination_warehouse_id": {
                          "type": "string"
                        },
                        "product_id": {
                          "type": "string"
                        },
                        "qty_full": {
                          "type": "number"
                        },
                        "qty_empty": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        },
                        "reference_number": {
                          "type": "string"
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "updated_at": {
                          "type": "string"
                        },
                        "source_warehouse": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "additionalProperties": false
                        },
                        "destination_warehouse": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "id",
                        "source_warehouse_id",
                        "destination_warehouse_id",
                        "product_id",
                        "qty_full",
                        "qty_empty",
                        "status",
                        "created_at",
                        "updated_at",
                        "source_warehouse",
                        "destination_warehouse"
                      ],
                      "additionalProperties": false
                    },
                    "status": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "transfer",
                    "status"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/cycle-count/create": {
      "post": {
        "operationId": "inventory-createCycleCount",
        "summary": "Create cycle count",
        "description": "Create a cycle count for periodic inventory verification with variance tracking.",
        "tags": [
          "inventory",
          "warehouse-operations"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "count_date": {
                    "type": "string"
                  },
                  "notes": {
                    "type": "string"
                  },
                  "cycle_count_lines": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "system_qty_full": {
                          "type": "number",
                          "minimum": 0
                        },
                        "system_qty_empty": {
                          "type": "number",
                          "minimum": 0
                        },
                        "counted_qty_full": {
                          "type": "number",
                          "minimum": 0
                        },
                        "counted_qty_empty": {
                          "type": "number",
                          "minimum": 0
                        },
                        "notes": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "product_id",
                        "system_qty_full",
                        "system_qty_empty",
                        "counted_qty_full",
                        "counted_qty_empty"
                      ],
                      "additionalProperties": false
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "warehouse_id",
                  "cycle_count_lines"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "cycle_count": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "warehouse_id": {
                          "type": "string"
                        },
                        "count_date": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string"
                        },
                        "counted_by_user_id": {
                          "type": "string"
                        },
                        "notes": {
                          "type": "string"
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "updated_at": {
                          "type": "string"
                        },
                        "warehouse": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name"
                          ],
                          "additionalProperties": false
                        },
                        "cycle_count_lines": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "cycle_count_id": {
                                "type": "string"
                              },
                              "product_id": {
                                "type": "string"
                              },
                              "system_qty_full": {
                                "type": "number"
                              },
                              "system_qty_empty": {
                                "type": "number"
                              },
                              "counted_qty_full": {
                                "type": "number"
                              },
                              "counted_qty_empty": {
                                "type": "number"
                              },
                              "notes": {
                                "type": "string"
                              },
                              "created_at": {
                                "type": "string"
                              },
                              "product": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "sku": {
                                    "type": "string"
                                  },
                                  "name": {
                                    "type": "string"
                                  },
                                  "unit_of_measure": {
                                    "type": "string"
                                  },
                                  "status": {
                                    "type": "string"
                                  },
                                  "capacity_kg": {
                                    "type": "number"
                                  }
                                },
                                "required": [
                                  "id",
                                  "sku",
                                  "name",
                                  "unit_of_measure"
                                ],
                                "additionalProperties": false
                              }
                            },
                            "required": [
                              "id",
                              "cycle_count_id",
                              "product_id",
                              "system_qty_full",
                              "system_qty_empty",
                              "counted_qty_full",
                              "counted_qty_empty",
                              "created_at",
                              "product"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "id",
                        "warehouse_id",
                        "count_date",
                        "status",
                        "counted_by_user_id",
                        "created_at",
                        "updated_at",
                        "warehouse",
                        "cycle_count_lines"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "cycle_count"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/inventory/cycle-counts": {
      "get": {
        "operationId": "inventory-listCycleCounts",
        "summary": "List cycle counts",
        "description": "Get a list of cycle count transactions.",
        "tags": [
          "inventory",
          "warehouse-operations"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "warehouse_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "in_progress",
                "completed",
                "cancelled"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 15
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "cycle_counts": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "warehouse_id": {
                            "type": "string"
                          },
                          "count_date": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string"
                          },
                          "counted_by_user_id": {
                            "type": "string"
                          },
                          "notes": {
                            "type": "string"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "warehouse": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ],
                            "additionalProperties": false
                          },
                          "cycle_count_lines": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "cycle_count_id": {
                                  "type": "string"
                                },
                                "product_id": {
                                  "type": "string"
                                },
                                "system_qty_full": {
                                  "type": "number"
                                },
                                "system_qty_empty": {
                                  "type": "number"
                                },
                                "counted_qty_full": {
                                  "type": "number"
                                },
                                "counted_qty_empty": {
                                  "type": "number"
                                },
                                "notes": {
                                  "type": "string"
                                },
                                "created_at": {
                                  "type": "string"
                                },
                                "product": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string"
                                    },
                                    "sku": {
                                      "type": "string"
                                    },
                                    "name": {
                                      "type": "string"
                                    },
                                    "unit_of_measure": {
                                      "type": "string"
                                    },
                                    "status": {
                                      "type": "string"
                                    },
                                    "capacity_kg": {
                                      "type": "number"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "sku",
                                    "name",
                                    "unit_of_measure"
                                  ],
                                  "additionalProperties": false
                                }
                              },
                              "required": [
                                "id",
                                "cycle_count_id",
                                "product_id",
                                "system_qty_full",
                                "system_qty_empty",
                                "counted_qty_full",
                                "counted_qty_empty",
                                "created_at",
                                "product"
                              ],
                              "additionalProperties": false
                            }
                          }
                        },
                        "required": [
                          "id",
                          "warehouse_id",
                          "count_date",
                          "status",
                          "counted_by_user_id",
                          "created_at",
                          "updated_at",
                          "warehouse",
                          "cycle_count_lines"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "cycle_counts",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/payments": {
      "post": {
        "operationId": "payments-create",
        "summary": "Record a new payment",
        "description": "Record a payment for an order with comprehensive validation and automatic order status updates. Supports Cash, Mpesa, and Card payments. For Mpesa payments, initiates STK push. For Cash/Card payments, immediately processes and may update order status to \"paid\" if full payment is received.",
        "tags": [
          "payments"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "order_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "amount": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "payment_method": {
                    "type": "string",
                    "enum": [
                      "Cash",
                      "Mpesa",
                      "Card"
                    ]
                  },
                  "payment_date": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "notes": {
                    "type": "string"
                  },
                  "metadata": {
                    "type": "object",
                    "additionalProperties": {}
                  },
                  "paid_by": {
                    "type": "string",
                    "format": "uuid"
                  }
                },
                "required": [
                  "order_id",
                  "amount",
                  "payment_method",
                  "paid_by"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "order_id": {
                      "type": "string"
                    },
                    "amount": {
                      "type": "number"
                    },
                    "payment_method": {
                      "type": "string",
                      "enum": [
                        "Cash",
                        "Mpesa",
                        "Card"
                      ]
                    },
                    "payment_status": {
                      "type": "string",
                      "enum": [
                        "pending",
                        "completed",
                        "failed",
                        "refunded"
                      ]
                    },
                    "transaction_id": {
                      "type": "string"
                    },
                    "payment_date": {
                      "type": "string"
                    },
                    "reference_number": {
                      "type": "string"
                    },
                    "notes": {
                      "type": "string"
                    },
                    "metadata": {
                      "type": "object",
                      "additionalProperties": {}
                    },
                    "created_by": {
                      "type": "string"
                    },
                    "paid_by": {
                      "type": "string"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "updated_by": {
                      "type": "string"
                    },
                    "order": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "total_amount": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        },
                        "payment_status_cache": {
                          "type": "string"
                        },
                        "customer": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string"
                            },
                            "phone": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name",
                            "email"
                          ],
                          "additionalProperties": false
                        },
                        "delivery_address": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "line1": {
                              "type": "string"
                            },
                            "line2": {
                              "type": "string"
                            },
                            "city": {
                              "type": "string"
                            },
                            "state": {
                              "type": "string"
                            },
                            "postal_code": {
                              "type": "string"
                            },
                            "country": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "line1",
                            "city",
                            "state",
                            "postal_code",
                            "country"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "id",
                        "total_amount",
                        "status"
                      ],
                      "additionalProperties": false
                    },
                    "payment_summary": {
                      "type": "object",
                      "properties": {
                        "order_total": {
                          "type": "number"
                        },
                        "total_payments": {
                          "type": "number"
                        },
                        "balance": {
                          "type": "number"
                        },
                        "payment_status": {
                          "type": "string"
                        },
                        "payment_count": {
                          "type": "number"
                        },
                        "last_payment_date": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "order_total",
                        "total_payments",
                        "balance",
                        "payment_status",
                        "payment_count",
                        "last_payment_date"
                      ],
                      "additionalProperties": false
                    },
                    "payment_balance": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "id",
                    "order_id",
                    "amount",
                    "payment_method",
                    "payment_status",
                    "payment_date",
                    "paid_by"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "get": {
        "operationId": "payments-list",
        "summary": "List payments with advanced filtering",
        "description": "Retrieve a paginated list of payments with comprehensive filtering options including date ranges, amounts, payment methods, and status.",
        "tags": [
          "payments"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "order_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "payment_method",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "Cash",
                "Mpesa",
                "Card"
              ]
            }
          },
          {
            "name": "payment_status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "completed",
                "failed",
                "refunded"
              ]
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "amount_min",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "amount_max",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "payment_date",
                "amount",
                "created_at",
                "payment_id"
              ],
              "default": "payment_date"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "payments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "order_id": {
                            "type": "string"
                          },
                          "amount": {
                            "type": "number"
                          },
                          "payment_method": {
                            "type": "string",
                            "enum": [
                              "Cash",
                              "Mpesa",
                              "Card"
                            ]
                          },
                          "payment_status": {
                            "type": "string",
                            "enum": [
                              "pending",
                              "completed",
                              "failed",
                              "refunded"
                            ]
                          },
                          "transaction_id": {
                            "type": "string"
                          },
                          "payment_date": {
                            "type": "string"
                          },
                          "reference_number": {
                            "type": "string"
                          },
                          "notes": {
                            "type": "string"
                          },
                          "metadata": {
                            "type": "object",
                            "additionalProperties": {}
                          },
                          "created_by": {
                            "type": "string"
                          },
                          "paid_by": {
                            "type": "string"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "updated_by": {
                            "type": "string"
                          },
                          "order": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "total_amount": {
                                "type": "number"
                              },
                              "status": {
                                "type": "string"
                              },
                              "customer": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "name": {
                                    "type": "string"
                                  },
                                  "email": {
                                    "type": "string"
                                  },
                                  "phone": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name",
                                  "email"
                                ],
                                "additionalProperties": false
                              }
                            },
                            "required": [
                              "id",
                              "total_amount",
                              "status"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "order_id",
                          "amount",
                          "payment_method",
                          "payment_status",
                          "payment_date",
                          "paid_by"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_amount": {
                          "type": "number"
                        },
                        "total_count": {
                          "type": "number"
                        },
                        "completed_amount": {
                          "type": "number"
                        },
                        "completed_count": {
                          "type": "number"
                        },
                        "pending_amount": {
                          "type": "number"
                        },
                        "pending_count": {
                          "type": "number"
                        },
                        "failed_amount": {
                          "type": "number"
                        },
                        "failed_count": {
                          "type": "number"
                        },
                        "by_method": {
                          "type": "object",
                          "properties": {
                            "Cash": {
                              "type": "object",
                              "properties": {
                                "amount": {
                                  "type": "number"
                                },
                                "count": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "amount",
                                "count"
                              ],
                              "additionalProperties": false
                            },
                            "Mpesa": {
                              "type": "object",
                              "properties": {
                                "amount": {
                                  "type": "number"
                                },
                                "count": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "amount",
                                "count"
                              ],
                              "additionalProperties": false
                            },
                            "Card": {
                              "type": "object",
                              "properties": {
                                "amount": {
                                  "type": "number"
                                },
                                "count": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "amount",
                                "count"
                              ],
                              "additionalProperties": false
                            }
                          },
                          "required": [
                            "Cash",
                            "Mpesa",
                            "Card"
                          ],
                          "additionalProperties": false
                        },
                        "by_status": {
                          "type": "object",
                          "properties": {
                            "pending": {
                              "type": "object",
                              "properties": {
                                "amount": {
                                  "type": "number"
                                },
                                "count": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "amount",
                                "count"
                              ],
                              "additionalProperties": false
                            },
                            "completed": {
                              "type": "object",
                              "properties": {
                                "amount": {
                                  "type": "number"
                                },
                                "count": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "amount",
                                "count"
                              ],
                              "additionalProperties": false
                            },
                            "failed": {
                              "type": "object",
                              "properties": {
                                "amount": {
                                  "type": "number"
                                },
                                "count": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "amount",
                                "count"
                              ],
                              "additionalProperties": false
                            },
                            "refunded": {
                              "type": "object",
                              "properties": {
                                "amount": {
                                  "type": "number"
                                },
                                "count": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "amount",
                                "count"
                              ],
                              "additionalProperties": false
                            }
                          },
                          "required": [
                            "pending",
                            "completed",
                            "failed",
                            "refunded"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "total_amount",
                        "total_count",
                        "completed_amount",
                        "completed_count",
                        "pending_amount",
                        "pending_count",
                        "failed_amount",
                        "failed_count",
                        "by_method",
                        "by_status"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "payments",
                    "totalCount",
                    "totalPages",
                    "currentPage",
                    "summary"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/payments/mpesa/initiate": {
      "post": {
        "operationId": "payments-initiateMpesa",
        "summary": "Initiate Mpesa payment",
        "description": "Initiate a Mpesa payment for an order and return payment details for customer confirmation.",
        "tags": [
          "payments"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "order_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "customer_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "amount": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "phone_number": {
                    "type": "string",
                    "pattern": "^254\\d{9}$"
                  },
                  "reference": {
                    "type": "string"
                  },
                  "notes": {
                    "type": "string"
                  },
                  "paid_by": {
                    "type": "string",
                    "format": "uuid"
                  }
                },
                "required": [
                  "order_id",
                  "customer_id",
                  "amount",
                  "phone_number"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "checkout_request_id": {
                      "type": "string"
                    },
                    "merchant_request_id": {
                      "type": "string"
                    },
                    "response_code": {
                      "type": "string"
                    },
                    "response_description": {
                      "type": "string"
                    },
                    "customer_message": {
                      "type": "string"
                    },
                    "payment_id": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "checkout_request_id",
                    "merchant_request_id",
                    "response_code",
                    "response_description",
                    "customer_message",
                    "payment_id"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/payments/summary": {
      "get": {
        "operationId": "payments-getSummary",
        "summary": "Get payment summary statistics",
        "description": "Get comprehensive payment statistics including totals by status, payment method, and time periods with optional filtering.",
        "tags": [
          "payments"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "not": {}
                },
                {
                  "type": "string"
                }
              ],
              "default": ""
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "not": {}
                },
                {
                  "type": "string"
                }
              ],
              "default": ""
            }
          },
          {
            "name": "payment_method",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "Cash",
                "Mpesa",
                "Card"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "total_amount": {
                      "type": "number"
                    },
                    "total_count": {
                      "type": "number"
                    },
                    "completed_amount": {
                      "type": "number"
                    },
                    "completed_count": {
                      "type": "number"
                    },
                    "pending_amount": {
                      "type": "number"
                    },
                    "pending_count": {
                      "type": "number"
                    },
                    "failed_amount": {
                      "type": "number"
                    },
                    "failed_count": {
                      "type": "number"
                    },
                    "by_method": {
                      "type": "object",
                      "properties": {
                        "Cash": {
                          "type": "object",
                          "properties": {
                            "amount": {
                              "type": "number"
                            },
                            "count": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "amount",
                            "count"
                          ],
                          "additionalProperties": false
                        },
                        "Mpesa": {
                          "type": "object",
                          "properties": {
                            "amount": {
                              "type": "number"
                            },
                            "count": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "amount",
                            "count"
                          ],
                          "additionalProperties": false
                        },
                        "Card": {
                          "type": "object",
                          "properties": {
                            "amount": {
                              "type": "number"
                            },
                            "count": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "amount",
                            "count"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "Cash",
                        "Mpesa",
                        "Card"
                      ],
                      "additionalProperties": false
                    },
                    "by_status": {
                      "type": "object",
                      "properties": {
                        "pending": {
                          "type": "object",
                          "properties": {
                            "amount": {
                              "type": "number"
                            },
                            "count": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "amount",
                            "count"
                          ],
                          "additionalProperties": false
                        },
                        "completed": {
                          "type": "object",
                          "properties": {
                            "amount": {
                              "type": "number"
                            },
                            "count": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "amount",
                            "count"
                          ],
                          "additionalProperties": false
                        },
                        "failed": {
                          "type": "object",
                          "properties": {
                            "amount": {
                              "type": "number"
                            },
                            "count": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "amount",
                            "count"
                          ],
                          "additionalProperties": false
                        },
                        "refunded": {
                          "type": "object",
                          "properties": {
                            "amount": {
                              "type": "number"
                            },
                            "count": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "amount",
                            "count"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "pending",
                        "completed",
                        "failed",
                        "refunded"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "total_amount",
                    "total_count",
                    "completed_amount",
                    "completed_count",
                    "pending_amount",
                    "pending_count",
                    "failed_amount",
                    "failed_count",
                    "by_method",
                    "by_status"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/payments/overdue-orders": {
      "get": {
        "operationId": "payments-getOverdueOrders",
        "summary": "Get orders with overdue payments",
        "description": "Retrieve orders that have overdue payments with urgency levels and detailed customer information for collections.",
        "tags": [
          "payments"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "days_overdue_min",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "orders": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "total_amount": {
                            "type": "number"
                          },
                          "status": {
                            "type": "string"
                          },
                          "payment_due_date": {
                            "type": "string"
                          },
                          "payment_status_cache": {
                            "type": "string"
                          },
                          "invoice_date": {
                            "type": "string"
                          },
                          "customer": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "email": {
                                "type": "string"
                              },
                              "phone": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "email"
                            ],
                            "additionalProperties": false
                          },
                          "days_overdue": {
                            "type": "number"
                          },
                          "urgency_level": {
                            "type": "string",
                            "enum": [
                              "medium",
                              "high",
                              "critical"
                            ]
                          }
                        },
                        "required": [
                          "id",
                          "total_amount",
                          "status",
                          "days_overdue",
                          "urgency_level"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_overdue": {
                          "type": "number"
                        },
                        "total_amount": {
                          "type": "number"
                        },
                        "critical_count": {
                          "type": "number"
                        },
                        "high_count": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "total_overdue",
                        "total_amount",
                        "critical_count",
                        "high_count"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "orders",
                    "summary"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/payments/{payment_id}": {
      "get": {
        "operationId": "payments-getById",
        "summary": "Get payment by ID",
        "description": "Retrieve detailed information about a specific payment including associated order and customer details.",
        "tags": [
          "payments"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "payment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "order_id": {
                      "type": "string"
                    },
                    "amount": {
                      "type": "number"
                    },
                    "payment_method": {
                      "type": "string",
                      "enum": [
                        "Cash",
                        "Mpesa",
                        "Card"
                      ]
                    },
                    "payment_status": {
                      "type": "string",
                      "enum": [
                        "pending",
                        "completed",
                        "failed",
                        "refunded"
                      ]
                    },
                    "transaction_id": {
                      "type": "string"
                    },
                    "payment_date": {
                      "type": "string"
                    },
                    "reference_number": {
                      "type": "string"
                    },
                    "notes": {
                      "type": "string"
                    },
                    "metadata": {
                      "type": "object",
                      "additionalProperties": {}
                    },
                    "created_by": {
                      "type": "string"
                    },
                    "paid_by": {
                      "type": "string"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "updated_by": {
                      "type": "string"
                    },
                    "order": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "total_amount": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        },
                        "payment_status_cache": {
                          "type": "string"
                        },
                        "customer": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string"
                            },
                            "phone": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name",
                            "email"
                          ],
                          "additionalProperties": false
                        },
                        "delivery_address": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "line1": {
                              "type": "string"
                            },
                            "line2": {
                              "type": "string"
                            },
                            "city": {
                              "type": "string"
                            },
                            "state": {
                              "type": "string"
                            },
                            "postal_code": {
                              "type": "string"
                            },
                            "country": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "line1",
                            "city",
                            "state",
                            "postal_code",
                            "country"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "id",
                        "total_amount",
                        "status"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "id",
                    "order_id",
                    "amount",
                    "payment_method",
                    "payment_status",
                    "payment_date",
                    "paid_by"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/orders/{order_id}/payments": {
      "get": {
        "operationId": "payments-getByOrderId",
        "summary": "Get payments by order ID",
        "description": "Retrieve all payments for a specific order with optional payment summary including balance calculations.",
        "tags": [
          "payments"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "include_summary",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "order": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "total_amount": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        },
                        "payment_status": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "total_amount",
                        "status"
                      ],
                      "additionalProperties": false
                    },
                    "payments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "order_id": {
                            "type": "string"
                          },
                          "amount": {
                            "type": "number"
                          },
                          "payment_method": {
                            "type": "string",
                            "enum": [
                              "Cash",
                              "Mpesa",
                              "Card"
                            ]
                          },
                          "payment_status": {
                            "type": "string",
                            "enum": [
                              "pending",
                              "completed",
                              "failed",
                              "refunded"
                            ]
                          },
                          "transaction_id": {
                            "type": "string"
                          },
                          "payment_date": {
                            "type": "string"
                          },
                          "reference_number": {
                            "type": "string"
                          },
                          "notes": {
                            "type": "string"
                          },
                          "metadata": {
                            "type": "object",
                            "additionalProperties": {}
                          },
                          "created_by": {
                            "type": "string"
                          },
                          "paid_by": {
                            "type": "string"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "updated_by": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "order_id",
                          "amount",
                          "payment_method",
                          "payment_status",
                          "payment_date",
                          "paid_by"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "order_total": {
                          "type": "number"
                        },
                        "total_payments": {
                          "type": "number"
                        },
                        "balance": {
                          "type": "number"
                        },
                        "payment_status": {
                          "type": "string"
                        },
                        "payment_count": {
                          "type": "number"
                        },
                        "last_payment_date": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "order_total",
                        "total_payments",
                        "balance",
                        "payment_status",
                        "payment_count",
                        "last_payment_date"
                      ],
                      "additionalProperties": false,
                      "nullable": true
                    }
                  },
                  "required": [
                    "order",
                    "payments",
                    "summary"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/payments/{payment_id}/status": {
      "put": {
        "operationId": "payments-updateStatus",
        "summary": "Update payment status",
        "description": "Update the status of a payment (pending, completed, failed, refunded) with optional transaction details and notes.",
        "tags": [
          "payments"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "payment_status": {
                    "type": "string",
                    "enum": [
                      "pending",
                      "completed",
                      "failed",
                      "refunded"
                    ]
                  },
                  "transaction_id": {
                    "type": "string"
                  },
                  "notes": {
                    "type": "string"
                  }
                },
                "required": [
                  "payment_status"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "payment_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "order_id": {
                      "type": "string"
                    },
                    "amount": {
                      "type": "number"
                    },
                    "payment_method": {
                      "type": "string",
                      "enum": [
                        "Cash",
                        "Mpesa",
                        "Card"
                      ]
                    },
                    "payment_status": {
                      "type": "string",
                      "enum": [
                        "pending",
                        "completed",
                        "failed",
                        "refunded"
                      ]
                    },
                    "transaction_id": {
                      "type": "string"
                    },
                    "payment_date": {
                      "type": "string"
                    },
                    "reference_number": {
                      "type": "string"
                    },
                    "notes": {
                      "type": "string"
                    },
                    "metadata": {
                      "type": "object",
                      "additionalProperties": {}
                    },
                    "created_by": {
                      "type": "string"
                    },
                    "paid_by": {
                      "type": "string"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "updated_by": {
                      "type": "string"
                    },
                    "order": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "total_amount": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        },
                        "payment_status_cache": {
                          "type": "string"
                        },
                        "customer": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string"
                            },
                            "phone": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "name",
                            "email"
                          ],
                          "additionalProperties": false
                        },
                        "delivery_address": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "line1": {
                              "type": "string"
                            },
                            "line2": {
                              "type": "string"
                            },
                            "city": {
                              "type": "string"
                            },
                            "state": {
                              "type": "string"
                            },
                            "postal_code": {
                              "type": "string"
                            },
                            "country": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "line1",
                            "city",
                            "state",
                            "postal_code",
                            "country"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "id",
                        "total_amount",
                        "status"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "id",
                    "order_id",
                    "amount",
                    "payment_method",
                    "payment_status",
                    "payment_date",
                    "paid_by"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/payments/mpesa/check-status": {
      "post": {
        "operationId": "payments-manualStatusCheck",
        "summary": "Manual M-Pesa status check",
        "description": "Manually trigger status check for a specific checkout request to verify payment status",
        "tags": [
          "payments"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "checkout_request_id": {
                    "type": "string",
                    "minLength": 5
                  }
                },
                "required": [
                  "checkout_request_id"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "payment_status": {
                      "type": "string"
                    },
                    "error": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products": {
      "get": {
        "operationId": "products-list",
        "summary": "List products with advanced filtering",
        "description": "Retrieve a comprehensive list of products with advanced filtering, inventory data, and business intelligence including popularity and compliance scores.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "obsolete"
              ]
            }
          },
          {
            "name": "unit_of_measure",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "cylinder",
                "kg"
              ]
            }
          },
          {
            "name": "variant_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "cylinder",
                "refillable",
                "disposable"
              ],
              "default": "cylinder"
            }
          },
          {
            "name": "has_inventory",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "low_stock_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          },
          {
            "name": "availability_status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "available",
                "low_stock",
                "out_of_stock"
              ]
            }
          },
          {
            "name": "capacity_min",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0
            }
          },
          {
            "name": "capacity_max",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0
            }
          },
          {
            "name": "weight_min",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0
            }
          },
          {
            "name": "weight_max",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 0
            }
          },
          {
            "name": "requires_tag",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "is_variant",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "parent_products_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "sku_variant",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "EMPTY",
                "FULL-XCH",
                "FULL-OUT",
                "DAMAGED"
              ]
            }
          },
          {
            "name": "created_after",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "updated_after",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "created_at",
                "name",
                "sku",
                "capacity_kg",
                "inventory_level",
                "last_sold"
              ],
              "default": "created_at"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            }
          },
          {
            "name": "show_obsolete",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          },
          {
            "name": "include_inventory_data",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "products": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sku": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string"
                          },
                          "unit_of_measure": {
                            "type": "string",
                            "enum": [
                              "cylinder",
                              "kg"
                            ]
                          },
                          "capacity_kg": {
                            "type": "number"
                          },
                          "tare_weight_kg": {
                            "type": "number"
                          },
                          "valve_type": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "active",
                              "obsolete"
                            ]
                          },
                          "barcode_uid": {
                            "type": "string"
                          },
                          "requires_tag": {
                            "type": "boolean"
                          },
                          "variant_type": {
                            "type": "string",
                            "enum": [
                              "cylinder",
                              "refillable",
                              "disposable"
                            ]
                          },
                          "variant": {
                            "type": "string",
                            "enum": [
                              "outright",
                              "refill"
                            ]
                          },
                          "parent_products_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "sku_variant": {
                            "type": "string",
                            "enum": [
                              "EMPTY",
                              "FULL-XCH",
                              "FULL-OUT",
                              "DAMAGED"
                            ],
                            "nullable": true
                          },
                          "is_variant": {
                            "type": "boolean"
                          },
                          "tax_category": {
                            "type": "string"
                          },
                          "tax_rate": {
                            "type": "number"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "inventory_summary": {
                            "type": "object",
                            "properties": {
                              "total_stock": {
                                "type": "number"
                              },
                              "total_available": {
                                "type": "number"
                              },
                              "warehouse_count": {
                                "type": "number"
                              },
                              "stock_level": {
                                "type": "string",
                                "enum": [
                                  "out",
                                  "critical",
                                  "low",
                                  "normal",
                                  "high"
                                ]
                              },
                              "is_available": {
                                "type": "boolean"
                              },
                              "last_restocked": {
                                "type": "string",
                                "nullable": true
                              }
                            },
                            "required": [
                              "total_stock",
                              "total_available",
                              "warehouse_count",
                              "stock_level",
                              "is_available",
                              "last_restocked"
                            ],
                            "additionalProperties": false
                          },
                          "popularity_score": {
                            "type": "number"
                          },
                          "compliance_score": {
                            "type": "number"
                          },
                          "profitability_score": {
                            "type": "number"
                          },
                          "inventory_balance": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "warehouse_id": {
                                  "type": "string"
                                },
                                "qty_full": {
                                  "type": "number"
                                },
                                "qty_empty": {
                                  "type": "number"
                                },
                                "qty_reserved": {
                                  "type": "number"
                                },
                                "updated_at": {
                                  "type": "string"
                                },
                                "warehouse": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string"
                                    },
                                    "name": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "name"
                                  ],
                                  "additionalProperties": false
                                }
                              },
                              "required": [
                                "warehouse_id",
                                "qty_full",
                                "qty_empty",
                                "qty_reserved",
                                "updated_at",
                                "warehouse"
                              ],
                              "additionalProperties": false
                            }
                          }
                        },
                        "required": [
                          "id",
                          "sku",
                          "name",
                          "unit_of_measure",
                          "status",
                          "requires_tag",
                          "variant_type",
                          "parent_products_id",
                          "sku_variant",
                          "is_variant",
                          "created_at",
                          "popularity_score",
                          "compliance_score",
                          "profitability_score"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_products": {
                          "type": "number",
                          "default": 0
                        },
                        "active_products": {
                          "type": "number",
                          "default": 0
                        },
                        "obsolete_products": {
                          "type": "number",
                          "default": 0
                        },
                        "with_inventory": {
                          "type": "number",
                          "default": 0
                        },
                        "low_stock_count": {
                          "type": "number",
                          "default": 0
                        },
                        "out_of_stock_count": {
                          "type": "number",
                          "default": 0
                        },
                        "avg_capacity": {
                          "type": "number",
                          "default": 0
                        },
                        "avg_popularity": {
                          "type": "number",
                          "default": 0
                        },
                        "compliance_rate": {
                          "type": "number",
                          "default": 0
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "products",
                    "totalCount",
                    "totalPages",
                    "currentPage",
                    "summary"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "products-create",
        "summary": "Create new product",
        "description": "Create a new product with full validation including SKU uniqueness and parent product verification for variants.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "sku": {
                    "type": "string",
                    "minLength": 1
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "description": {
                    "type": "string"
                  },
                  "unit_of_measure": {
                    "type": "string",
                    "enum": [
                      "cylinder",
                      "kg"
                    ]
                  },
                  "capacity_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "tare_weight_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "gross_weight_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "valve_type": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "obsolete"
                    ],
                    "default": "active"
                  },
                  "barcode_uid": {
                    "type": "string"
                  },
                  "requires_tag": {
                    "type": "boolean",
                    "default": false
                  },
                  "variant_type": {
                    "type": "string",
                    "enum": [
                      "cylinder",
                      "refillable",
                      "disposable"
                    ],
                    "default": "cylinder"
                  },
                  "variant": {
                    "type": "string",
                    "enum": [
                      "outright",
                      "refill"
                    ],
                    "default": "outright"
                  },
                  "is_variant": {
                    "type": "boolean",
                    "default": false
                  },
                  "parent_products_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "sku_variant": {
                    "type": "string",
                    "enum": [
                      "EMPTY",
                      "FULL-XCH",
                      "FULL-OUT",
                      "DAMAGED"
                    ]
                  },
                  "tax_category": {
                    "type": "string"
                  },
                  "tax_rate": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1
                  }
                },
                "required": [
                  "sku",
                  "name",
                  "unit_of_measure"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "sku": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "unit_of_measure": {
                      "type": "string",
                      "enum": [
                        "cylinder",
                        "kg"
                      ]
                    },
                    "capacity_kg": {
                      "type": "number"
                    },
                    "tare_weight_kg": {
                      "type": "number"
                    },
                    "valve_type": {
                      "type": "string"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "active",
                        "obsolete"
                      ]
                    },
                    "barcode_uid": {
                      "type": "string"
                    },
                    "requires_tag": {
                      "type": "boolean"
                    },
                    "variant_type": {
                      "type": "string",
                      "enum": [
                        "cylinder",
                        "refillable",
                        "disposable"
                      ]
                    },
                    "variant": {
                      "type": "string",
                      "enum": [
                        "outright",
                        "refill"
                      ]
                    },
                    "parent_products_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "sku_variant": {
                      "type": "string",
                      "enum": [
                        "EMPTY",
                        "FULL-XCH",
                        "FULL-OUT",
                        "DAMAGED"
                      ],
                      "nullable": true
                    },
                    "is_variant": {
                      "type": "boolean"
                    },
                    "tax_category": {
                      "type": "string"
                    },
                    "tax_rate": {
                      "type": "number"
                    },
                    "created_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "sku",
                    "name",
                    "unit_of_measure",
                    "status",
                    "requires_tag",
                    "variant_type",
                    "parent_products_id",
                    "sku_variant",
                    "is_variant",
                    "created_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products/options": {
      "get": {
        "operationId": "products-getOptions",
        "summary": "Get product options for dropdowns",
        "description": "Retrieve simplified product data for use in dropdowns and selection components.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "active"
            }
          },
          {
            "name": "include_variants",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "sku": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "display_name": {
                        "type": "string"
                      },
                      "is_variant": {
                        "type": "boolean"
                      }
                    },
                    "required": [
                      "id",
                      "sku",
                      "name",
                      "display_name",
                      "is_variant"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products/stats": {
      "get": {
        "operationId": "products-getStats",
        "summary": "Get product statistics",
        "description": "Get basic statistics about products",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "total": {
                      "type": "number"
                    },
                    "active": {
                      "type": "number"
                    },
                    "obsolete": {
                      "type": "number"
                    },
                    "cylinders": {
                      "type": "number"
                    },
                    "kg_products": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "total",
                    "active",
                    "obsolete",
                    "cylinders",
                    "kg_products"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products/standard-cylinder-variants": {
      "get": {
        "operationId": "products-getStandardCylinderVariants",
        "summary": "Get standard cylinder variants",
        "description": "Get the standard cylinder variants (full/empty) used in the system.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "variants": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "name",
                          "description"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "variants"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products/{id}": {
      "get": {
        "operationId": "products-getById",
        "summary": "Get product by ID",
        "description": "Retrieve detailed information about a specific product by its ID.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "sku": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "unit_of_measure": {
                      "type": "string",
                      "enum": [
                        "cylinder",
                        "kg"
                      ]
                    },
                    "capacity_kg": {
                      "type": "number"
                    },
                    "tare_weight_kg": {
                      "type": "number"
                    },
                    "valve_type": {
                      "type": "string"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "active",
                        "obsolete"
                      ]
                    },
                    "barcode_uid": {
                      "type": "string"
                    },
                    "requires_tag": {
                      "type": "boolean"
                    },
                    "variant_type": {
                      "type": "string",
                      "enum": [
                        "cylinder",
                        "refillable",
                        "disposable"
                      ]
                    },
                    "variant": {
                      "type": "string",
                      "enum": [
                        "outright",
                        "refill"
                      ]
                    },
                    "parent_products_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "sku_variant": {
                      "type": "string",
                      "enum": [
                        "EMPTY",
                        "FULL-XCH",
                        "FULL-OUT",
                        "DAMAGED"
                      ],
                      "nullable": true
                    },
                    "is_variant": {
                      "type": "boolean"
                    },
                    "tax_category": {
                      "type": "string"
                    },
                    "tax_rate": {
                      "type": "number"
                    },
                    "created_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "sku",
                    "name",
                    "unit_of_measure",
                    "status",
                    "requires_tag",
                    "variant_type",
                    "parent_products_id",
                    "sku_variant",
                    "is_variant",
                    "created_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "put": {
        "operationId": "products-update",
        "summary": "Update product",
        "description": "Update an existing product with validation. SKU uniqueness is checked if SKU is being updated.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "sku": {
                    "type": "string",
                    "minLength": 1
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "description": {
                    "type": "string"
                  },
                  "unit_of_measure": {
                    "type": "string",
                    "enum": [
                      "cylinder",
                      "kg"
                    ]
                  },
                  "capacity_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "tare_weight_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "gross_weight_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "valve_type": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "obsolete"
                    ]
                  },
                  "barcode_uid": {
                    "type": "string"
                  },
                  "requires_tag": {
                    "type": "boolean"
                  },
                  "variant": {
                    "type": "string",
                    "enum": [
                      "outright",
                      "refill"
                    ]
                  },
                  "variant_type": {
                    "type": "string",
                    "enum": [
                      "cylinder",
                      "refillable",
                      "disposable"
                    ]
                  },
                  "is_variant": {
                    "type": "boolean"
                  },
                  "tax_category": {
                    "type": "string"
                  },
                  "tax_rate": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "sku": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "unit_of_measure": {
                      "type": "string",
                      "enum": [
                        "cylinder",
                        "kg"
                      ]
                    },
                    "capacity_kg": {
                      "type": "number"
                    },
                    "tare_weight_kg": {
                      "type": "number"
                    },
                    "valve_type": {
                      "type": "string"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "active",
                        "obsolete"
                      ]
                    },
                    "barcode_uid": {
                      "type": "string"
                    },
                    "requires_tag": {
                      "type": "boolean"
                    },
                    "variant_type": {
                      "type": "string",
                      "enum": [
                        "cylinder",
                        "refillable",
                        "disposable"
                      ]
                    },
                    "variant": {
                      "type": "string",
                      "enum": [
                        "outright",
                        "refill"
                      ]
                    },
                    "parent_products_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "sku_variant": {
                      "type": "string",
                      "enum": [
                        "EMPTY",
                        "FULL-XCH",
                        "FULL-OUT",
                        "DAMAGED"
                      ],
                      "nullable": true
                    },
                    "is_variant": {
                      "type": "boolean"
                    },
                    "tax_category": {
                      "type": "string"
                    },
                    "tax_rate": {
                      "type": "number"
                    },
                    "created_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "sku",
                    "name",
                    "unit_of_measure",
                    "status",
                    "requires_tag",
                    "variant_type",
                    "parent_products_id",
                    "sku_variant",
                    "is_variant",
                    "created_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "delete": {
        "operationId": "products-delete",
        "summary": "Delete product (soft delete)",
        "description": "Soft delete a product by setting its status to obsolete. Validates that product has no existing inventory.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "product": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "sku": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "sku",
                        "name",
                        "status"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "success",
                    "product"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products/bulk-update-status": {
      "post": {
        "operationId": "products-bulkUpdateStatus",
        "summary": "Bulk update product status",
        "description": "Update the status of multiple products individually with detailed success/error tracking.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "product_ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "minItems": 1
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "obsolete"
                    ]
                  }
                },
                "required": [
                  "product_ids",
                  "status"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "updated_count": {
                      "type": "number"
                    },
                    "total_requested": {
                      "type": "number"
                    },
                    "products": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sku": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string"
                          },
                          "unit_of_measure": {
                            "type": "string",
                            "enum": [
                              "cylinder",
                              "kg"
                            ]
                          },
                          "capacity_kg": {
                            "type": "number"
                          },
                          "tare_weight_kg": {
                            "type": "number"
                          },
                          "valve_type": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "active",
                              "obsolete"
                            ]
                          },
                          "barcode_uid": {
                            "type": "string"
                          },
                          "requires_tag": {
                            "type": "boolean"
                          },
                          "variant_type": {
                            "type": "string",
                            "enum": [
                              "cylinder",
                              "refillable",
                              "disposable"
                            ]
                          },
                          "variant": {
                            "type": "string",
                            "enum": [
                              "outright",
                              "refill"
                            ]
                          },
                          "parent_products_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "sku_variant": {
                            "type": "string",
                            "enum": [
                              "EMPTY",
                              "FULL-XCH",
                              "FULL-OUT",
                              "DAMAGED"
                            ],
                            "nullable": true
                          },
                          "is_variant": {
                            "type": "boolean"
                          },
                          "tax_category": {
                            "type": "string"
                          },
                          "tax_rate": {
                            "type": "number"
                          },
                          "created_at": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "sku",
                          "name",
                          "unit_of_measure",
                          "status",
                          "requires_tag",
                          "variant_type",
                          "parent_products_id",
                          "sku_variant",
                          "is_variant",
                          "created_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string"
                          },
                          "error": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "product_id",
                          "error"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "partial_success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success",
                    "updated_count",
                    "total_requested",
                    "products"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products/reactivate": {
      "post": {
        "operationId": "products-reactivate",
        "summary": "Reactivate obsolete product",
        "description": "Reactivate a previously obsoleted product by setting its status to active.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "uuid"
                  }
                },
                "required": [
                  "id"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "sku": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "status": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "sku",
                    "name",
                    "status"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products/validate": {
      "post": {
        "operationId": "products-validate",
        "summary": "Validate product data",
        "description": "Validate product data including SKU uniqueness and name similarity checks.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "sku": {
                    "type": "string",
                    "minLength": 1
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "exclude_id": {
                    "type": "string",
                    "format": "uuid"
                  }
                },
                "required": [
                  "sku",
                  "name"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "valid": {
                      "type": "boolean"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "valid",
                    "errors",
                    "warnings"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products/validate-weight": {
      "post": {
        "operationId": "products-validateWeight",
        "summary": "Validate weight constraints",
        "description": "Validate cylinder capacity and tare weight constraints with business rule validation.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "capacity_kg": {
                    "type": "number"
                  },
                  "tare_weight_kg": {
                    "type": "number"
                  },
                  "unit_of_measure": {
                    "type": "string",
                    "enum": [
                      "cylinder",
                      "kg"
                    ]
                  }
                },
                "required": [
                  "unit_of_measure"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "valid": {
                      "type": "boolean"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "valid",
                    "errors",
                    "warnings"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products/calculate-inventory-movements": {
      "post": {
        "operationId": "products-calculateInventoryMovements",
        "summary": "Calculate inventory movements for orders",
        "description": "Calculate inventory movements based on order type and line items for delivery, refill, exchange, and pickup orders.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "order": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "format": "uuid"
                      },
                      "order_type": {
                        "type": "string",
                        "enum": [
                          "delivery",
                          "refill",
                          "exchange",
                          "pickup"
                        ]
                      },
                      "exchange_empty_qty": {
                        "type": "number",
                        "minimum": 0,
                        "default": 0
                      },
                      "order_lines": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "product_id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "quantity": {
                              "type": "number",
                              "minimum": 1
                            },
                            "product": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "name": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "id",
                                "name"
                              ],
                              "additionalProperties": false
                            }
                          },
                          "required": [
                            "id",
                            "product_id",
                            "quantity",
                            "product"
                          ],
                          "additionalProperties": false
                        }
                      }
                    },
                    "required": [
                      "id",
                      "order_type",
                      "order_lines"
                    ],
                    "additionalProperties": false
                  }
                },
                "required": [
                  "order"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "movements": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string"
                          },
                          "sku_variant": {
                            "type": "string",
                            "enum": [
                              "EMPTY",
                              "FULL-XCH",
                              "FULL-OUT",
                              "DAMAGED"
                            ]
                          },
                          "qty_full_change": {
                            "type": "number"
                          },
                          "qty_empty_change": {
                            "type": "number"
                          },
                          "movement_type": {
                            "type": "string",
                            "enum": [
                              "delivery",
                              "pickup",
                              "exchange"
                            ]
                          },
                          "description": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "product_id",
                          "sku_variant",
                          "qty_full_change",
                          "qty_empty_change",
                          "movement_type",
                          "description"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "movements"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products/calculate-exchange-quantity": {
      "post": {
        "operationId": "products-calculateExchangeQuantity",
        "summary": "Calculate exchange quantity for order types",
        "description": "Calculate the appropriate exchange quantity based on order type (refill/exchange).",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "order": {
                    "type": "object",
                    "properties": {
                      "order_type": {
                        "type": "string",
                        "enum": [
                          "delivery",
                          "refill",
                          "exchange",
                          "pickup"
                        ]
                      },
                      "exchange_empty_qty": {
                        "type": "number",
                        "minimum": 0,
                        "default": 0
                      }
                    },
                    "required": [
                      "order_type"
                    ],
                    "additionalProperties": false
                  }
                },
                "required": [
                  "order"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "exchange_quantity": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "exchange_quantity"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products/grouped": {
      "get": {
        "operationId": "products-getGroupedProducts",
        "summary": "Get hierarchical product structure",
        "description": "Retrieve products grouped by parent-child relationships with their variants.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "obsolete"
              ]
            }
          },
          {
            "name": "unit_of_measure",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "cylinder",
                "kg"
              ]
            }
          },
          {
            "name": "variant_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "cylinder",
                "refillable",
                "disposable"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "created_at",
                "name",
                "sku"
              ],
              "default": "created_at"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            }
          },
          {
            "name": "show_obsolete",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "products": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "parent": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "description": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string",
                                "enum": [
                                  "cylinder",
                                  "kg"
                                ]
                              },
                              "capacity_kg": {
                                "type": "number"
                              },
                              "tare_weight_kg": {
                                "type": "number"
                              },
                              "valve_type": {
                                "type": "string"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "active",
                                  "obsolete"
                                ]
                              },
                              "barcode_uid": {
                                "type": "string"
                              },
                              "requires_tag": {
                                "type": "boolean"
                              },
                              "variant_type": {
                                "type": "string",
                                "enum": [
                                  "cylinder",
                                  "refillable",
                                  "disposable"
                                ]
                              },
                              "variant": {
                                "type": "string",
                                "enum": [
                                  "outright",
                                  "refill"
                                ]
                              },
                              "tax_category": {
                                "type": "string"
                              },
                              "tax_rate": {
                                "type": "number"
                              },
                              "created_at": {
                                "type": "string"
                              },
                              "variant_count": {
                                "type": "number"
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure",
                              "status",
                              "requires_tag",
                              "variant_type",
                              "created_at"
                            ],
                            "additionalProperties": false
                          },
                          "variants": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "sku": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "description": {
                                  "type": "string"
                                },
                                "unit_of_measure": {
                                  "type": "string",
                                  "enum": [
                                    "cylinder",
                                    "kg"
                                  ]
                                },
                                "capacity_kg": {
                                  "type": "number"
                                },
                                "tare_weight_kg": {
                                  "type": "number"
                                },
                                "valve_type": {
                                  "type": "string"
                                },
                                "status": {
                                  "type": "string",
                                  "enum": [
                                    "active",
                                    "obsolete"
                                  ]
                                },
                                "barcode_uid": {
                                  "type": "string"
                                },
                                "requires_tag": {
                                  "type": "boolean"
                                },
                                "variant_type": {
                                  "type": "string",
                                  "enum": [
                                    "cylinder",
                                    "refillable",
                                    "disposable"
                                  ]
                                },
                                "variant": {
                                  "type": "string",
                                  "enum": [
                                    "outright",
                                    "refill"
                                  ]
                                },
                                "parent_products_id": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "sku_variant": {
                                  "type": "string",
                                  "enum": [
                                    "EMPTY",
                                    "FULL-XCH",
                                    "FULL-OUT",
                                    "DAMAGED"
                                  ],
                                  "nullable": true
                                },
                                "is_variant": {
                                  "type": "boolean"
                                },
                                "tax_category": {
                                  "type": "string"
                                },
                                "tax_rate": {
                                  "type": "number"
                                },
                                "created_at": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "id",
                                "sku",
                                "name",
                                "unit_of_measure",
                                "status",
                                "requires_tag",
                                "variant_type",
                                "parent_products_id",
                                "sku_variant",
                                "is_variant",
                                "created_at"
                              ],
                              "additionalProperties": false
                            }
                          }
                        },
                        "required": [
                          "parent",
                          "variants"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_parent_products": {
                          "type": "number"
                        },
                        "total_variants": {
                          "type": "number"
                        },
                        "active_parent_products": {
                          "type": "number"
                        },
                        "obsolete_parent_products": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "total_parent_products",
                        "total_variants",
                        "active_parent_products",
                        "obsolete_parent_products"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "products",
                    "totalCount",
                    "totalPages",
                    "currentPage",
                    "summary"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products/parent": {
      "post": {
        "operationId": "products-createParentProduct",
        "summary": "Create parent product",
        "description": "Create a new parent product that can have variants.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "sku": {
                    "type": "string",
                    "minLength": 1
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "description": {
                    "type": "string"
                  },
                  "unit_of_measure": {
                    "type": "string",
                    "enum": [
                      "cylinder",
                      "kg"
                    ]
                  },
                  "capacity_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "tare_weight_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "gross_weight_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "valve_type": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "obsolete"
                    ],
                    "default": "active"
                  },
                  "barcode_uid": {
                    "type": "string"
                  },
                  "requires_tag": {
                    "type": "boolean",
                    "default": false
                  },
                  "variant_type": {
                    "type": "string",
                    "enum": [
                      "cylinder",
                      "refillable",
                      "disposable"
                    ],
                    "default": "cylinder"
                  },
                  "variant": {
                    "type": "string",
                    "enum": [
                      "outright",
                      "refill"
                    ],
                    "default": "outright"
                  },
                  "tax_category": {
                    "type": "string"
                  },
                  "tax_rate": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1
                  }
                },
                "required": [
                  "sku",
                  "name",
                  "unit_of_measure"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "sku": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "unit_of_measure": {
                      "type": "string",
                      "enum": [
                        "cylinder",
                        "kg"
                      ]
                    },
                    "capacity_kg": {
                      "type": "number"
                    },
                    "tare_weight_kg": {
                      "type": "number"
                    },
                    "valve_type": {
                      "type": "string"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "active",
                        "obsolete"
                      ]
                    },
                    "barcode_uid": {
                      "type": "string"
                    },
                    "requires_tag": {
                      "type": "boolean"
                    },
                    "variant_type": {
                      "type": "string",
                      "enum": [
                        "cylinder",
                        "refillable",
                        "disposable"
                      ]
                    },
                    "variant": {
                      "type": "string",
                      "enum": [
                        "outright",
                        "refill"
                      ]
                    },
                    "tax_category": {
                      "type": "string"
                    },
                    "tax_rate": {
                      "type": "number"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "variant_count": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "id",
                    "sku",
                    "name",
                    "unit_of_measure",
                    "status",
                    "requires_tag",
                    "variant_type",
                    "created_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "get": {
        "operationId": "products-listParentProducts",
        "summary": "List parent products with variant counts",
        "description": "Get a list of parent products with their variant counts.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "obsolete"
              ]
            }
          },
          {
            "name": "unit_of_measure",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "cylinder",
                "kg"
              ]
            }
          },
          {
            "name": "variant_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "cylinder",
                "refillable",
                "disposable"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "created_at",
                "name",
                "sku"
              ],
              "default": "created_at"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            }
          },
          {
            "name": "show_obsolete",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          },
          {
            "name": "include_variant_counts",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "products": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sku": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string"
                          },
                          "unit_of_measure": {
                            "type": "string",
                            "enum": [
                              "cylinder",
                              "kg"
                            ]
                          },
                          "capacity_kg": {
                            "type": "number"
                          },
                          "tare_weight_kg": {
                            "type": "number"
                          },
                          "valve_type": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "active",
                              "obsolete"
                            ]
                          },
                          "barcode_uid": {
                            "type": "string"
                          },
                          "requires_tag": {
                            "type": "boolean"
                          },
                          "variant_type": {
                            "type": "string",
                            "enum": [
                              "cylinder",
                              "refillable",
                              "disposable"
                            ]
                          },
                          "variant": {
                            "type": "string",
                            "enum": [
                              "outright",
                              "refill"
                            ]
                          },
                          "tax_category": {
                            "type": "string"
                          },
                          "tax_rate": {
                            "type": "number"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "variant_count": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "id",
                          "sku",
                          "name",
                          "unit_of_measure",
                          "status",
                          "requires_tag",
                          "variant_type",
                          "created_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_parent_products": {
                          "type": "number"
                        },
                        "active_parent_products": {
                          "type": "number"
                        },
                        "obsolete_parent_products": {
                          "type": "number"
                        },
                        "total_variants": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "total_parent_products",
                        "active_parent_products",
                        "obsolete_parent_products",
                        "total_variants"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "products",
                    "totalCount",
                    "totalPages",
                    "currentPage",
                    "summary"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/products/sku-variants": {
      "get": {
        "operationId": "products-getSkuVariants",
        "summary": "Get available SKU variant types",
        "description": "Get the available SKU variant types for product variants.",
        "tags": [
          "products"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "variants": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "value": {
                            "type": "string",
                            "enum": [
                              "EMPTY",
                              "FULL-XCH",
                              "FULL-OUT",
                              "DAMAGED"
                            ]
                          },
                          "label": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "value",
                          "label",
                          "description"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "variants"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers": {
      "get": {
        "operationId": "transfers-list",
        "summary": "List transfers with filtering and pagination",
        "description": "Retrieve a paginated list of transfers with filtering options including source/destination warehouses, status, dates, and search text.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "source_warehouse_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "destination_warehouse_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "not": {}
                },
                {
                  "type": "string"
                }
              ]
            }
          },
          {
            "name": "transfer_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "internal",
                "external",
                "adjustment",
                "return"
              ]
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "created_by_user_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "search_text",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "created_at",
                "transfer_date",
                "total_items",
                "total_weight_kg"
              ],
              "default": "created_at"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "transfers": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "source_warehouse_id": {
                            "type": "string"
                          },
                          "destination_warehouse_id": {
                            "type": "string"
                          },
                          "transfer_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "scheduled_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "status": {
                            "type": "string"
                          },
                          "transfer_type": {
                            "type": "string"
                          },
                          "priority": {
                            "type": "string"
                          },
                          "transfer_reference": {
                            "type": "string",
                            "nullable": true
                          },
                          "reason": {
                            "type": "string",
                            "nullable": true
                          },
                          "notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "instructions": {
                            "type": "string",
                            "nullable": true
                          },
                          "total_items": {
                            "type": "number"
                          },
                          "total_quantity": {
                            "type": "number"
                          },
                          "total_weight_kg": {
                            "type": "number",
                            "nullable": true
                          },
                          "total_cost": {
                            "type": "number",
                            "nullable": true
                          },
                          "qty_tagged": {
                            "type": "number"
                          },
                          "qty_untagged": {
                            "type": "number"
                          },
                          "variance_flag": {
                            "type": "boolean"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "completed_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "processed_by_user_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "approved_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "approved_by_user_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "source_warehouse": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ],
                            "additionalProperties": false
                          },
                          "destination_warehouse": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name"
                            ],
                            "additionalProperties": false
                          },
                          "items": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "product_id": {
                                  "type": "string"
                                },
                                "quantity_full": {
                                  "type": "number"
                                },
                                "quantity_empty": {
                                  "type": "number"
                                },
                                "product": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string"
                                    },
                                    "sku": {
                                      "type": "string"
                                    },
                                    "name": {
                                      "type": "string"
                                    },
                                    "unit_of_measure": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "sku",
                                    "name",
                                    "unit_of_measure"
                                  ],
                                  "additionalProperties": false
                                }
                              },
                              "required": [
                                "id",
                                "product_id",
                                "quantity_full",
                                "quantity_empty"
                              ],
                              "additionalProperties": false
                            }
                          }
                        },
                        "required": [
                          "id",
                          "source_warehouse_id",
                          "destination_warehouse_id",
                          "transfer_date",
                          "status",
                          "transfer_type",
                          "qty_tagged",
                          "qty_untagged",
                          "variance_flag",
                          "created_at",
                          "updated_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "transfers",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "transfers-create",
        "summary": "Create new transfer",
        "description": "Create a new inventory transfer between warehouses with validation and automatic reference generation.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "source_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "destination_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "transfer_date": {
                    "type": "string",
                    "default": "2025-07-15"
                  },
                  "scheduled_date": {
                    "type": "string"
                  },
                  "priority": {
                    "type": "string",
                    "enum": [
                      "low",
                      "normal",
                      "high",
                      "urgent"
                    ],
                    "default": "normal"
                  },
                  "transfer_reference": {
                    "type": "string"
                  },
                  "reason": {
                    "type": "string"
                  },
                  "notes": {
                    "type": "string"
                  },
                  "instructions": {
                    "type": "string"
                  },
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "product_sku": {
                          "type": "string"
                        },
                        "product_name": {
                          "type": "string"
                        },
                        "variant_name": {
                          "type": "string"
                        },
                        "variant_type": {
                          "type": "string",
                          "enum": [
                            "cylinder",
                            "refillable",
                            "disposable"
                          ]
                        },
                        "quantity_to_transfer": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "available_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "reserved_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_weight_kg": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_cost": {
                          "type": "number",
                          "minimum": 0
                        },
                        "source_location": {
                          "type": "string"
                        },
                        "batch_number": {
                          "type": "string"
                        },
                        "expiry_date": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity_to_transfer"
                      ],
                      "additionalProperties": false
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "source_warehouse_id",
                  "destination_warehouse_id",
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "source_warehouse_id": {
                      "type": "string"
                    },
                    "destination_warehouse_id": {
                      "type": "string"
                    },
                    "transfer_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "scheduled_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "status": {
                      "type": "string"
                    },
                    "transfer_type": {
                      "type": "string"
                    },
                    "priority": {
                      "type": "string"
                    },
                    "transfer_reference": {
                      "type": "string",
                      "nullable": true
                    },
                    "reason": {
                      "type": "string",
                      "nullable": true
                    },
                    "notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "instructions": {
                      "type": "string",
                      "nullable": true
                    },
                    "total_items": {
                      "type": "number"
                    },
                    "total_quantity": {
                      "type": "number"
                    },
                    "total_weight_kg": {
                      "type": "number",
                      "nullable": true
                    },
                    "total_cost": {
                      "type": "number",
                      "nullable": true
                    },
                    "qty_tagged": {
                      "type": "number"
                    },
                    "qty_untagged": {
                      "type": "number"
                    },
                    "variance_flag": {
                      "type": "boolean"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "completed_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "processed_by_user_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "approved_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "approved_by_user_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "source_warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "name"
                      ],
                      "additionalProperties": false
                    },
                    "destination_warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "name"
                      ],
                      "additionalProperties": false
                    },
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "quantity_full": {
                            "type": "number"
                          },
                          "quantity_empty": {
                            "type": "number"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "product_id",
                          "quantity_full",
                          "quantity_empty"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "id",
                    "source_warehouse_id",
                    "destination_warehouse_id",
                    "transfer_date",
                    "status",
                    "transfer_type",
                    "qty_tagged",
                    "qty_untagged",
                    "variance_flag",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers/{id}": {
      "get": {
        "operationId": "transfers-getById",
        "summary": "Get transfer by ID",
        "description": "Retrieve detailed information about a specific transfer including all items and warehouse details.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "source_warehouse_id": {
                      "type": "string"
                    },
                    "destination_warehouse_id": {
                      "type": "string"
                    },
                    "transfer_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "scheduled_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "status": {
                      "type": "string"
                    },
                    "transfer_type": {
                      "type": "string"
                    },
                    "priority": {
                      "type": "string"
                    },
                    "transfer_reference": {
                      "type": "string",
                      "nullable": true
                    },
                    "reason": {
                      "type": "string",
                      "nullable": true
                    },
                    "notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "instructions": {
                      "type": "string",
                      "nullable": true
                    },
                    "total_items": {
                      "type": "number"
                    },
                    "total_quantity": {
                      "type": "number"
                    },
                    "total_weight_kg": {
                      "type": "number",
                      "nullable": true
                    },
                    "total_cost": {
                      "type": "number",
                      "nullable": true
                    },
                    "qty_tagged": {
                      "type": "number"
                    },
                    "qty_untagged": {
                      "type": "number"
                    },
                    "variance_flag": {
                      "type": "boolean"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "completed_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "processed_by_user_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "approved_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "approved_by_user_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "source_warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "name"
                      ],
                      "additionalProperties": false
                    },
                    "destination_warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "name"
                      ],
                      "additionalProperties": false
                    },
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "quantity_full": {
                            "type": "number"
                          },
                          "quantity_empty": {
                            "type": "number"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string"
                              },
                              "capacity_kg": {
                                "type": "number",
                                "nullable": true
                              },
                              "tare_weight_kg": {
                                "type": "number",
                                "nullable": true
                              },
                              "is_variant": {
                                "type": "boolean"
                              },
                              "variant_name": {
                                "type": "string",
                                "nullable": true
                              },
                              "variant_type": {
                                "type": "string",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure",
                              "capacity_kg",
                              "tare_weight_kg",
                              "is_variant",
                              "variant_name",
                              "variant_type"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "product_id",
                          "quantity_full",
                          "quantity_empty"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "id",
                    "source_warehouse_id",
                    "destination_warehouse_id",
                    "transfer_date",
                    "status",
                    "transfer_type",
                    "qty_tagged",
                    "qty_untagged",
                    "variance_flag",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers/validate": {
      "post": {
        "operationId": "transfers-validate",
        "summary": "Validate transfer request",
        "description": "Validate a transfer request including inventory availability, warehouse capacity, and business rules. Uses atomic validation for single items and enhanced validation for multi-item transfers.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "source_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "destination_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "transfer_date": {
                    "type": "string"
                  },
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "product_sku": {
                          "type": "string"
                        },
                        "product_name": {
                          "type": "string"
                        },
                        "variant_name": {
                          "type": "string"
                        },
                        "variant_type": {
                          "type": "string",
                          "enum": [
                            "cylinder",
                            "refillable",
                            "disposable"
                          ]
                        },
                        "quantity_to_transfer": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "available_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "reserved_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_weight_kg": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_cost": {
                          "type": "number",
                          "minimum": 0
                        },
                        "source_location": {
                          "type": "string"
                        },
                        "batch_number": {
                          "type": "string"
                        },
                        "expiry_date": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity_to_transfer"
                      ],
                      "additionalProperties": false
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "source_warehouse_id",
                  "destination_warehouse_id",
                  "transfer_date",
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "is_valid": {
                      "type": "boolean"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "blocked_items": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "total_weight_kg": {
                      "type": "number"
                    },
                    "estimated_cost": {
                      "type": "number"
                    },
                    "source_stock": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string"
                        },
                        "available_qty": {
                          "type": "number"
                        },
                        "reserved_qty": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "product_id",
                        "available_qty",
                        "reserved_qty"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "is_valid",
                    "errors",
                    "warnings",
                    "blocked_items",
                    "total_weight_kg"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers/{transfer_id}/status": {
      "post": {
        "operationId": "transfers-updateStatus",
        "summary": "Update transfer status",
        "description": "Update the status of a transfer with validation and automatic inventory updates upon completion.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "new_status": {
                    "type": "string",
                    "enum": [
                      "draft",
                      "pending",
                      "approved",
                      "in_transit",
                      "completed",
                      "cancelled"
                    ]
                  },
                  "notes": {
                    "type": "string"
                  },
                  "completed_items": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    }
                  }
                },
                "required": [
                  "new_status"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "transfer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "source_warehouse_id": {
                      "type": "string"
                    },
                    "destination_warehouse_id": {
                      "type": "string"
                    },
                    "transfer_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "scheduled_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "status": {
                      "type": "string"
                    },
                    "transfer_type": {
                      "type": "string"
                    },
                    "priority": {
                      "type": "string"
                    },
                    "transfer_reference": {
                      "type": "string",
                      "nullable": true
                    },
                    "reason": {
                      "type": "string",
                      "nullable": true
                    },
                    "notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "instructions": {
                      "type": "string",
                      "nullable": true
                    },
                    "total_items": {
                      "type": "number"
                    },
                    "total_quantity": {
                      "type": "number"
                    },
                    "total_weight_kg": {
                      "type": "number",
                      "nullable": true
                    },
                    "total_cost": {
                      "type": "number",
                      "nullable": true
                    },
                    "qty_tagged": {
                      "type": "number"
                    },
                    "qty_untagged": {
                      "type": "number"
                    },
                    "variance_flag": {
                      "type": "boolean"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "completed_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "processed_by_user_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "approved_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "approved_by_user_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "source_warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "name"
                      ],
                      "additionalProperties": false
                    },
                    "destination_warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "name"
                      ],
                      "additionalProperties": false
                    },
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "quantity_full": {
                            "type": "number"
                          },
                          "quantity_empty": {
                            "type": "number"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "product_id",
                          "quantity_full",
                          "quantity_empty"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "id",
                    "source_warehouse_id",
                    "destination_warehouse_id",
                    "transfer_date",
                    "status",
                    "transfer_type",
                    "qty_tagged",
                    "qty_untagged",
                    "variance_flag",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers/warehouse-stock": {
      "get": {
        "operationId": "transfers-getWarehouseStock",
        "summary": "Get warehouse stock for transfer planning",
        "description": "Retrieve warehouse stock information filtered by product types and availability for transfer planning purposes.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "warehouse_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "search_text",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "variant_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "cylinder",
                "refillable",
                "disposable"
              ]
            }
          },
          {
            "name": "variant_name",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "has_stock",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "warehouse_id": {
                        "type": "string"
                      },
                      "warehouse_name": {
                        "type": "string"
                      },
                      "product_id": {
                        "type": "string"
                      },
                      "product_sku": {
                        "type": "string"
                      },
                      "product_name": {
                        "type": "string"
                      },
                      "variant_name": {
                        "type": "string",
                        "nullable": true
                      },
                      "qty_available": {
                        "type": "number"
                      },
                      "qty_reserved": {
                        "type": "number"
                      },
                      "qty_on_order": {
                        "type": "number"
                      },
                      "qty_full": {
                        "type": "number"
                      },
                      "qty_empty": {
                        "type": "number"
                      },
                      "locations": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "last_updated": {
                        "type": "string"
                      },
                      "reorder_level": {
                        "type": "number"
                      },
                      "max_capacity": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "warehouse_id",
                      "warehouse_name",
                      "product_id",
                      "product_sku",
                      "product_name",
                      "variant_name",
                      "qty_available",
                      "qty_reserved",
                      "qty_on_order",
                      "qty_full",
                      "qty_empty",
                      "locations",
                      "last_updated",
                      "reorder_level",
                      "max_capacity"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers/{transfer_id}/cost-analysis": {
      "get": {
        "operationId": "transfers-getCostAnalysis",
        "summary": "Get transfer cost analysis",
        "description": "Calculate comprehensive cost analysis for a transfer including handling, transport costs, and efficiency metrics.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "transfer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "transfer_id": {
                      "type": "string"
                    },
                    "total_weight_kg": {
                      "type": "number"
                    },
                    "total_volume_m3": {
                      "type": "number"
                    },
                    "estimated_costs": {
                      "type": "object",
                      "properties": {
                        "handling_cost": {
                          "type": "number"
                        },
                        "transport_cost": {
                          "type": "number"
                        },
                        "total_cost": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "handling_cost",
                        "transport_cost",
                        "total_cost"
                      ],
                      "additionalProperties": false
                    },
                    "efficiency_metrics": {
                      "type": "object",
                      "properties": {
                        "cost_per_kg": {
                          "type": "number"
                        },
                        "cost_per_item": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "cost_per_kg",
                        "cost_per_item"
                      ],
                      "additionalProperties": false
                    },
                    "estimated_duration": {
                      "type": "object",
                      "properties": {
                        "preparation_hours": {
                          "type": "number"
                        },
                        "transport_hours": {
                          "type": "number"
                        },
                        "total_hours": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "preparation_hours",
                        "transport_hours",
                        "total_hours"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "transfer_id",
                    "total_weight_kg",
                    "total_volume_m3",
                    "estimated_costs",
                    "efficiency_metrics",
                    "estimated_duration"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers/search-products": {
      "get": {
        "operationId": "transfers-searchProducts",
        "summary": "Search products for transfer",
        "description": "Search and filter products available for transfer by variant type, warehouse, and text search.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "warehouse_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "search_text",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "variant_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "cylinder",
                "refillable",
                "disposable"
              ]
            }
          },
          {
            "name": "variant_name",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "sku": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string"
                      },
                      "variant_name": {
                        "type": "string",
                        "nullable": true
                      },
                      "variant_type": {
                        "type": "string",
                        "nullable": true
                      },
                      "capacity_kg": {
                        "type": "number",
                        "nullable": true
                      },
                      "tare_weight_kg": {
                        "type": "number",
                        "nullable": true
                      },
                      "is_variant": {
                        "type": "boolean"
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "id",
                      "sku",
                      "name",
                      "status",
                      "variant_name",
                      "variant_type",
                      "capacity_kg",
                      "tare_weight_kg",
                      "is_variant",
                      "created_at",
                      "updated_at"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers/validate-multi-sku": {
      "post": {
        "operationId": "transfers-validateMultiSkuTransfer",
        "summary": "Validate multi-SKU transfer",
        "description": "Perform comprehensive validation for multi-SKU transfers with enhanced business logic and conflict detection.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "source_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "destination_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "transfer_date": {
                    "type": "string"
                  },
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "product_sku": {
                          "type": "string"
                        },
                        "product_name": {
                          "type": "string"
                        },
                        "variant_name": {
                          "type": "string"
                        },
                        "variant_type": {
                          "type": "string",
                          "enum": [
                            "cylinder",
                            "refillable",
                            "disposable"
                          ]
                        },
                        "quantity_to_transfer": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "available_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "reserved_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_weight_kg": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_cost": {
                          "type": "number",
                          "minimum": 0
                        },
                        "source_location": {
                          "type": "string"
                        },
                        "batch_number": {
                          "type": "string"
                        },
                        "expiry_date": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity_to_transfer"
                      ],
                      "additionalProperties": false
                    },
                    "minItems": 1
                  },
                  "notes": {
                    "type": "string"
                  },
                  "reason": {
                    "type": "string"
                  },
                  "priority": {
                    "type": "string",
                    "enum": [
                      "low",
                      "normal",
                      "high",
                      "urgent"
                    ],
                    "default": "normal"
                  }
                },
                "required": [
                  "source_warehouse_id",
                  "destination_warehouse_id",
                  "transfer_date",
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "is_valid": {
                      "type": "boolean"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "blocked_items": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "total_weight_kg": {
                      "type": "number"
                    },
                    "estimated_cost": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "is_valid",
                    "errors",
                    "warnings",
                    "blocked_items",
                    "total_weight_kg"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers/calculate-details": {
      "post": {
        "operationId": "transfers-calculateTransferDetails",
        "summary": "Calculate transfer item details",
        "description": "Calculate detailed information for transfer items including weights, costs, and validation status.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "product_sku": {
                          "type": "string"
                        },
                        "product_name": {
                          "type": "string"
                        },
                        "variant_name": {
                          "type": "string"
                        },
                        "variant_type": {
                          "type": "string",
                          "enum": [
                            "cylinder",
                            "refillable",
                            "disposable"
                          ]
                        },
                        "quantity_to_transfer": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "available_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "reserved_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_weight_kg": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_cost": {
                          "type": "number",
                          "minimum": 0
                        },
                        "source_location": {
                          "type": "string"
                        },
                        "batch_number": {
                          "type": "string"
                        },
                        "expiry_date": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity_to_transfer"
                      ],
                      "additionalProperties": false
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string"
                          },
                          "product_sku": {
                            "type": "string"
                          },
                          "product_name": {
                            "type": "string"
                          },
                          "variant_name": {
                            "type": "string"
                          },
                          "variant_type": {
                            "type": "string"
                          },
                          "quantity_to_transfer": {
                            "type": "number"
                          },
                          "available_stock": {
                            "type": "number"
                          },
                          "reserved_stock": {
                            "type": "number"
                          },
                          "unit_weight_kg": {
                            "type": "number"
                          },
                          "total_weight_kg": {
                            "type": "number"
                          },
                          "unit_cost": {
                            "type": "number"
                          },
                          "total_cost": {
                            "type": "number"
                          },
                          "source_location": {
                            "type": "string"
                          },
                          "batch_number": {
                            "type": "string"
                          },
                          "expiry_date": {
                            "type": "string"
                          },
                          "is_valid": {
                            "type": "boolean"
                          },
                          "validation_errors": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "validation_warnings": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          }
                        },
                        "required": [
                          "product_id",
                          "product_sku",
                          "product_name",
                          "quantity_to_transfer",
                          "is_valid",
                          "validation_errors",
                          "validation_warnings"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_products": {
                          "type": "number"
                        },
                        "total_quantity": {
                          "type": "number"
                        },
                        "total_weight_kg": {
                          "type": "number"
                        },
                        "total_cost": {
                          "type": "number"
                        },
                        "unique_variants": {
                          "type": "number"
                        },
                        "validation_summary": {
                          "type": "object",
                          "properties": {
                            "valid_items": {
                              "type": "number"
                            },
                            "invalid_items": {
                              "type": "number"
                            },
                            "items_with_warnings": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "valid_items",
                            "invalid_items",
                            "items_with_warnings"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "total_products",
                        "total_quantity",
                        "total_weight_kg",
                        "unique_variants",
                        "validation_summary"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "items",
                    "summary"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers/validate-capacity": {
      "post": {
        "operationId": "transfers-validateTransferCapacity",
        "summary": "Validate warehouse capacity",
        "description": "Validate if the destination warehouse has sufficient capacity for the proposed transfer.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "product_sku": {
                          "type": "string"
                        },
                        "product_name": {
                          "type": "string"
                        },
                        "variant_name": {
                          "type": "string"
                        },
                        "variant_type": {
                          "type": "string",
                          "enum": [
                            "cylinder",
                            "refillable",
                            "disposable"
                          ]
                        },
                        "quantity_to_transfer": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "available_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "reserved_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_weight_kg": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_cost": {
                          "type": "number",
                          "minimum": 0
                        },
                        "source_location": {
                          "type": "string"
                        },
                        "batch_number": {
                          "type": "string"
                        },
                        "expiry_date": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity_to_transfer"
                      ],
                      "additionalProperties": false
                    },
                    "minItems": 1
                  },
                  "warehouse_capacity_kg": {
                    "type": "number"
                  }
                },
                "required": [
                  "warehouse_id",
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "can_accommodate": {
                      "type": "boolean"
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "can_accommodate",
                    "warnings"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers/validate-inventory": {
      "post": {
        "operationId": "transfers-validateInventoryAvailability",
        "summary": "Validate inventory availability",
        "description": "Validate if sufficient inventory is available at the source warehouse for the transfer.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "product_sku": {
                          "type": "string"
                        },
                        "product_name": {
                          "type": "string"
                        },
                        "variant_name": {
                          "type": "string"
                        },
                        "variant_type": {
                          "type": "string",
                          "enum": [
                            "cylinder",
                            "refillable",
                            "disposable"
                          ]
                        },
                        "quantity_to_transfer": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "available_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "reserved_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_weight_kg": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_cost": {
                          "type": "number",
                          "minimum": 0
                        },
                        "source_location": {
                          "type": "string"
                        },
                        "batch_number": {
                          "type": "string"
                        },
                        "expiry_date": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity_to_transfer"
                      ],
                      "additionalProperties": false
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "warehouse_id",
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "is_available": {
                      "type": "boolean"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "is_available",
                    "errors",
                    "warnings"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers/check-conflicts": {
      "post": {
        "operationId": "transfers-checkTransferConflicts",
        "summary": "Check for transfer conflicts",
        "description": "Check for potential conflicts with existing transfers on the same date and warehouse.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "source_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "destination_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "transfer_date": {
                    "type": "string"
                  },
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "product_sku": {
                          "type": "string"
                        },
                        "product_name": {
                          "type": "string"
                        },
                        "variant_name": {
                          "type": "string"
                        },
                        "variant_type": {
                          "type": "string",
                          "enum": [
                            "cylinder",
                            "refillable",
                            "disposable"
                          ]
                        },
                        "quantity_to_transfer": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "available_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "reserved_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_weight_kg": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_cost": {
                          "type": "number",
                          "minimum": 0
                        },
                        "source_location": {
                          "type": "string"
                        },
                        "batch_number": {
                          "type": "string"
                        },
                        "expiry_date": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity_to_transfer"
                      ],
                      "additionalProperties": false
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "source_warehouse_id",
                  "destination_warehouse_id",
                  "transfer_date",
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "has_conflicts": {
                      "type": "boolean"
                    },
                    "conflicts": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "has_conflicts",
                    "conflicts"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers/estimate-duration": {
      "post": {
        "operationId": "transfers-estimateTransferDuration",
        "summary": "Estimate transfer duration",
        "description": "Calculate estimated duration for transfer completion including preparation, loading, transport, and unloading time.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "product_sku": {
                          "type": "string"
                        },
                        "product_name": {
                          "type": "string"
                        },
                        "variant_name": {
                          "type": "string"
                        },
                        "variant_type": {
                          "type": "string",
                          "enum": [
                            "cylinder",
                            "refillable",
                            "disposable"
                          ]
                        },
                        "quantity_to_transfer": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "available_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "reserved_stock": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_weight_kg": {
                          "type": "number",
                          "minimum": 0
                        },
                        "unit_cost": {
                          "type": "number",
                          "minimum": 0
                        },
                        "source_location": {
                          "type": "string"
                        },
                        "batch_number": {
                          "type": "string"
                        },
                        "expiry_date": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity_to_transfer"
                      ],
                      "additionalProperties": false
                    },
                    "minItems": 1
                  },
                  "estimated_distance_km": {
                    "type": "number"
                  }
                },
                "required": [
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "preparation_hours": {
                      "type": "number"
                    },
                    "transport_hours": {
                      "type": "number"
                    },
                    "total_hours": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "preparation_hours",
                    "transport_hours",
                    "total_hours"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/transfers/format-validation-errors": {
      "post": {
        "operationId": "transfers-formatValidationErrors",
        "summary": "Format validation errors",
        "description": "Format validation errors into user-friendly display format with categorization.",
        "tags": [
          "transfers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "validation_result": {
                    "type": "object",
                    "properties": {
                      "is_valid": {
                        "type": "boolean"
                      },
                      "errors": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "warnings": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "blocked_items": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "total_weight_kg": {
                        "type": "number"
                      },
                      "estimated_cost": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "is_valid",
                      "errors",
                      "warnings",
                      "blocked_items",
                      "total_weight_kg"
                    ],
                    "additionalProperties": false
                  }
                },
                "required": [
                  "validation_result"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "severity": {
                        "type": "string",
                        "enum": [
                          "error",
                          "warning"
                        ]
                      },
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "severity",
                      "message"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks": {
      "get": {
        "operationId": "trucks-list",
        "summary": "List trucks with filtering and pagination",
        "description": "Retrieve a paginated list of trucks with optional filtering by search text, status, and active state. Includes inventory data for each truck.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "inactive",
                "maintenance"
              ]
            }
          },
          {
            "name": "active",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "trucks": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "fleet_number": {
                            "type": "string"
                          },
                          "license_plate": {
                            "type": "string"
                          },
                          "capacity_cylinders": {
                            "type": "number"
                          },
                          "capacity_kg": {
                            "type": "number"
                          },
                          "driver_id": {
                            "type": "string",
                            "format": "uuid",
                            "nullable": true
                          },
                          "driver": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string",
                                "nullable": true
                              },
                              "email": {
                                "type": "string",
                                "nullable": true
                              },
                              "phone": {
                                "type": "string",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "email",
                              "phone"
                            ],
                            "additionalProperties": false
                          },
                          "active": {
                            "type": "boolean"
                          },
                          "status": {
                            "type": "string"
                          },
                          "last_maintenance_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "next_maintenance_due": {
                            "type": "string",
                            "nullable": true
                          },
                          "fuel_capacity_liters": {
                            "type": "number",
                            "nullable": true
                          },
                          "avg_fuel_consumption": {
                            "type": "number",
                            "nullable": true
                          },
                          "user_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "current_route": {},
                          "inventory": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "product_id": {
                                  "type": "string"
                                },
                                "product_name": {
                                  "type": "string"
                                },
                                "product_sku": {
                                  "type": "string"
                                },
                                "product_variant_name": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "qty_full": {
                                  "type": "number"
                                },
                                "qty_empty": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "product_id",
                                "product_name",
                                "product_sku",
                                "product_variant_name",
                                "qty_full",
                                "qty_empty"
                              ],
                              "additionalProperties": false
                            }
                          },
                          "maintenance_interval_days": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "id",
                          "fleet_number",
                          "license_plate",
                          "capacity_cylinders",
                          "capacity_kg",
                          "active",
                          "status"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "trucks",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "trucks-create",
        "summary": "Create new truck",
        "description": "Create a new truck with fleet information, capacity details, and driver assignment.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "fleet_number": {
                    "type": "string",
                    "minLength": 1
                  },
                  "license_plate": {
                    "type": "string",
                    "minLength": 1
                  },
                  "capacity_cylinders": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "capacity_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "active": {
                    "type": "boolean",
                    "default": true
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "inactive",
                      "maintenance"
                    ],
                    "default": "active"
                  },
                  "last_maintenance_date": {
                    "type": "string",
                    "nullable": true
                  },
                  "next_maintenance_due": {
                    "type": "string",
                    "nullable": true
                  },
                  "maintenance_interval_days": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "fuel_capacity_liters": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0,
                    "nullable": true
                  },
                  "avg_fuel_consumption": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0,
                    "nullable": true
                  }
                },
                "required": [
                  "fleet_number",
                  "license_plate",
                  "capacity_cylinders"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "fleet_number": {
                      "type": "string"
                    },
                    "license_plate": {
                      "type": "string"
                    },
                    "capacity_cylinders": {
                      "type": "number"
                    },
                    "capacity_kg": {
                      "type": "number"
                    },
                    "driver_id": {
                      "type": "string",
                      "format": "uuid",
                      "nullable": true
                    },
                    "driver": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "nullable": true
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "email",
                        "phone"
                      ],
                      "additionalProperties": false
                    },
                    "active": {
                      "type": "boolean"
                    },
                    "status": {
                      "type": "string"
                    },
                    "last_maintenance_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "next_maintenance_due": {
                      "type": "string",
                      "nullable": true
                    },
                    "fuel_capacity_liters": {
                      "type": "number",
                      "nullable": true
                    },
                    "avg_fuel_consumption": {
                      "type": "number",
                      "nullable": true
                    },
                    "user_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "current_route": {},
                    "inventory": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string"
                          },
                          "product_name": {
                            "type": "string"
                          },
                          "product_sku": {
                            "type": "string"
                          },
                          "product_variant_name": {
                            "type": "string",
                            "nullable": true
                          },
                          "qty_full": {
                            "type": "number"
                          },
                          "qty_empty": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "product_id",
                          "product_name",
                          "product_sku",
                          "product_variant_name",
                          "qty_full",
                          "qty_empty"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "maintenance_interval_days": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "id",
                    "fleet_number",
                    "license_plate",
                    "capacity_cylinders",
                    "capacity_kg",
                    "active",
                    "status"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/{id}": {
      "get": {
        "operationId": "trucks-get",
        "summary": "Get truck details with inventory",
        "description": "Retrieve detailed information about a specific truck including current inventory, route information, and capacity calculations.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "fleet_number": {
                      "type": "string"
                    },
                    "license_plate": {
                      "type": "string"
                    },
                    "capacity_cylinders": {
                      "type": "number"
                    },
                    "capacity_kg": {
                      "type": "number"
                    },
                    "driver_id": {
                      "type": "string",
                      "format": "uuid",
                      "nullable": true
                    },
                    "driver": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "nullable": true
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "email",
                        "phone"
                      ],
                      "additionalProperties": false
                    },
                    "active": {
                      "type": "boolean"
                    },
                    "status": {
                      "type": "string"
                    },
                    "last_maintenance_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "next_maintenance_due": {
                      "type": "string",
                      "nullable": true
                    },
                    "fuel_capacity_liters": {
                      "type": "number",
                      "nullable": true
                    },
                    "avg_fuel_consumption": {
                      "type": "number",
                      "nullable": true
                    },
                    "user_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "current_route": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "truck_id": {
                          "type": "string"
                        },
                        "route_date": {
                          "type": "string"
                        },
                        "planned_start_time": {
                          "type": "string",
                          "nullable": true
                        },
                        "planned_end_time": {
                          "type": "string",
                          "nullable": true
                        },
                        "actual_start_time": {
                          "type": "string",
                          "nullable": true
                        },
                        "actual_end_time": {
                          "type": "string",
                          "nullable": true
                        },
                        "route_status": {
                          "type": "string"
                        },
                        "total_distance_km": {
                          "type": "number",
                          "nullable": true
                        },
                        "estimated_duration_hours": {
                          "type": "number",
                          "nullable": true
                        },
                        "actual_duration_hours": {
                          "type": "number",
                          "nullable": true
                        },
                        "fuel_used_liters": {
                          "type": "number",
                          "nullable": true
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "updated_at": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "truck_id",
                        "route_date",
                        "planned_start_time",
                        "planned_end_time",
                        "actual_start_time",
                        "actual_end_time",
                        "route_status",
                        "total_distance_km",
                        "estimated_duration_hours",
                        "actual_duration_hours",
                        "fuel_used_liters",
                        "created_at",
                        "updated_at"
                      ],
                      "additionalProperties": false,
                      "nullable": true
                    },
                    "inventory": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string"
                          },
                          "product_name": {
                            "type": "string"
                          },
                          "product_sku": {
                            "type": "string"
                          },
                          "product_variant_name": {
                            "type": "string",
                            "nullable": true
                          },
                          "qty_full": {
                            "type": "number"
                          },
                          "qty_empty": {
                            "type": "number"
                          },
                          "weight_kg": {
                            "type": "number"
                          },
                          "updated_at": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "product_id",
                          "product_name",
                          "product_sku",
                          "product_variant_name",
                          "qty_full",
                          "qty_empty",
                          "weight_kg",
                          "updated_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "maintenance_interval_days": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "id",
                    "fleet_number",
                    "license_plate",
                    "capacity_cylinders",
                    "capacity_kg",
                    "active",
                    "status",
                    "current_route",
                    "inventory"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "put": {
        "operationId": "trucks-update",
        "summary": "Update truck information",
        "description": "Update truck details including fleet number, capacity, driver information, and maintenance schedules.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "fleet_number": {
                    "type": "string",
                    "minLength": 1
                  },
                  "license_plate": {
                    "type": "string",
                    "minLength": 1
                  },
                  "capacity_cylinders": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "capacity_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "active": {
                    "type": "boolean"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "inactive",
                      "maintenance"
                    ]
                  },
                  "last_maintenance_date": {
                    "type": "string",
                    "nullable": true
                  },
                  "next_maintenance_due": {
                    "type": "string",
                    "nullable": true
                  },
                  "maintenance_interval_days": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "fuel_capacity_liters": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0,
                    "nullable": true
                  },
                  "avg_fuel_consumption": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0,
                    "nullable": true
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "fleet_number": {
                      "type": "string"
                    },
                    "license_plate": {
                      "type": "string"
                    },
                    "capacity_cylinders": {
                      "type": "number"
                    },
                    "capacity_kg": {
                      "type": "number"
                    },
                    "driver_id": {
                      "type": "string",
                      "format": "uuid",
                      "nullable": true
                    },
                    "driver": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "nullable": true
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "email",
                        "phone"
                      ],
                      "additionalProperties": false
                    },
                    "active": {
                      "type": "boolean"
                    },
                    "status": {
                      "type": "string"
                    },
                    "last_maintenance_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "next_maintenance_due": {
                      "type": "string",
                      "nullable": true
                    },
                    "fuel_capacity_liters": {
                      "type": "number",
                      "nullable": true
                    },
                    "avg_fuel_consumption": {
                      "type": "number",
                      "nullable": true
                    },
                    "user_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "current_route": {},
                    "inventory": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string"
                          },
                          "product_name": {
                            "type": "string"
                          },
                          "product_sku": {
                            "type": "string"
                          },
                          "product_variant_name": {
                            "type": "string",
                            "nullable": true
                          },
                          "qty_full": {
                            "type": "number"
                          },
                          "qty_empty": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "product_id",
                          "product_name",
                          "product_sku",
                          "product_variant_name",
                          "qty_full",
                          "qty_empty"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "maintenance_interval_days": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "id",
                    "fleet_number",
                    "license_plate",
                    "capacity_cylinders",
                    "capacity_kg",
                    "active",
                    "status"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "delete": {
        "operationId": "trucks-delete",
        "summary": "Delete truck",
        "description": "Delete a truck from the fleet. This action cannot be undone.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/allocations": {
      "get": {
        "operationId": "trucks-getAllocations",
        "summary": "Get truck allocations",
        "description": "Retrieve truck allocations for a specific date and/or truck with order assignments and capacity information.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "truck_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "truck_id": {
                        "type": "string"
                      },
                      "order_id": {
                        "type": "string"
                      },
                      "allocation_date": {
                        "type": "string"
                      },
                      "estimated_weight_kg": {
                        "type": "number"
                      },
                      "stop_sequence": {
                        "type": "number"
                      },
                      "status": {
                        "type": "string"
                      },
                      "created_at": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "id",
                      "truck_id",
                      "order_id",
                      "allocation_date",
                      "estimated_weight_kg",
                      "status",
                      "created_at"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "trucks-allocateOrder",
        "summary": "Allocate order to truck",
        "description": "Assign an order to a specific truck with estimated weight and delivery sequence information.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "truck_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "order_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "allocation_date": {
                    "type": "string"
                  },
                  "estimated_weight_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "stop_sequence": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  }
                },
                "required": [
                  "truck_id",
                  "order_id",
                  "allocation_date",
                  "estimated_weight_kg"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "truck_id": {
                      "type": "string"
                    },
                    "order_id": {
                      "type": "string"
                    },
                    "allocation_date": {
                      "type": "string"
                    },
                    "estimated_weight_kg": {
                      "type": "number"
                    },
                    "stop_sequence": {
                      "type": "number"
                    },
                    "status": {
                      "type": "string"
                    },
                    "created_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "truck_id",
                    "order_id",
                    "allocation_date",
                    "estimated_weight_kg",
                    "status",
                    "created_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/allocations/{id}": {
      "put": {
        "operationId": "trucks-updateAllocation",
        "summary": "Update truck allocation",
        "description": "Update the status or sequence of an existing truck allocation.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "planned",
                      "loaded",
                      "delivered",
                      "cancelled"
                    ]
                  },
                  "stop_sequence": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "truck_id": {
                      "type": "string"
                    },
                    "order_id": {
                      "type": "string"
                    },
                    "allocation_date": {
                      "type": "string"
                    },
                    "estimated_weight_kg": {
                      "type": "number"
                    },
                    "stop_sequence": {
                      "type": "number"
                    },
                    "status": {
                      "type": "string"
                    },
                    "created_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "truck_id",
                    "order_id",
                    "allocation_date",
                    "estimated_weight_kg",
                    "status",
                    "created_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/routes": {
      "get": {
        "operationId": "trucks-getRoutes",
        "summary": "Get truck routes",
        "description": "Retrieve planned and actual routes for trucks on a specific date with timing and distance information.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "truck_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "truck_id": {
                        "type": "string"
                      },
                      "route_date": {
                        "type": "string"
                      },
                      "planned_start_time": {
                        "type": "string",
                        "nullable": true
                      },
                      "planned_end_time": {
                        "type": "string",
                        "nullable": true
                      },
                      "actual_start_time": {
                        "type": "string",
                        "nullable": true
                      },
                      "actual_end_time": {
                        "type": "string",
                        "nullable": true
                      },
                      "route_status": {
                        "type": "string"
                      },
                      "total_distance_km": {
                        "type": "number",
                        "nullable": true
                      },
                      "estimated_duration_hours": {
                        "type": "number",
                        "nullable": true
                      },
                      "actual_duration_hours": {
                        "type": "number",
                        "nullable": true
                      },
                      "fuel_used_liters": {
                        "type": "number",
                        "nullable": true
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "id",
                      "truck_id",
                      "route_date",
                      "planned_start_time",
                      "planned_end_time",
                      "actual_start_time",
                      "actual_end_time",
                      "route_status",
                      "total_distance_km",
                      "estimated_duration_hours",
                      "actual_duration_hours",
                      "fuel_used_liters",
                      "created_at",
                      "updated_at"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "trucks-createRoute",
        "summary": "Create truck route",
        "description": "Create a new route plan for a truck with scheduled times and distance estimates.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "truck_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "route_date": {
                    "type": "string"
                  },
                  "planned_start_time": {
                    "type": "string"
                  },
                  "planned_end_time": {
                    "type": "string"
                  },
                  "total_distance_km": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "estimated_duration_hours": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  }
                },
                "required": [
                  "truck_id",
                  "route_date"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "truck_id": {
                      "type": "string"
                    },
                    "route_date": {
                      "type": "string"
                    },
                    "planned_start_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "planned_end_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "actual_start_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "actual_end_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "route_status": {
                      "type": "string"
                    },
                    "total_distance_km": {
                      "type": "number",
                      "nullable": true
                    },
                    "estimated_duration_hours": {
                      "type": "number",
                      "nullable": true
                    },
                    "actual_duration_hours": {
                      "type": "number",
                      "nullable": true
                    },
                    "fuel_used_liters": {
                      "type": "number",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "truck_id",
                    "route_date",
                    "planned_start_time",
                    "planned_end_time",
                    "actual_start_time",
                    "actual_end_time",
                    "route_status",
                    "total_distance_km",
                    "estimated_duration_hours",
                    "actual_duration_hours",
                    "fuel_used_liters",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/routes/{id}": {
      "put": {
        "operationId": "trucks-updateRoute",
        "summary": "Update truck route",
        "description": "Update route information with actual times, status changes, and fuel consumption data.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "actual_start_time": {
                    "type": "string"
                  },
                  "actual_end_time": {
                    "type": "string"
                  },
                  "route_status": {
                    "type": "string",
                    "enum": [
                      "planned",
                      "loading",
                      "loaded",
                      "in_transit",
                      "delivering",
                      "unloading",
                      "completed",
                      "cancelled"
                    ]
                  },
                  "actual_duration_hours": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "fuel_used_liters": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "truck_id": {
                      "type": "string"
                    },
                    "route_date": {
                      "type": "string"
                    },
                    "planned_start_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "planned_end_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "actual_start_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "actual_end_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "route_status": {
                      "type": "string"
                    },
                    "total_distance_km": {
                      "type": "number",
                      "nullable": true
                    },
                    "estimated_duration_hours": {
                      "type": "number",
                      "nullable": true
                    },
                    "actual_duration_hours": {
                      "type": "number",
                      "nullable": true
                    },
                    "fuel_used_liters": {
                      "type": "number",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "truck_id",
                    "route_date",
                    "planned_start_time",
                    "planned_end_time",
                    "actual_start_time",
                    "actual_end_time",
                    "route_status",
                    "total_distance_km",
                    "estimated_duration_hours",
                    "actual_duration_hours",
                    "fuel_used_liters",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/maintenance": {
      "get": {
        "operationId": "trucks-getMaintenance",
        "summary": "Get maintenance records",
        "description": "Retrieve maintenance records for trucks with scheduling, completion status, and cost information.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "truck_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "truck_id": {
                        "type": "string"
                      },
                      "maintenance_type": {
                        "type": "string"
                      },
                      "scheduled_date": {
                        "type": "string"
                      },
                      "completed_date": {
                        "type": "string",
                        "nullable": true
                      },
                      "status": {
                        "type": "string"
                      },
                      "description": {
                        "type": "string"
                      },
                      "cost": {
                        "type": "number",
                        "nullable": true
                      },
                      "mechanic": {
                        "type": "string",
                        "nullable": true
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "id",
                      "truck_id",
                      "maintenance_type",
                      "scheduled_date",
                      "completed_date",
                      "status",
                      "description",
                      "cost",
                      "mechanic",
                      "created_at",
                      "updated_at"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "trucks-scheduleMaintenance",
        "summary": "Schedule truck maintenance",
        "description": "Schedule maintenance for a truck with type, date, description, and mechanic assignment.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "truck_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "maintenance_type": {
                    "type": "string",
                    "enum": [
                      "routine",
                      "repair",
                      "inspection",
                      "emergency"
                    ]
                  },
                  "scheduled_date": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string",
                    "minLength": 1
                  },
                  "cost": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "mechanic": {
                    "type": "string"
                  }
                },
                "required": [
                  "truck_id",
                  "maintenance_type",
                  "scheduled_date",
                  "description"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "truck_id": {
                      "type": "string"
                    },
                    "maintenance_type": {
                      "type": "string"
                    },
                    "scheduled_date": {
                      "type": "string"
                    },
                    "completed_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "status": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "cost": {
                      "type": "number",
                      "nullable": true
                    },
                    "mechanic": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "truck_id",
                    "maintenance_type",
                    "scheduled_date",
                    "completed_date",
                    "status",
                    "description",
                    "cost",
                    "mechanic",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/maintenance/{id}": {
      "put": {
        "operationId": "trucks-updateMaintenance",
        "summary": "Update maintenance record",
        "description": "Update maintenance record with completion status, actual costs, and mechanic notes.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "completed_date": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "scheduled",
                      "in_progress",
                      "completed",
                      "cancelled"
                    ]
                  },
                  "cost": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "mechanic": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "truck_id": {
                      "type": "string"
                    },
                    "maintenance_type": {
                      "type": "string"
                    },
                    "scheduled_date": {
                      "type": "string"
                    },
                    "completed_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "status": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "cost": {
                      "type": "number",
                      "nullable": true
                    },
                    "mechanic": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "truck_id",
                    "maintenance_type",
                    "scheduled_date",
                    "completed_date",
                    "status",
                    "description",
                    "cost",
                    "mechanic",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/calculate-order-weight": {
      "post": {
        "operationId": "trucks-calculateOrderWeight",
        "summary": "Calculate order weight",
        "description": "Calculate the total weight of an order for truck capacity planning and allocation decisions.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "order_lines": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "order_id": {
                          "type": "string"
                        },
                        "product_id": {
                          "type": "string"
                        },
                        "quantity": {
                          "type": "number"
                        },
                        "unit_price": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "id",
                        "order_id",
                        "product_id",
                        "quantity",
                        "unit_price"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "product_ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "required": [
                  "order_lines"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "total_weight_kg": {
                      "type": "number"
                    },
                    "line_estimates": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string"
                          },
                          "product_name": {
                            "type": "string"
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "estimated_weight_kg": {
                            "type": "number"
                          },
                          "variant_name": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "product_id",
                          "product_name",
                          "quantity",
                          "estimated_weight_kg"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "total_weight_kg",
                    "line_estimates"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/{truck_id}/capacity": {
      "get": {
        "operationId": "trucks-calculateCapacity",
        "summary": "Calculate truck capacity",
        "description": "Calculate current capacity utilization for a truck on a specific date including existing allocations.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "truck_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "date",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "truck_id": {
                      "type": "string"
                    },
                    "total_capacity_kg": {
                      "type": "number"
                    },
                    "allocated_weight_kg": {
                      "type": "number"
                    },
                    "available_weight_kg": {
                      "type": "number"
                    },
                    "utilization_percentage": {
                      "type": "number"
                    },
                    "orders_count": {
                      "type": "number"
                    },
                    "is_overallocated": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "truck_id",
                    "total_capacity_kg",
                    "allocated_weight_kg",
                    "available_weight_kg",
                    "utilization_percentage",
                    "orders_count",
                    "is_overallocated"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/find-best-allocation": {
      "post": {
        "operationId": "trucks-findBestAllocation",
        "summary": "Find best truck allocation",
        "description": "Find the most suitable truck for an order based on capacity, efficiency, and utilization optimization.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "order_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "order_weight": {
                    "type": "number"
                  },
                  "target_date": {
                    "type": "string"
                  }
                },
                "required": [
                  "order_id",
                  "order_weight",
                  "target_date"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "recommendations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "truck": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "fleet_number": {
                                "type": "string"
                              },
                              "license_plate": {
                                "type": "string"
                              },
                              "capacity_cylinders": {
                                "type": "number"
                              },
                              "capacity_kg": {
                                "type": "number"
                              },
                              "driver_id": {
                                "type": "string",
                                "format": "uuid",
                                "nullable": true
                              },
                              "driver": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "name": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "email": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "phone": {
                                    "type": "string",
                                    "nullable": true
                                  }
                                },
                                "required": [
                                  "id",
                                  "name",
                                  "email",
                                  "phone"
                                ],
                                "additionalProperties": false
                              },
                              "active": {
                                "type": "boolean"
                              },
                              "status": {
                                "type": "string"
                              },
                              "last_maintenance_date": {
                                "type": "string",
                                "nullable": true
                              },
                              "next_maintenance_due": {
                                "type": "string",
                                "nullable": true
                              },
                              "fuel_capacity_liters": {
                                "type": "number",
                                "nullable": true
                              },
                              "avg_fuel_consumption": {
                                "type": "number",
                                "nullable": true
                              },
                              "user_id": {
                                "type": "string",
                                "nullable": true
                              },
                              "created_at": {
                                "type": "string"
                              },
                              "updated_at": {
                                "type": "string"
                              },
                              "current_route": {},
                              "inventory": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "product_id": {
                                      "type": "string"
                                    },
                                    "product_name": {
                                      "type": "string"
                                    },
                                    "product_sku": {
                                      "type": "string"
                                    },
                                    "product_variant_name": {
                                      "type": "string",
                                      "nullable": true
                                    },
                                    "qty_full": {
                                      "type": "number"
                                    },
                                    "qty_empty": {
                                      "type": "number"
                                    }
                                  },
                                  "required": [
                                    "product_id",
                                    "product_name",
                                    "product_sku",
                                    "product_variant_name",
                                    "qty_full",
                                    "qty_empty"
                                  ],
                                  "additionalProperties": false
                                }
                              },
                              "maintenance_interval_days": {
                                "type": "number"
                              }
                            },
                            "required": [
                              "id",
                              "fleet_number",
                              "license_plate",
                              "capacity_cylinders",
                              "capacity_kg",
                              "active",
                              "status"
                            ],
                            "additionalProperties": false
                          },
                          "capacity_info": {
                            "type": "object",
                            "properties": {
                              "truck_id": {
                                "type": "string"
                              },
                              "total_capacity_kg": {
                                "type": "number"
                              },
                              "allocated_weight_kg": {
                                "type": "number"
                              },
                              "available_weight_kg": {
                                "type": "number"
                              },
                              "utilization_percentage": {
                                "type": "number"
                              },
                              "orders_count": {
                                "type": "number"
                              },
                              "is_overallocated": {
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "truck_id",
                              "total_capacity_kg",
                              "allocated_weight_kg",
                              "available_weight_kg",
                              "utilization_percentage",
                              "orders_count",
                              "is_overallocated"
                            ],
                            "additionalProperties": false
                          },
                          "fit_score": {
                            "type": "number"
                          },
                          "can_accommodate": {
                            "type": "boolean"
                          }
                        },
                        "required": [
                          "truck",
                          "capacity_info",
                          "fit_score",
                          "can_accommodate"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "best_truck": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "fleet_number": {
                          "type": "string"
                        },
                        "license_plate": {
                          "type": "string"
                        },
                        "capacity_cylinders": {
                          "type": "number"
                        },
                        "capacity_kg": {
                          "type": "number"
                        },
                        "driver_id": {
                          "type": "string",
                          "format": "uuid",
                          "nullable": true
                        },
                        "driver": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string",
                              "nullable": true
                            },
                            "email": {
                              "type": "string",
                              "nullable": true
                            },
                            "phone": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "id",
                            "name",
                            "email",
                            "phone"
                          ],
                          "additionalProperties": false
                        },
                        "active": {
                          "type": "boolean"
                        },
                        "status": {
                          "type": "string"
                        },
                        "last_maintenance_date": {
                          "type": "string",
                          "nullable": true
                        },
                        "next_maintenance_due": {
                          "type": "string",
                          "nullable": true
                        },
                        "fuel_capacity_liters": {
                          "type": "number",
                          "nullable": true
                        },
                        "avg_fuel_consumption": {
                          "type": "number",
                          "nullable": true
                        },
                        "user_id": {
                          "type": "string",
                          "nullable": true
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "updated_at": {
                          "type": "string"
                        },
                        "current_route": {},
                        "inventory": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "product_id": {
                                "type": "string"
                              },
                              "product_name": {
                                "type": "string"
                              },
                              "product_sku": {
                                "type": "string"
                              },
                              "product_variant_name": {
                                "type": "string",
                                "nullable": true
                              },
                              "qty_full": {
                                "type": "number"
                              },
                              "qty_empty": {
                                "type": "number"
                              }
                            },
                            "required": [
                              "product_id",
                              "product_name",
                              "product_sku",
                              "product_variant_name",
                              "qty_full",
                              "qty_empty"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "maintenance_interval_days": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "id",
                        "fleet_number",
                        "license_plate",
                        "capacity_cylinders",
                        "capacity_kg",
                        "active",
                        "status"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "recommendations"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/validate-allocation": {
      "post": {
        "operationId": "trucks-validateAllocation",
        "summary": "Validate truck allocation",
        "description": "Validate if a specific truck can accommodate an order considering capacity constraints and existing allocations.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "truck_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "order_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "order_weight": {
                    "type": "number"
                  },
                  "target_date": {
                    "type": "string"
                  }
                },
                "required": [
                  "truck_id",
                  "order_id",
                  "order_weight",
                  "target_date"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "is_valid": {
                      "type": "boolean"
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "is_valid",
                    "warnings",
                    "errors"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/optimize-allocations": {
      "post": {
        "operationId": "trucks-optimizeAllocations",
        "summary": "Optimize truck allocations",
        "description": "Optimize truck allocations for multiple orders to maximize efficiency and minimize costs.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "order_ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    }
                  },
                  "target_date": {
                    "type": "string"
                  }
                },
                "required": [
                  "order_ids",
                  "target_date"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "optimized_allocations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "order_id": {
                            "type": "string"
                          },
                          "truck_id": {
                            "type": "string"
                          },
                          "estimated_weight_kg": {
                            "type": "number"
                          },
                          "confidence_score": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "order_id",
                          "truck_id",
                          "estimated_weight_kg",
                          "confidence_score"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "unallocated_orders": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "optimization_summary": {
                      "type": "object",
                      "properties": {
                        "total_orders": {
                          "type": "number"
                        },
                        "allocated_orders": {
                          "type": "number"
                        },
                        "fleet_utilization": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "total_orders",
                        "allocated_orders",
                        "fleet_utilization"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "optimized_allocations",
                    "unallocated_orders",
                    "optimization_summary"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/{truck_id}/validate-loading-capacity": {
      "post": {
        "operationId": "trucks-validateLoadingCapacity",
        "summary": "Validate truck loading capacity",
        "description": "Validate if a truck can accommodate the specified items without exceeding capacity constraints.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string"
                        },
                        "qty_full": {
                          "type": "number",
                          "minimum": 0
                        },
                        "qty_empty": {
                          "type": "number",
                          "minimum": 0
                        },
                        "weight_kg": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "product_id",
                        "qty_full",
                        "qty_empty"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "truck_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "is_valid": {
                      "type": "boolean"
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "is_valid",
                    "warnings",
                    "errors"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/{truck_id}/load-inventory": {
      "post": {
        "operationId": "trucks-loadInventory",
        "summary": "Load truck inventory",
        "description": "Load inventory from warehouse to truck with atomic transfer validation and comprehensive logging.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "qty_full": {
                          "type": "number",
                          "minimum": 0
                        },
                        "qty_empty": {
                          "type": "number",
                          "minimum": 0
                        }
                      },
                      "required": [
                        "product_id",
                        "qty_full",
                        "qty_empty"
                      ],
                      "additionalProperties": false
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "warehouse_id",
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "truck_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "truck_id": {
                      "type": "string"
                    },
                    "warehouse_id": {
                      "type": "string"
                    },
                    "items_transferred": {
                      "type": "number"
                    },
                    "total_items_requested": {
                      "type": "number"
                    },
                    "loading_id": {
                      "type": "string"
                    },
                    "verification": {
                      "type": "object",
                      "properties": {
                        "passed": {
                          "type": "boolean"
                        },
                        "details": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "product_id": {
                                "type": "string"
                              },
                              "requested_full": {
                                "type": "number"
                              },
                              "requested_empty": {
                                "type": "number"
                              },
                              "truck_inventory_exists": {
                                "type": "boolean"
                              },
                              "warehouse_inventory_exists": {
                                "type": "boolean"
                              },
                              "verification_passed": {
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "product_id",
                              "requested_full",
                              "requested_empty",
                              "truck_inventory_exists",
                              "warehouse_inventory_exists",
                              "verification_passed"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "duration_ms": {
                          "type": "number"
                        },
                        "error": {
                          "type": "string"
                        },
                        "warning": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "passed"
                      ],
                      "additionalProperties": false
                    },
                    "results": {
                      "type": "array"
                    },
                    "processedItems": {
                      "type": "array"
                    },
                    "timestamp": {
                      "type": "string"
                    },
                    "truck_fleet_number": {
                      "type": "string"
                    },
                    "warehouse_name": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "truck_id",
                    "warehouse_id",
                    "items_transferred",
                    "total_items_requested",
                    "loading_id",
                    "verification",
                    "results",
                    "processedItems",
                    "timestamp",
                    "truck_fleet_number",
                    "warehouse_name"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/{truck_id}/unload-inventory": {
      "post": {
        "operationId": "trucks-unloadInventory",
        "summary": "Unload truck inventory",
        "description": "Unload inventory from truck to warehouse with transfer validation and tracking.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "qty_full": {
                          "type": "number",
                          "minimum": 0
                        },
                        "qty_empty": {
                          "type": "number",
                          "minimum": 0
                        }
                      },
                      "required": [
                        "product_id",
                        "qty_full",
                        "qty_empty"
                      ],
                      "additionalProperties": false
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "warehouse_id",
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "truck_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "truck_id": {
                      "type": "string"
                    },
                    "warehouse_id": {
                      "type": "string"
                    },
                    "items_transferred": {
                      "type": "number"
                    },
                    "results": {
                      "type": "array"
                    }
                  },
                  "required": [
                    "success",
                    "truck_id",
                    "warehouse_id",
                    "items_transferred",
                    "results"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trucks/{truck_id}/inventory": {
      "get": {
        "operationId": "trucks-getInventory",
        "summary": "Get truck inventory",
        "description": "Retrieve current inventory status for a truck with capacity utilization and product details.",
        "tags": [
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "truck_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "include_product_details",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "not": {}
                },
                {
                  "type": "boolean"
                }
              ],
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "truck": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "fleet_number": {
                          "type": "string"
                        },
                        "license_plate": {
                          "type": "string"
                        },
                        "active": {
                          "type": "boolean"
                        },
                        "capacity_cylinders": {
                          "type": "number"
                        },
                        "capacity_kg": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "id",
                        "fleet_number",
                        "license_plate",
                        "active",
                        "capacity_cylinders",
                        "capacity_kg"
                      ],
                      "additionalProperties": false
                    },
                    "inventory": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "qty_full": {
                            "type": "number"
                          },
                          "qty_empty": {
                            "type": "number"
                          },
                          "total_cylinders": {
                            "type": "number"
                          },
                          "weight_kg": {
                            "type": "number"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "variant_name": {
                                "type": "string",
                                "nullable": true
                              },
                              "capacity_kg": {
                                "type": "number",
                                "nullable": true
                              },
                              "tare_weight_kg": {
                                "type": "number",
                                "nullable": true
                              },
                              "unit_of_measure": {
                                "type": "string"
                              },
                              "status": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "sku",
                              "variant_name",
                              "capacity_kg",
                              "tare_weight_kg",
                              "unit_of_measure",
                              "status"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "product_id",
                          "qty_full",
                          "qty_empty",
                          "total_cylinders",
                          "weight_kg",
                          "updated_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_products": {
                          "type": "number"
                        },
                        "total_full_cylinders": {
                          "type": "number"
                        },
                        "total_empty_cylinders": {
                          "type": "number"
                        },
                        "total_cylinders": {
                          "type": "number"
                        },
                        "total_weight_kg": {
                          "type": "number"
                        },
                        "capacity_utilization_percent": {
                          "type": "number"
                        },
                        "is_overloaded": {
                          "type": "boolean"
                        },
                        "last_updated": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "total_products",
                        "total_full_cylinders",
                        "total_empty_cylinders",
                        "total_cylinders",
                        "total_weight_kg",
                        "capacity_utilization_percent",
                        "is_overloaded",
                        "last_updated"
                      ],
                      "additionalProperties": false
                    },
                    "timestamp": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "truck",
                    "inventory",
                    "summary",
                    "timestamp"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/list": {
      "get": {
        "operationId": "trips-list",
        "summary": "List trips with filters",
        "description": "Get paginated list of trips with optional filtering and sorting",
        "tags": [
          "trips"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "truck_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "warehouse_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "driver_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "planned",
                "loading",
                "loaded",
                "in_transit",
                "delivering",
                "unloading",
                "completed",
                "cancelled"
              ]
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "trips": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "truck_id": {
                            "type": "string"
                          },
                          "route_date": {
                            "type": "string"
                          },
                          "planned_start_time": {
                            "type": "string",
                            "nullable": true
                          },
                          "planned_end_time": {
                            "type": "string",
                            "nullable": true
                          },
                          "actual_start_time": {
                            "type": "string",
                            "nullable": true
                          },
                          "actual_end_time": {
                            "type": "string",
                            "nullable": true
                          },
                          "route_status": {
                            "type": "string"
                          },
                          "trip_notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "warehouse_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "driver_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_by_user_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "load_started_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "load_completed_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "delivery_started_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "unload_started_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "unload_completed_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "total_distance_km": {
                            "type": "number",
                            "nullable": true
                          },
                          "estimated_duration_hours": {
                            "type": "number",
                            "nullable": true
                          },
                          "actual_duration_hours": {
                            "type": "number",
                            "nullable": true
                          },
                          "fuel_used_liters": {
                            "type": "number",
                            "nullable": true
                          },
                          "truck": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "fleet_number": {
                                "type": "string"
                              },
                              "license_plate": {
                                "type": "string"
                              },
                              "capacity_cylinders": {
                                "type": "number"
                              },
                              "capacity_kg": {
                                "type": "number"
                              },
                              "driver_name": {
                                "type": "string",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "fleet_number",
                              "license_plate",
                              "capacity_cylinders",
                              "capacity_kg",
                              "driver_name"
                            ],
                            "additionalProperties": false
                          },
                          "warehouse": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "address": {
                                "type": "string",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "address"
                            ],
                            "additionalProperties": false
                          },
                          "driver": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "email": {
                                "type": "string",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "email"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "truck_id",
                          "route_date",
                          "planned_start_time",
                          "planned_end_time",
                          "actual_start_time",
                          "actual_end_time",
                          "route_status",
                          "trip_notes",
                          "warehouse_id",
                          "driver_id",
                          "created_by_user_id",
                          "created_at",
                          "updated_at",
                          "load_started_at",
                          "load_completed_at",
                          "delivery_started_at",
                          "unload_started_at",
                          "unload_completed_at",
                          "total_distance_km",
                          "estimated_duration_hours",
                          "actual_duration_hours",
                          "fuel_used_liters"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "currentPage": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "hasNextPage": {
                      "type": "boolean"
                    },
                    "hasPreviousPage": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "trips",
                    "currentPage",
                    "totalPages",
                    "totalCount",
                    "hasNextPage",
                    "hasPreviousPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{id}/basic": {
      "get": {
        "operationId": "trips-get",
        "summary": "Get basic trip info",
        "description": "Get basic information about a specific trip",
        "tags": [
          "trips"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "include_details",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "not": {}
                },
                {
                  "type": "boolean"
                }
              ],
              "default": true
            }
          },
          {
            "name": "include_loading_details",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "not": {}
                },
                {
                  "type": "boolean"
                }
              ],
              "default": false
            }
          },
          {
            "name": "include_variance_records",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "not": {}
                },
                {
                  "type": "boolean"
                }
              ],
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "truck_id": {
                      "type": "string"
                    },
                    "route_date": {
                      "type": "string"
                    },
                    "planned_start_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "planned_end_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "actual_start_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "actual_end_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "route_status": {
                      "type": "string"
                    },
                    "trip_notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "warehouse_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "driver_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_by_user_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "load_started_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "load_completed_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "delivery_started_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "unload_started_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "unload_completed_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "total_distance_km": {
                      "type": "number",
                      "nullable": true
                    },
                    "estimated_duration_hours": {
                      "type": "number",
                      "nullable": true
                    },
                    "actual_duration_hours": {
                      "type": "number",
                      "nullable": true
                    },
                    "fuel_used_liters": {
                      "type": "number",
                      "nullable": true
                    },
                    "truck": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "fleet_number": {
                          "type": "string"
                        },
                        "license_plate": {
                          "type": "string"
                        },
                        "capacity_cylinders": {
                          "type": "number"
                        },
                        "capacity_kg": {
                          "type": "number"
                        },
                        "driver_name": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "fleet_number",
                        "license_plate",
                        "capacity_cylinders",
                        "capacity_kg",
                        "driver_name"
                      ],
                      "additionalProperties": false
                    },
                    "warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "address": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "address"
                      ],
                      "additionalProperties": false
                    },
                    "driver": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "email"
                      ],
                      "additionalProperties": false
                    },
                    "truck_allocations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "order_id": {
                            "type": "string"
                          },
                          "stop_sequence": {
                            "type": "number",
                            "nullable": true
                          },
                          "status": {
                            "type": "string"
                          },
                          "estimated_weight_kg": {
                            "type": "number",
                            "nullable": true
                          },
                          "actual_weight_kg": {
                            "type": "number",
                            "nullable": true
                          },
                          "order": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "order_number": {
                                "type": "string"
                              },
                              "total_amount": {
                                "type": "number"
                              },
                              "customer": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "name": {
                                    "type": "string"
                                  },
                                  "email": {
                                    "type": "string",
                                    "nullable": true
                                  }
                                },
                                "required": [
                                  "id",
                                  "name",
                                  "email"
                                ],
                                "additionalProperties": false
                              },
                              "delivery_address": {
                                "type": "object",
                                "properties": {
                                  "line1": {
                                    "type": "string"
                                  },
                                  "city": {
                                    "type": "string"
                                  },
                                  "state": {
                                    "type": "string"
                                  },
                                  "postal_code": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "line1",
                                  "city",
                                  "state",
                                  "postal_code"
                                ],
                                "additionalProperties": false,
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "order_number",
                              "total_amount",
                              "customer",
                              "delivery_address"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "order_id",
                          "stop_sequence",
                          "status",
                          "estimated_weight_kg",
                          "actual_weight_kg",
                          "order"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "id",
                    "truck_id",
                    "route_date",
                    "planned_start_time",
                    "planned_end_time",
                    "actual_start_time",
                    "actual_end_time",
                    "route_status",
                    "trip_notes",
                    "warehouse_id",
                    "driver_id",
                    "created_by_user_id",
                    "created_at",
                    "updated_at",
                    "load_started_at",
                    "load_completed_at",
                    "delivery_started_at",
                    "unload_started_at",
                    "unload_completed_at",
                    "total_distance_km",
                    "estimated_duration_hours",
                    "actual_duration_hours",
                    "fuel_used_liters"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{id}/timeline": {
      "get": {
        "operationId": "trips-getTimeline",
        "summary": "Get trip timeline",
        "description": "Get chronological timeline of trip events and status changes",
        "tags": [
          "trips"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "trip_id": {
                      "type": "string"
                    },
                    "timeline": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "event": {
                            "type": "string"
                          },
                          "timestamp": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string"
                          },
                          "user_name": {
                            "type": "string"
                          },
                          "details": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "event",
                          "timestamp",
                          "status",
                          "user_name",
                          "details"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "trip_id",
                    "timeline"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{id}/capacity": {
      "get": {
        "operationId": "trips-getCapacity",
        "summary": "Get trip capacity information",
        "description": "Get detailed capacity utilization and loading information for a trip",
        "tags": [
          "trips"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "trip_id": {
                      "type": "string"
                    },
                    "truck_capacity_cylinders": {
                      "type": "number"
                    },
                    "truck_capacity_kg": {
                      "type": "number"
                    },
                    "loaded_cylinders": {
                      "type": "number"
                    },
                    "loaded_weight_kg": {
                      "type": "number"
                    },
                    "cylinder_utilization": {
                      "type": "number"
                    },
                    "weight_utilization": {
                      "type": "number"
                    },
                    "is_overloaded": {
                      "type": "boolean"
                    },
                    "loading_details_count": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "trip_id",
                    "truck_capacity_cylinders",
                    "truck_capacity_kg",
                    "loaded_cylinders",
                    "loaded_weight_kg",
                    "cylinder_utilization",
                    "weight_utilization",
                    "is_overloaded",
                    "loading_details_count"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips": {
      "post": {
        "operationId": "trips-createTrip",
        "summary": "Create new trip",
        "description": "Create a new trip for a truck with basic route information",
        "tags": [
          "trips"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "truck_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "route_date": {
                    "type": "string"
                  },
                  "warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "driver_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "planned_start_time": {
                    "type": "string"
                  },
                  "planned_end_time": {
                    "type": "string"
                  },
                  "trip_notes": {
                    "type": "string"
                  }
                },
                "required": [
                  "truck_id",
                  "route_date",
                  "warehouse_id"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "truck_id": {
                      "type": "string"
                    },
                    "route_date": {
                      "type": "string"
                    },
                    "planned_start_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "planned_end_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "actual_start_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "actual_end_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "route_status": {
                      "type": "string"
                    },
                    "trip_notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "warehouse_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "driver_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_by_user_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "load_started_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "load_completed_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "delivery_started_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "unload_started_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "unload_completed_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "total_distance_km": {
                      "type": "number",
                      "nullable": true
                    },
                    "estimated_duration_hours": {
                      "type": "number",
                      "nullable": true
                    },
                    "actual_duration_hours": {
                      "type": "number",
                      "nullable": true
                    },
                    "fuel_used_liters": {
                      "type": "number",
                      "nullable": true
                    },
                    "truck": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "fleet_number": {
                          "type": "string"
                        },
                        "license_plate": {
                          "type": "string"
                        },
                        "capacity_cylinders": {
                          "type": "number"
                        },
                        "capacity_kg": {
                          "type": "number"
                        },
                        "driver_name": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "fleet_number",
                        "license_plate",
                        "capacity_cylinders",
                        "capacity_kg",
                        "driver_name"
                      ],
                      "additionalProperties": false
                    },
                    "warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "address": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "address"
                      ],
                      "additionalProperties": false
                    },
                    "driver": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "email"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "id",
                    "truck_id",
                    "route_date",
                    "planned_start_time",
                    "planned_end_time",
                    "actual_start_time",
                    "actual_end_time",
                    "route_status",
                    "trip_notes",
                    "warehouse_id",
                    "driver_id",
                    "created_by_user_id",
                    "created_at",
                    "updated_at",
                    "load_started_at",
                    "load_completed_at",
                    "delivery_started_at",
                    "unload_started_at",
                    "unload_completed_at",
                    "total_distance_km",
                    "estimated_duration_hours",
                    "actual_duration_hours",
                    "fuel_used_liters"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "get": {
        "operationId": "trips-getTrips",
        "summary": "List trips",
        "description": "Get a paginated list of trips with optional filtering",
        "tags": [
          "trips"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "truck_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "warehouse_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "driver_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "planned",
                "loading",
                "loaded",
                "in_transit",
                "delivering",
                "unloading",
                "completed",
                "cancelled"
              ]
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "trips": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "truck_id": {
                            "type": "string"
                          },
                          "route_date": {
                            "type": "string"
                          },
                          "planned_start_time": {
                            "type": "string",
                            "nullable": true
                          },
                          "planned_end_time": {
                            "type": "string",
                            "nullable": true
                          },
                          "actual_start_time": {
                            "type": "string",
                            "nullable": true
                          },
                          "actual_end_time": {
                            "type": "string",
                            "nullable": true
                          },
                          "route_status": {
                            "type": "string"
                          },
                          "trip_notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "warehouse_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "driver_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_by_user_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "load_started_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "load_completed_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "delivery_started_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "unload_started_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "unload_completed_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "total_distance_km": {
                            "type": "number",
                            "nullable": true
                          },
                          "estimated_duration_hours": {
                            "type": "number",
                            "nullable": true
                          },
                          "actual_duration_hours": {
                            "type": "number",
                            "nullable": true
                          },
                          "fuel_used_liters": {
                            "type": "number",
                            "nullable": true
                          },
                          "truck": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "fleet_number": {
                                "type": "string"
                              },
                              "license_plate": {
                                "type": "string"
                              },
                              "capacity_cylinders": {
                                "type": "number"
                              },
                              "capacity_kg": {
                                "type": "number"
                              },
                              "driver_name": {
                                "type": "string",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "fleet_number",
                              "license_plate",
                              "capacity_cylinders",
                              "capacity_kg",
                              "driver_name"
                            ],
                            "additionalProperties": false
                          },
                          "warehouse": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "address": {
                                "type": "string",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "address"
                            ],
                            "additionalProperties": false
                          },
                          "driver": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "email": {
                                "type": "string",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "email"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "truck_id",
                          "route_date",
                          "planned_start_time",
                          "planned_end_time",
                          "actual_start_time",
                          "actual_end_time",
                          "route_status",
                          "trip_notes",
                          "warehouse_id",
                          "driver_id",
                          "created_by_user_id",
                          "created_at",
                          "updated_at",
                          "load_started_at",
                          "load_completed_at",
                          "delivery_started_at",
                          "unload_started_at",
                          "unload_completed_at",
                          "total_distance_km",
                          "estimated_duration_hours",
                          "actual_duration_hours",
                          "fuel_used_liters"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "number"
                        },
                        "limit": {
                          "type": "number"
                        },
                        "total": {
                          "type": "number"
                        },
                        "pages": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "page",
                        "limit",
                        "total",
                        "pages"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "trips",
                    "pagination"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{id}": {
      "get": {
        "operationId": "trips-getTripById",
        "summary": "Get trip details",
        "description": "Get detailed information about a specific trip including loading details and variance records",
        "tags": [
          "trips"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "include_details",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "not": {}
                },
                {
                  "type": "boolean"
                }
              ],
              "default": true
            }
          },
          {
            "name": "include_loading_details",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "not": {}
                },
                {
                  "type": "boolean"
                }
              ],
              "default": false
            }
          },
          {
            "name": "include_variance_records",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "not": {}
                },
                {
                  "type": "boolean"
                }
              ],
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "truck_id": {
                      "type": "string"
                    },
                    "route_date": {
                      "type": "string"
                    },
                    "planned_start_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "planned_end_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "actual_start_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "actual_end_time": {
                      "type": "string",
                      "nullable": true
                    },
                    "route_status": {
                      "type": "string"
                    },
                    "trip_notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "warehouse_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "driver_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_by_user_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "load_started_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "load_completed_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "delivery_started_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "unload_started_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "unload_completed_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "total_distance_km": {
                      "type": "number",
                      "nullable": true
                    },
                    "estimated_duration_hours": {
                      "type": "number",
                      "nullable": true
                    },
                    "actual_duration_hours": {
                      "type": "number",
                      "nullable": true
                    },
                    "fuel_used_liters": {
                      "type": "number",
                      "nullable": true
                    },
                    "truck": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "fleet_number": {
                          "type": "string"
                        },
                        "license_plate": {
                          "type": "string"
                        },
                        "capacity_cylinders": {
                          "type": "number"
                        },
                        "capacity_kg": {
                          "type": "number"
                        },
                        "driver_name": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "fleet_number",
                        "license_plate",
                        "capacity_cylinders",
                        "capacity_kg",
                        "driver_name"
                      ],
                      "additionalProperties": false
                    },
                    "warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "address": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "address"
                      ],
                      "additionalProperties": false
                    },
                    "driver": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "email"
                      ],
                      "additionalProperties": false
                    },
                    "loading_details": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "trip_id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "loading_sequence": {
                            "type": "number"
                          },
                          "planned_quantity": {
                            "type": "number"
                          },
                          "actual_quantity": {
                            "type": "number"
                          },
                          "variance": {
                            "type": "number"
                          },
                          "notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "sku"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "trip_id",
                          "product_id",
                          "loading_sequence",
                          "planned_quantity",
                          "actual_quantity",
                          "variance",
                          "notes",
                          "created_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "loading_summary": {
                      "type": "object",
                      "properties": {
                        "total_products": {
                          "type": "number"
                        },
                        "total_planned_quantity": {
                          "type": "number"
                        },
                        "total_actual_quantity": {
                          "type": "number"
                        },
                        "total_variance": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "total_products",
                        "total_planned_quantity",
                        "total_actual_quantity",
                        "total_variance"
                      ],
                      "additionalProperties": false
                    },
                    "variance_records": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "trip_id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "variance_type": {
                            "type": "string"
                          },
                          "planned_quantity": {
                            "type": "number"
                          },
                          "actual_quantity": {
                            "type": "number"
                          },
                          "variance_amount": {
                            "type": "number"
                          },
                          "reason": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "sku"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "trip_id",
                          "product_id",
                          "variance_type",
                          "planned_quantity",
                          "actual_quantity",
                          "variance_amount",
                          "reason",
                          "created_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "variance_summary": {
                      "type": "object",
                      "properties": {
                        "total_variance_records": {
                          "type": "number"
                        },
                        "total_variance_amount": {
                          "type": "number"
                        },
                        "products_with_variance": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "total_variance_records",
                        "total_variance_amount",
                        "products_with_variance"
                      ],
                      "additionalProperties": false
                    },
                    "allocations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "trip_id": {
                            "type": "string"
                          },
                          "order_id": {
                            "type": "string"
                          },
                          "stop_sequence": {
                            "type": "number",
                            "nullable": true
                          },
                          "status": {
                            "type": "string"
                          },
                          "estimated_weight_kg": {
                            "type": "number",
                            "nullable": true
                          },
                          "actual_weight_kg": {
                            "type": "number",
                            "nullable": true
                          },
                          "allocated_by_user_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "allocated_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "order": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "order_date": {
                                "type": "string"
                              },
                              "total_amount": {
                                "type": "number"
                              },
                              "customer_id": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "order_date",
                              "total_amount",
                              "customer_id"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "trip_id",
                          "order_id",
                          "stop_sequence",
                          "status",
                          "estimated_weight_kg",
                          "actual_weight_kg",
                          "allocated_by_user_id",
                          "allocated_at",
                          "notes"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "id",
                    "truck_id",
                    "route_date",
                    "planned_start_time",
                    "planned_end_time",
                    "actual_start_time",
                    "actual_end_time",
                    "route_status",
                    "trip_notes",
                    "warehouse_id",
                    "driver_id",
                    "created_by_user_id",
                    "created_at",
                    "updated_at",
                    "load_started_at",
                    "load_completed_at",
                    "delivery_started_at",
                    "unload_started_at",
                    "unload_completed_at",
                    "total_distance_km",
                    "estimated_duration_hours",
                    "actual_duration_hours",
                    "fuel_used_liters"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{trip_id}/status": {
      "put": {
        "operationId": "trips-updateTripStatus",
        "summary": "Update trip status",
        "description": "Update the status of a trip and track lifecycle timestamps",
        "tags": [
          "trips"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "planned",
                      "loading",
                      "loaded",
                      "in_transit",
                      "delivering",
                      "unloading",
                      "completed",
                      "cancelled"
                    ]
                  },
                  "notes": {
                    "type": "string"
                  },
                  "timestamp": {
                    "type": "string"
                  }
                },
                "required": [
                  "status"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "trip_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "trip": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "truck_id": {
                          "type": "string"
                        },
                        "route_date": {
                          "type": "string"
                        },
                        "planned_start_time": {
                          "type": "string",
                          "nullable": true
                        },
                        "planned_end_time": {
                          "type": "string",
                          "nullable": true
                        },
                        "actual_start_time": {
                          "type": "string",
                          "nullable": true
                        },
                        "actual_end_time": {
                          "type": "string",
                          "nullable": true
                        },
                        "route_status": {
                          "type": "string"
                        },
                        "trip_notes": {
                          "type": "string",
                          "nullable": true
                        },
                        "warehouse_id": {
                          "type": "string",
                          "nullable": true
                        },
                        "driver_id": {
                          "type": "string",
                          "nullable": true
                        },
                        "created_by_user_id": {
                          "type": "string",
                          "nullable": true
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "updated_at": {
                          "type": "string"
                        },
                        "load_started_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "load_completed_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "delivery_started_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "unload_started_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "unload_completed_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "total_distance_km": {
                          "type": "number",
                          "nullable": true
                        },
                        "estimated_duration_hours": {
                          "type": "number",
                          "nullable": true
                        },
                        "actual_duration_hours": {
                          "type": "number",
                          "nullable": true
                        },
                        "fuel_used_liters": {
                          "type": "number",
                          "nullable": true
                        },
                        "truck": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "fleet_number": {
                              "type": "string"
                            },
                            "license_plate": {
                              "type": "string"
                            },
                            "capacity_cylinders": {
                              "type": "number"
                            },
                            "capacity_kg": {
                              "type": "number"
                            },
                            "driver_name": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "id",
                            "fleet_number",
                            "license_plate",
                            "capacity_cylinders",
                            "capacity_kg",
                            "driver_name"
                          ],
                          "additionalProperties": false
                        },
                        "warehouse": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "address": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "id",
                            "name",
                            "address"
                          ],
                          "additionalProperties": false
                        },
                        "driver": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "id",
                            "email"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "id",
                        "truck_id",
                        "route_date",
                        "planned_start_time",
                        "planned_end_time",
                        "actual_start_time",
                        "actual_end_time",
                        "route_status",
                        "trip_notes",
                        "warehouse_id",
                        "driver_id",
                        "created_by_user_id",
                        "created_at",
                        "updated_at",
                        "load_started_at",
                        "load_completed_at",
                        "delivery_started_at",
                        "unload_started_at",
                        "unload_completed_at",
                        "total_distance_km",
                        "estimated_duration_hours",
                        "actual_duration_hours",
                        "fuel_used_liters"
                      ],
                      "additionalProperties": false
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "trip",
                    "message"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{trip_id}/allocations": {
      "post": {
        "operationId": "trips-allocateOrdersToTrip",
        "summary": "Allocate orders to trip",
        "description": "Allocate multiple orders to a trip with automatic sequencing",
        "tags": [
          "trips"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "order_ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    }
                  },
                  "auto_sequence": {
                    "type": "boolean",
                    "default": true
                  },
                  "notes": {
                    "type": "string"
                  }
                },
                "required": [
                  "order_ids"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "trip_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "trip_id": {
                            "type": "string"
                          },
                          "order_id": {
                            "type": "string"
                          },
                          "stop_sequence": {
                            "type": "number",
                            "nullable": true
                          },
                          "status": {
                            "type": "string"
                          },
                          "estimated_weight_kg": {
                            "type": "number",
                            "nullable": true
                          },
                          "actual_weight_kg": {
                            "type": "number",
                            "nullable": true
                          },
                          "allocated_by_user_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "allocated_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "order": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "order_date": {
                                "type": "string"
                              },
                              "total_amount": {
                                "type": "number"
                              },
                              "customer_id": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "id",
                              "order_date",
                              "total_amount",
                              "customer_id"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "trip_id",
                          "order_id",
                          "stop_sequence",
                          "status",
                          "estimated_weight_kg",
                          "actual_weight_kg",
                          "allocated_by_user_id",
                          "allocated_at",
                          "notes"
                        ],
                        "additionalProperties": false
                      }
                    },
                    {
                      "type": "object",
                      "properties": {
                        "success": {
                          "type": "boolean"
                        },
                        "trip_id": {
                          "type": "string"
                        },
                        "allocated_orders": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "allocations": {},
                        "message": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "success",
                        "trip_id",
                        "allocated_orders",
                        "message"
                      ],
                      "additionalProperties": false
                    }
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{trip_id}/allocations/{order_id}": {
      "delete": {
        "operationId": "trips-removeOrderFromTrip",
        "summary": "Remove order from trip",
        "description": "Remove an order allocation from a trip",
        "tags": [
          "trips"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "trip_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{trip_id}/start-loading": {
      "post": {
        "operationId": "trips-startTripLoading",
        "summary": "Start trip loading process",
        "description": "Begin the loading process for a trip and transition status to loading",
        "tags": [
          "trips",
          "loading"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "notes": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "trip_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "loading_detail": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "trip_id": {
                          "type": "string"
                        },
                        "product_id": {
                          "type": "string"
                        },
                        "loading_sequence": {
                          "type": "number"
                        },
                        "planned_quantity": {
                          "type": "number"
                        },
                        "actual_quantity": {
                          "type": "number"
                        },
                        "variance": {
                          "type": "number"
                        },
                        "notes": {
                          "type": "string",
                          "nullable": true
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "product": {
                          "type": "object",
                          "properties": {
                            "name": {
                              "type": "string"
                            },
                            "sku": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "name",
                            "sku"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "id",
                        "trip_id",
                        "product_id",
                        "loading_sequence",
                        "planned_quantity",
                        "actual_quantity",
                        "variance",
                        "notes",
                        "created_at"
                      ],
                      "additionalProperties": false
                    },
                    "transfer_result": {},
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{trip_id}/loading-details": {
      "post": {
        "operationId": "trips-recordLoadingDetails",
        "summary": "Record loading details for trip",
        "description": "Record actual loaded quantities for products on a trip with inventory transfer",
        "tags": [
          "trips",
          "loading"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "product_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "qty_full": {
                    "type": "number",
                    "minimum": 0
                  },
                  "qty_empty": {
                    "type": "number",
                    "minimum": 0
                  },
                  "loading_sequence": {
                    "type": "number",
                    "minimum": 1,
                    "default": 1
                  },
                  "notes": {
                    "type": "string"
                  }
                },
                "required": [
                  "product_id",
                  "qty_full",
                  "qty_empty"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "trip_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "loading_detail": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "trip_id": {
                          "type": "string"
                        },
                        "product_id": {
                          "type": "string"
                        },
                        "loading_sequence": {
                          "type": "number"
                        },
                        "planned_quantity": {
                          "type": "number"
                        },
                        "actual_quantity": {
                          "type": "number"
                        },
                        "variance": {
                          "type": "number"
                        },
                        "notes": {
                          "type": "string",
                          "nullable": true
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "product": {
                          "type": "object",
                          "properties": {
                            "name": {
                              "type": "string"
                            },
                            "sku": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "name",
                            "sku"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "id",
                        "trip_id",
                        "product_id",
                        "loading_sequence",
                        "planned_quantity",
                        "actual_quantity",
                        "variance",
                        "notes",
                        "created_at"
                      ],
                      "additionalProperties": false
                    },
                    "transfer_result": {},
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{trip_id}/loading-summary": {
      "get": {
        "operationId": "trips-getTripLoadingSummary",
        "summary": "Get trip loading summary",
        "description": "Get comprehensive loading summary with Required vs Loaded comparison",
        "tags": [
          "trips",
          "loading"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "trip_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "trip": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "truck_id": {
                          "type": "string"
                        },
                        "route_date": {
                          "type": "string"
                        },
                        "planned_start_time": {
                          "type": "string",
                          "nullable": true
                        },
                        "planned_end_time": {
                          "type": "string",
                          "nullable": true
                        },
                        "actual_start_time": {
                          "type": "string",
                          "nullable": true
                        },
                        "actual_end_time": {
                          "type": "string",
                          "nullable": true
                        },
                        "route_status": {
                          "type": "string"
                        },
                        "trip_notes": {
                          "type": "string",
                          "nullable": true
                        },
                        "warehouse_id": {
                          "type": "string",
                          "nullable": true
                        },
                        "driver_id": {
                          "type": "string",
                          "nullable": true
                        },
                        "created_by_user_id": {
                          "type": "string",
                          "nullable": true
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "updated_at": {
                          "type": "string"
                        },
                        "load_started_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "load_completed_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "delivery_started_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "unload_started_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "unload_completed_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "total_distance_km": {
                          "type": "number",
                          "nullable": true
                        },
                        "estimated_duration_hours": {
                          "type": "number",
                          "nullable": true
                        },
                        "actual_duration_hours": {
                          "type": "number",
                          "nullable": true
                        },
                        "fuel_used_liters": {
                          "type": "number",
                          "nullable": true
                        },
                        "truck": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "fleet_number": {
                              "type": "string"
                            },
                            "license_plate": {
                              "type": "string"
                            },
                            "capacity_cylinders": {
                              "type": "number"
                            },
                            "capacity_kg": {
                              "type": "number"
                            },
                            "driver_name": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "id",
                            "fleet_number",
                            "license_plate",
                            "capacity_cylinders",
                            "capacity_kg",
                            "driver_name"
                          ],
                          "additionalProperties": false
                        },
                        "warehouse": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "address": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "id",
                            "name",
                            "address"
                          ],
                          "additionalProperties": false
                        },
                        "driver": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "id",
                            "email"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "id",
                        "truck_id",
                        "route_date",
                        "planned_start_time",
                        "planned_end_time",
                        "actual_start_time",
                        "actual_end_time",
                        "route_status",
                        "trip_notes",
                        "warehouse_id",
                        "driver_id",
                        "created_by_user_id",
                        "created_at",
                        "updated_at",
                        "load_started_at",
                        "load_completed_at",
                        "delivery_started_at",
                        "unload_started_at",
                        "unload_completed_at",
                        "total_distance_km",
                        "estimated_duration_hours",
                        "actual_duration_hours",
                        "fuel_used_liters"
                      ],
                      "additionalProperties": false
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "trip_id": {
                          "type": "string"
                        },
                        "total_products": {
                          "type": "number"
                        },
                        "products_loaded": {
                          "type": "number"
                        },
                        "products_pending": {
                          "type": "number"
                        },
                        "products_short_loaded": {
                          "type": "number"
                        },
                        "total_required_cylinders": {
                          "type": "number"
                        },
                        "total_loaded_cylinders": {
                          "type": "number"
                        },
                        "loading_percentage": {
                          "type": "number"
                        },
                        "variance_count": {
                          "type": "number"
                        },
                        "has_short_loading": {
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "trip_id",
                        "total_products",
                        "products_loaded",
                        "products_pending",
                        "products_short_loaded",
                        "total_required_cylinders",
                        "total_loaded_cylinders",
                        "loading_percentage",
                        "variance_count",
                        "has_short_loading"
                      ],
                      "additionalProperties": false
                    },
                    "loading_details": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "trip_id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "loading_sequence": {
                            "type": "number"
                          },
                          "planned_quantity": {
                            "type": "number"
                          },
                          "actual_quantity": {
                            "type": "number"
                          },
                          "variance": {
                            "type": "number"
                          },
                          "notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "sku"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "trip_id",
                          "product_id",
                          "loading_sequence",
                          "planned_quantity",
                          "actual_quantity",
                          "variance",
                          "notes",
                          "created_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "allocated_orders": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "order_id": {
                            "type": "string"
                          },
                          "stop_sequence": {
                            "type": "number",
                            "nullable": true
                          },
                          "order": {}
                        },
                        "required": [
                          "order_id",
                          "stop_sequence"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "timestamp": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "trip",
                    "summary",
                    "loading_details",
                    "allocated_orders",
                    "timestamp"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{trip_id}/complete-loading": {
      "post": {
        "operationId": "trips-completeTripLoading",
        "summary": "Complete trip loading",
        "description": "Complete the loading process with capacity validation and status transition",
        "tags": [
          "trips",
          "loading"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "final_notes": {
                    "type": "string"
                  },
                  "force_complete": {
                    "type": "boolean",
                    "default": false
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "trip_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "loading_detail": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "trip_id": {
                          "type": "string"
                        },
                        "product_id": {
                          "type": "string"
                        },
                        "loading_sequence": {
                          "type": "number"
                        },
                        "planned_quantity": {
                          "type": "number"
                        },
                        "actual_quantity": {
                          "type": "number"
                        },
                        "variance": {
                          "type": "number"
                        },
                        "notes": {
                          "type": "string",
                          "nullable": true
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "product": {
                          "type": "object",
                          "properties": {
                            "name": {
                              "type": "string"
                            },
                            "sku": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "name",
                            "sku"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "id",
                        "trip_id",
                        "product_id",
                        "loading_sequence",
                        "planned_quantity",
                        "actual_quantity",
                        "variance",
                        "notes",
                        "created_at"
                      ],
                      "additionalProperties": false
                    },
                    "transfer_result": {},
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{trip_id}/short-loading-warnings": {
      "get": {
        "operationId": "trips-getTripShortLoadingWarnings",
        "summary": "Get short-loading warnings",
        "description": "Get detailed warnings about products that are short-loaded with impact analysis",
        "tags": [
          "trips",
          "loading"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "trip_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "trip_id": {
                      "type": "string"
                    },
                    "trip_status": {
                      "type": "string"
                    },
                    "total_warnings": {
                      "type": "number"
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string"
                          },
                          "product_name": {
                            "type": "string"
                          },
                          "product_sku": {
                            "type": "string"
                          },
                          "required_qty_full": {
                            "type": "number"
                          },
                          "loaded_qty_full": {
                            "type": "number"
                          },
                          "shortage_full": {
                            "type": "number"
                          },
                          "required_qty_empty": {
                            "type": "number"
                          },
                          "loaded_qty_empty": {
                            "type": "number"
                          },
                          "shortage_empty": {
                            "type": "number"
                          },
                          "shortage_percentage": {
                            "type": "number"
                          },
                          "affected_orders": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "order_id": {
                                  "type": "string"
                                },
                                "stop_sequence": {
                                  "type": "number",
                                  "nullable": true
                                },
                                "order": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string"
                                    },
                                    "order_date": {
                                      "type": "string"
                                    },
                                    "customer_id": {
                                      "type": "string"
                                    },
                                    "delivery_address": {
                                      "type": "string",
                                      "nullable": true
                                    },
                                    "order_lines": {
                                      "type": "array",
                                      "items": {
                                        "type": "object",
                                        "properties": {
                                          "product_id": {
                                            "type": "string"
                                          },
                                          "qty_full": {
                                            "type": "number"
                                          },
                                          "qty_empty": {
                                            "type": "number"
                                          }
                                        },
                                        "required": [
                                          "product_id",
                                          "qty_full",
                                          "qty_empty"
                                        ],
                                        "additionalProperties": false
                                      }
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "order_date",
                                    "customer_id",
                                    "delivery_address",
                                    "order_lines"
                                  ],
                                  "additionalProperties": false
                                }
                              },
                              "required": [
                                "order_id",
                                "stop_sequence",
                                "order"
                              ],
                              "additionalProperties": false
                            }
                          },
                          "severity": {
                            "type": "string",
                            "enum": [
                              "low",
                              "medium",
                              "high"
                            ]
                          }
                        },
                        "required": [
                          "product_id",
                          "product_name",
                          "product_sku",
                          "required_qty_full",
                          "loaded_qty_full",
                          "shortage_full",
                          "required_qty_empty",
                          "loaded_qty_empty",
                          "shortage_empty",
                          "shortage_percentage",
                          "affected_orders",
                          "severity"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "high_severity_count": {
                      "type": "number"
                    },
                    "medium_severity_count": {
                      "type": "number"
                    },
                    "low_severity_count": {
                      "type": "number"
                    },
                    "timestamp": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "trip_id",
                    "trip_status",
                    "total_warnings",
                    "warnings",
                    "high_severity_count",
                    "medium_severity_count",
                    "low_severity_count",
                    "timestamp"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{trip_id}/validate-loading-capacity": {
      "post": {
        "operationId": "trips-validateTripLoadingCapacity",
        "summary": "Validate trip loading capacity",
        "description": "Validate that the planned loading quantities for a trip do not exceed truck capacity",
        "tags": [
          "trips",
          "loading",
          "validation"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "loading_plan": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "qty_full": {
                          "type": "number",
                          "minimum": 0
                        },
                        "qty_empty": {
                          "type": "number",
                          "minimum": 0
                        }
                      },
                      "required": [
                        "product_id",
                        "qty_full",
                        "qty_empty"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "trip_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "is_valid": {
                      "type": "boolean"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "capacity_check": {
                      "type": "object",
                      "properties": {
                        "truck_capacity_cylinders": {
                          "type": "number"
                        },
                        "truck_capacity_kg": {
                          "type": "number"
                        },
                        "current_cylinders": {
                          "type": "number"
                        },
                        "additional_cylinders": {
                          "type": "number"
                        },
                        "total_after_loading_cylinders": {
                          "type": "number"
                        },
                        "estimated_total_weight_kg": {
                          "type": "number"
                        },
                        "weight_calculation_accurate": {
                          "type": "boolean"
                        },
                        "utilization_percentage": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "truck_capacity_cylinders",
                        "truck_capacity_kg",
                        "current_cylinders",
                        "additional_cylinders",
                        "total_after_loading_cylinders",
                        "estimated_total_weight_kg",
                        "weight_calculation_accurate",
                        "utilization_percentage"
                      ],
                      "additionalProperties": false
                    },
                    "truck": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "fleet_number": {
                          "type": "string"
                        },
                        "license_plate": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "id",
                        "fleet_number",
                        "license_plate"
                      ],
                      "additionalProperties": false
                    },
                    "trip_id": {
                      "type": "string"
                    },
                    "loading_items_count": {
                      "type": "number"
                    },
                    "timestamp": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "is_valid",
                    "errors",
                    "warnings",
                    "capacity_check",
                    "truck",
                    "trip_id",
                    "loading_items_count",
                    "timestamp"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/trips/{trip_id}/check-product-availability": {
      "post": {
        "operationId": "trips-checkTripProductAvailability",
        "summary": "Check product availability for trip loading",
        "description": "Check warehouse inventory availability for products required by trip orders",
        "tags": [
          "trips",
          "loading",
          "validation"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "include_safety_stock": {
                    "type": "boolean",
                    "default": true
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "trip_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "trip_id": {
                      "type": "string"
                    },
                    "warehouse_id": {
                      "type": "string"
                    },
                    "products_checked": {
                      "type": "number"
                    },
                    "products_available": {
                      "type": "number"
                    },
                    "products_insufficient": {
                      "type": "number"
                    },
                    "availability_details": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string"
                          },
                          "product_name": {
                            "type": "string"
                          },
                          "product_sku": {
                            "type": "string"
                          },
                          "required_qty_full": {
                            "type": "number"
                          },
                          "required_qty_empty": {
                            "type": "number"
                          },
                          "available_qty_full": {
                            "type": "number"
                          },
                          "available_qty_empty": {
                            "type": "number"
                          },
                          "inventory_qty_full": {
                            "type": "number"
                          },
                          "inventory_qty_empty": {
                            "type": "number"
                          },
                          "reserved_qty": {
                            "type": "number"
                          },
                          "safety_stock": {
                            "type": "number"
                          },
                          "full_sufficient": {
                            "type": "boolean"
                          },
                          "empty_sufficient": {
                            "type": "boolean"
                          },
                          "overall_sufficient": {
                            "type": "boolean"
                          },
                          "shortage_full": {
                            "type": "number"
                          },
                          "shortage_empty": {
                            "type": "number"
                          },
                          "total_orders": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "product_id",
                          "product_name",
                          "product_sku",
                          "required_qty_full",
                          "required_qty_empty",
                          "available_qty_full",
                          "available_qty_empty",
                          "inventory_qty_full",
                          "inventory_qty_empty",
                          "reserved_qty",
                          "safety_stock",
                          "full_sufficient",
                          "empty_sufficient",
                          "overall_sufficient",
                          "shortage_full",
                          "shortage_empty",
                          "total_orders"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "overall_availability": {
                      "type": "boolean"
                    },
                    "safety_stock_considered": {
                      "type": "boolean"
                    },
                    "timestamp": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "trip_id",
                    "warehouse_id",
                    "products_checked",
                    "products_available",
                    "products_insufficient",
                    "availability_details",
                    "overall_availability",
                    "safety_stock_considered",
                    "timestamp"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/warehouses": {
      "get": {
        "operationId": "warehouses-list",
        "summary": "List warehouses with filtering and pagination",
        "description": "Retrieve a paginated list of warehouses with optional search filtering and address information.",
        "tags": [
          "warehouses"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "warehouses": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "capacity_cylinders": {
                            "type": "number",
                            "nullable": true
                          },
                          "address_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "address": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "line1": {
                                  "type": "string"
                                },
                                "line2": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "city": {
                                  "type": "string"
                                },
                                "state": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "postal_code": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "country": {
                                  "type": "string"
                                },
                                "instructions": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "latitude": {
                                  "type": "number",
                                  "nullable": true
                                },
                                "longitude": {
                                  "type": "number",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "id",
                                "line1",
                                "line2",
                                "city",
                                "state",
                                "postal_code",
                                "country",
                                "instructions",
                                "latitude",
                                "longitude"
                              ],
                              "additionalProperties": false
                            },
                            "nullable": true
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "capacity_cylinders",
                          "address_id",
                          "created_at",
                          "updated_at",
                          "address"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "warehouses",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "warehouses-create",
        "summary": "Create new warehouse",
        "description": "Create a new warehouse with optional address information and capacity details.",
        "tags": [
          "warehouses"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "capacity_cylinders": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "address": {
                    "type": "object",
                    "properties": {
                      "line1": {
                        "type": "string",
                        "minLength": 1
                      },
                      "line2": {
                        "type": "string"
                      },
                      "city": {
                        "type": "string",
                        "minLength": 1
                      },
                      "state": {
                        "type": "string"
                      },
                      "postal_code": {
                        "type": "string"
                      },
                      "country": {
                        "type": "string",
                        "minLength": 1
                      },
                      "instructions": {
                        "type": "string"
                      },
                      "latitude": {
                        "type": "number"
                      },
                      "longitude": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "line1",
                      "city",
                      "country"
                    ],
                    "additionalProperties": false
                  }
                },
                "required": [
                  "name"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "capacity_cylinders": {
                      "type": "number",
                      "nullable": true
                    },
                    "address_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "address": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "line1": {
                            "type": "string"
                          },
                          "line2": {
                            "type": "string",
                            "nullable": true
                          },
                          "city": {
                            "type": "string"
                          },
                          "state": {
                            "type": "string",
                            "nullable": true
                          },
                          "postal_code": {
                            "type": "string",
                            "nullable": true
                          },
                          "country": {
                            "type": "string"
                          },
                          "instructions": {
                            "type": "string",
                            "nullable": true
                          },
                          "latitude": {
                            "type": "number",
                            "nullable": true
                          },
                          "longitude": {
                            "type": "number",
                            "nullable": true
                          }
                        },
                        "required": [
                          "id",
                          "line1",
                          "line2",
                          "city",
                          "state",
                          "postal_code",
                          "country",
                          "instructions",
                          "latitude",
                          "longitude"
                        ],
                        "additionalProperties": false
                      },
                      "nullable": true
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "capacity_cylinders",
                    "address_id",
                    "created_at",
                    "updated_at",
                    "address"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/warehouses/{id}": {
      "get": {
        "operationId": "warehouses-get",
        "summary": "Get warehouse by ID",
        "description": "Retrieve detailed information about a specific warehouse including address details.",
        "tags": [
          "warehouses"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "capacity_cylinders": {
                      "type": "number",
                      "nullable": true
                    },
                    "address_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "address": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "line1": {
                            "type": "string"
                          },
                          "line2": {
                            "type": "string",
                            "nullable": true
                          },
                          "city": {
                            "type": "string"
                          },
                          "state": {
                            "type": "string",
                            "nullable": true
                          },
                          "postal_code": {
                            "type": "string",
                            "nullable": true
                          },
                          "country": {
                            "type": "string"
                          },
                          "instructions": {
                            "type": "string",
                            "nullable": true
                          },
                          "latitude": {
                            "type": "number",
                            "nullable": true
                          },
                          "longitude": {
                            "type": "number",
                            "nullable": true
                          }
                        },
                        "required": [
                          "id",
                          "line1",
                          "line2",
                          "city",
                          "state",
                          "postal_code",
                          "country",
                          "instructions",
                          "latitude",
                          "longitude"
                        ],
                        "additionalProperties": false
                      },
                      "nullable": true
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "capacity_cylinders",
                    "address_id",
                    "created_at",
                    "updated_at",
                    "address"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "put": {
        "operationId": "warehouses-update",
        "summary": "Update warehouse",
        "description": "Update warehouse information including name, capacity, and address details.",
        "tags": [
          "warehouses"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "capacity_cylinders": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "address": {
                    "type": "object",
                    "properties": {
                      "line1": {
                        "type": "string",
                        "minLength": 1
                      },
                      "line2": {
                        "type": "string"
                      },
                      "city": {
                        "type": "string",
                        "minLength": 1
                      },
                      "state": {
                        "type": "string"
                      },
                      "postal_code": {
                        "type": "string"
                      },
                      "country": {
                        "type": "string",
                        "minLength": 1
                      },
                      "instructions": {
                        "type": "string"
                      },
                      "latitude": {
                        "type": "number"
                      },
                      "longitude": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "line1",
                      "city",
                      "country"
                    ],
                    "additionalProperties": false
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "capacity_cylinders": {
                      "type": "number",
                      "nullable": true
                    },
                    "address_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "address": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "line1": {
                            "type": "string"
                          },
                          "line2": {
                            "type": "string",
                            "nullable": true
                          },
                          "city": {
                            "type": "string"
                          },
                          "state": {
                            "type": "string",
                            "nullable": true
                          },
                          "postal_code": {
                            "type": "string",
                            "nullable": true
                          },
                          "country": {
                            "type": "string"
                          },
                          "instructions": {
                            "type": "string",
                            "nullable": true
                          },
                          "latitude": {
                            "type": "number",
                            "nullable": true
                          },
                          "longitude": {
                            "type": "number",
                            "nullable": true
                          }
                        },
                        "required": [
                          "id",
                          "line1",
                          "line2",
                          "city",
                          "state",
                          "postal_code",
                          "country",
                          "instructions",
                          "latitude",
                          "longitude"
                        ],
                        "additionalProperties": false
                      },
                      "nullable": true
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "capacity_cylinders",
                    "address_id",
                    "created_at",
                    "updated_at",
                    "address"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "delete": {
        "operationId": "warehouses-delete",
        "summary": "Delete warehouse",
        "description": "Delete a warehouse after validating that it has no associated inventory, trucks, or orders.",
        "tags": [
          "warehouses"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/warehouses/stats": {
      "get": {
        "operationId": "warehouses-getStats",
        "summary": "Get warehouse statistics",
        "description": "Retrieve aggregate statistics about warehouses including total count and capacity information.",
        "tags": [
          "warehouses"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "total": {
                      "type": "number"
                    },
                    "total_capacity": {
                      "type": "number"
                    },
                    "average_capacity": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "total",
                    "total_capacity",
                    "average_capacity"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/warehouses/options": {
      "get": {
        "operationId": "warehouses-getOptions",
        "summary": "Get warehouse options for dropdowns",
        "description": "Retrieve simplified warehouse information suitable for dropdown lists and selection components.",
        "tags": [
          "warehouses"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "city": {
                        "type": "string",
                        "nullable": true
                      },
                      "state": {
                        "type": "string",
                        "nullable": true
                      }
                    },
                    "required": [
                      "id",
                      "name",
                      "city",
                      "state"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/orders": {
      "get": {
        "operationId": "orders-list",
        "summary": "List orders with advanced filtering",
        "description": "Retrieve a paginated list of orders with comprehensive filtering options, business logic calculations, and optional analytics.",
        "tags": [
          "orders"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "customer_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "order_date_from",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "order_date_to",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "scheduled_date_from",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "scheduled_date_to",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "amount_min",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "amount_max",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "delivery_area",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "is_overdue",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "delivery_method",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "pickup",
                "delivery"
              ]
            }
          },
          {
            "name": "priority",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "low",
                "normal",
                "high",
                "urgent"
              ]
            }
          },
          {
            "name": "payment_status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "paid",
                "overdue"
              ]
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "created_at",
                "order_date",
                "scheduled_date",
                "total_amount",
                "customer_name"
              ],
              "default": "created_at"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            }
          },
          {
            "name": "include_analytics",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "orders": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "customer_id": {
                            "type": "string"
                          },
                          "delivery_address_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "source_warehouse_id": {
                            "type": "string"
                          },
                          "order_date": {
                            "type": "string"
                          },
                          "scheduled_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "draft",
                              "confirmed",
                              "dispatched",
                              "en_route",
                              "delivered",
                              "invoiced",
                              "cancelled",
                              "paid",
                              "completed_no_sale"
                            ]
                          },
                          "total_amount": {
                            "type": "number"
                          },
                          "tax_amount": {
                            "type": "number",
                            "nullable": true
                          },
                          "tax_percent": {
                            "type": "number",
                            "nullable": true
                          },
                          "created_by_user_id": {
                            "type": "string"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "order_type": {
                            "type": "string"
                          },
                          "service_type": {
                            "type": "string"
                          },
                          "exchange_empty_qty": {
                            "type": "number"
                          },
                          "requires_pickup": {
                            "type": "boolean"
                          },
                          "customer": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "email": {
                                "type": "string",
                                "nullable": true
                              },
                              "phone": {
                                "type": "string",
                                "nullable": true
                              },
                              "account_status": {
                                "type": "string",
                                "nullable": true
                              },
                              "credit_terms_days": {
                                "type": "number",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "email",
                              "phone",
                              "account_status",
                              "credit_terms_days"
                            ],
                            "additionalProperties": false
                          },
                          "delivery_address": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "line1": {
                                "type": "string"
                              },
                              "line2": {
                                "type": "string",
                                "nullable": true
                              },
                              "city": {
                                "type": "string"
                              },
                              "state": {
                                "type": "string",
                                "nullable": true
                              },
                              "postal_code": {
                                "type": "string",
                                "nullable": true
                              },
                              "country": {
                                "type": "string"
                              },
                              "instructions": {
                                "type": "string",
                                "nullable": true
                              },
                              "latitude": {
                                "type": "number",
                                "nullable": true
                              },
                              "longitude": {
                                "type": "number",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "line1",
                              "line2",
                              "city",
                              "state",
                              "postal_code",
                              "country",
                              "instructions",
                              "latitude",
                              "longitude"
                            ],
                            "additionalProperties": false,
                            "nullable": true
                          },
                          "source_warehouse": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "is_mobile": {
                                "type": "boolean",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "is_mobile"
                            ],
                            "additionalProperties": false
                          },
                          "order_lines": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "product_id": {
                                  "type": "string"
                                },
                                "quantity": {
                                  "type": "number"
                                },
                                "unit_price": {
                                  "type": "number"
                                },
                                "subtotal": {
                                  "type": "number"
                                },
                                "product": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string"
                                    },
                                    "sku": {
                                      "type": "string"
                                    },
                                    "name": {
                                      "type": "string"
                                    },
                                    "unit_of_measure": {
                                      "type": "string"
                                    },
                                    "capacity_kg": {
                                      "type": "number",
                                      "nullable": true
                                    },
                                    "tare_weight_kg": {
                                      "type": "number",
                                      "nullable": true
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "sku",
                                    "name",
                                    "unit_of_measure",
                                    "capacity_kg",
                                    "tare_weight_kg"
                                  ],
                                  "additionalProperties": false
                                }
                              },
                              "required": [
                                "id",
                                "product_id",
                                "quantity",
                                "unit_price",
                                "subtotal",
                                "product"
                              ],
                              "additionalProperties": false
                            }
                          },
                          "payments": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "amount": {
                                  "type": "number"
                                },
                                "payment_method": {
                                  "type": "string"
                                },
                                "payment_status": {
                                  "type": "string"
                                },
                                "payment_date": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "transaction_id": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "reference_number": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "id",
                                "amount",
                                "payment_method",
                                "payment_status",
                                "payment_date",
                                "transaction_id",
                                "reference_number"
                              ],
                              "additionalProperties": false
                            }
                          },
                          "is_high_value": {
                            "type": "boolean"
                          },
                          "days_since_order": {
                            "type": "number"
                          },
                          "estimated_delivery_window": {
                            "type": "string"
                          },
                          "risk_level": {
                            "type": "string",
                            "enum": [
                              "low",
                              "medium",
                              "high"
                            ]
                          },
                          "payment_summary": {
                            "type": "object",
                            "properties": {
                              "order_total": {
                                "type": "number"
                              },
                              "total_paid": {
                                "type": "number"
                              },
                              "total_pending": {
                                "type": "number"
                              },
                              "total_failed": {
                                "type": "number"
                              },
                              "balance": {
                                "type": "number"
                              },
                              "status": {
                                "type": "string"
                              },
                              "payment_count": {
                                "type": "number"
                              },
                              "completed_payment_count": {
                                "type": "number"
                              },
                              "last_payment_date": {
                                "type": "string",
                                "nullable": true
                              },
                              "payment_methods": {
                                "type": "object",
                                "additionalProperties": {
                                  "type": "number"
                                }
                              },
                              "is_overdue": {
                                "type": "boolean"
                              },
                              "days_overdue": {
                                "type": "number"
                              }
                            },
                            "required": [
                              "order_total",
                              "total_paid",
                              "total_pending",
                              "total_failed",
                              "balance",
                              "status",
                              "payment_count",
                              "completed_payment_count",
                              "last_payment_date",
                              "payment_methods",
                              "is_overdue",
                              "days_overdue"
                            ],
                            "additionalProperties": false
                          },
                          "payment_balance": {
                            "type": "number"
                          },
                          "payment_status": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "customer_id",
                          "delivery_address_id",
                          "source_warehouse_id",
                          "order_date",
                          "scheduled_date",
                          "notes",
                          "status",
                          "total_amount",
                          "tax_amount",
                          "tax_percent",
                          "created_by_user_id",
                          "created_at",
                          "updated_at",
                          "order_type",
                          "service_type",
                          "exchange_empty_qty",
                          "requires_pickup",
                          "customer",
                          "delivery_address",
                          "source_warehouse",
                          "order_lines",
                          "payments",
                          "is_high_value",
                          "days_since_order",
                          "estimated_delivery_window",
                          "risk_level",
                          "payment_summary",
                          "payment_balance",
                          "payment_status"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    },
                    "analytics": {
                      "type": "object",
                      "properties": {
                        "total_orders": {
                          "type": "number"
                        },
                        "total_value": {
                          "type": "number"
                        },
                        "average_order_value": {
                          "type": "number"
                        },
                        "status_breakdown": {
                          "type": "object",
                          "additionalProperties": {
                            "type": "number"
                          }
                        },
                        "high_value_orders": {
                          "type": "number"
                        },
                        "overdue_orders": {
                          "type": "number"
                        },
                        "risk_breakdown": {
                          "type": "object",
                          "properties": {
                            "low": {
                              "type": "number"
                            },
                            "medium": {
                              "type": "number"
                            },
                            "high": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "low",
                            "medium",
                            "high"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "total_orders",
                        "total_value",
                        "average_order_value",
                        "status_breakdown",
                        "high_value_orders",
                        "overdue_orders",
                        "risk_breakdown"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "orders",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "orders-create",
        "summary": "Create new order",
        "description": "Create a new order with comprehensive validation including pricing, inventory, customer status, and business rules.",
        "tags": [
          "orders"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "customer_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "delivery_address_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "source_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "order_date": {
                    "type": "string"
                  },
                  "scheduled_date": {
                    "type": "string",
                    "format": "date-time",
                    "nullable": true
                  },
                  "notes": {
                    "type": "string"
                  },
                  "idempotency_key": {
                    "type": "string"
                  },
                  "validate_pricing": {
                    "type": "boolean",
                    "default": true
                  },
                  "skip_inventory_check": {
                    "type": "boolean",
                    "default": false
                  },
                  "order_type": {
                    "type": "string",
                    "enum": [
                      "delivery",
                      "visit"
                    ],
                    "default": "delivery"
                  },
                  "service_type": {
                    "type": "string",
                    "enum": [
                      "standard",
                      "express",
                      "scheduled"
                    ],
                    "default": "standard"
                  },
                  "exchange_empty_qty": {
                    "type": "number",
                    "minimum": 0,
                    "default": 0
                  },
                  "requires_pickup": {
                    "type": "boolean",
                    "default": false
                  },
                  "order_lines": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "quantity": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "unit_price": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "expected_price": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "price_list_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "include_deposit": {
                          "type": "boolean",
                          "default": false
                        },
                        "pricing_method": {
                          "type": "string",
                          "enum": [
                            "per_unit",
                            "per_kg",
                            "flat_rate",
                            "tiered"
                          ],
                          "default": "per_unit"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "customer_id",
                  "source_warehouse_id"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "customer_id": {
                      "type": "string"
                    },
                    "delivery_address_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "source_warehouse_id": {
                      "type": "string"
                    },
                    "order_date": {
                      "type": "string"
                    },
                    "scheduled_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "draft",
                        "confirmed",
                        "dispatched",
                        "en_route",
                        "delivered",
                        "invoiced",
                        "cancelled",
                        "paid",
                        "completed_no_sale"
                      ]
                    },
                    "total_amount": {
                      "type": "number"
                    },
                    "tax_amount": {
                      "type": "number",
                      "nullable": true
                    },
                    "tax_percent": {
                      "type": "number",
                      "nullable": true
                    },
                    "created_by_user_id": {
                      "type": "string"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "order_type": {
                      "type": "string"
                    },
                    "service_type": {
                      "type": "string"
                    },
                    "exchange_empty_qty": {
                      "type": "number"
                    },
                    "requires_pickup": {
                      "type": "boolean"
                    },
                    "customer": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true
                        },
                        "account_status": {
                          "type": "string",
                          "nullable": true
                        },
                        "credit_terms_days": {
                          "type": "number",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "email",
                        "phone",
                        "account_status",
                        "credit_terms_days"
                      ],
                      "additionalProperties": false
                    },
                    "delivery_address": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "line1": {
                          "type": "string"
                        },
                        "line2": {
                          "type": "string",
                          "nullable": true
                        },
                        "city": {
                          "type": "string"
                        },
                        "state": {
                          "type": "string",
                          "nullable": true
                        },
                        "postal_code": {
                          "type": "string",
                          "nullable": true
                        },
                        "country": {
                          "type": "string"
                        },
                        "instructions": {
                          "type": "string",
                          "nullable": true
                        },
                        "latitude": {
                          "type": "number",
                          "nullable": true
                        },
                        "longitude": {
                          "type": "number",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "line1",
                        "line2",
                        "city",
                        "state",
                        "postal_code",
                        "country",
                        "instructions",
                        "latitude",
                        "longitude"
                      ],
                      "additionalProperties": false,
                      "nullable": true
                    },
                    "source_warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "is_mobile": {
                          "type": "boolean",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "is_mobile"
                      ],
                      "additionalProperties": false
                    },
                    "order_lines": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "unit_price": {
                            "type": "number"
                          },
                          "subtotal": {
                            "type": "number"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string"
                              },
                              "capacity_kg": {
                                "type": "number",
                                "nullable": true
                              },
                              "tare_weight_kg": {
                                "type": "number",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure",
                              "capacity_kg",
                              "tare_weight_kg"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "product_id",
                          "quantity",
                          "unit_price",
                          "subtotal",
                          "product"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "payments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "amount": {
                            "type": "number"
                          },
                          "payment_method": {
                            "type": "string"
                          },
                          "payment_status": {
                            "type": "string"
                          },
                          "payment_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "transaction_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "reference_number": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "id",
                          "amount",
                          "payment_method",
                          "payment_status",
                          "payment_date",
                          "transaction_id",
                          "reference_number"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "is_high_value": {
                      "type": "boolean"
                    },
                    "days_since_order": {
                      "type": "number"
                    },
                    "estimated_delivery_window": {
                      "type": "string"
                    },
                    "risk_level": {
                      "type": "string",
                      "enum": [
                        "low",
                        "medium",
                        "high"
                      ]
                    },
                    "payment_summary": {
                      "type": "object",
                      "properties": {
                        "order_total": {
                          "type": "number"
                        },
                        "total_paid": {
                          "type": "number"
                        },
                        "total_pending": {
                          "type": "number"
                        },
                        "total_failed": {
                          "type": "number"
                        },
                        "balance": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        },
                        "payment_count": {
                          "type": "number"
                        },
                        "completed_payment_count": {
                          "type": "number"
                        },
                        "last_payment_date": {
                          "type": "string",
                          "nullable": true
                        },
                        "payment_methods": {
                          "type": "object",
                          "additionalProperties": {
                            "type": "number"
                          }
                        },
                        "is_overdue": {
                          "type": "boolean"
                        },
                        "days_overdue": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "order_total",
                        "total_paid",
                        "total_pending",
                        "total_failed",
                        "balance",
                        "status",
                        "payment_count",
                        "completed_payment_count",
                        "last_payment_date",
                        "payment_methods",
                        "is_overdue",
                        "days_overdue"
                      ],
                      "additionalProperties": false
                    },
                    "payment_balance": {
                      "type": "number"
                    },
                    "payment_status": {
                      "type": "string"
                    },
                    "validation_warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "id",
                    "customer_id",
                    "delivery_address_id",
                    "source_warehouse_id",
                    "order_date",
                    "scheduled_date",
                    "notes",
                    "status",
                    "total_amount",
                    "tax_amount",
                    "tax_percent",
                    "created_by_user_id",
                    "created_at",
                    "updated_at",
                    "order_type",
                    "service_type",
                    "exchange_empty_qty",
                    "requires_pickup",
                    "customer",
                    "delivery_address",
                    "source_warehouse",
                    "order_lines",
                    "payments",
                    "is_high_value",
                    "days_since_order",
                    "estimated_delivery_window",
                    "risk_level",
                    "payment_summary",
                    "payment_balance",
                    "payment_status",
                    "validation_warnings"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/orders/workflow": {
      "get": {
        "operationId": "orders-getWorkflow",
        "summary": "Get order workflow steps",
        "description": "Retrieve the complete order workflow with status definitions and transition rules.",
        "tags": [
          "orders",
          "workflow"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string"
                      },
                      "label": {
                        "type": "string"
                      },
                      "description": {
                        "type": "string"
                      },
                      "allowedTransitions": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "estimatedDuration": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "status",
                      "label",
                      "description",
                      "allowedTransitions"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/orders/{order_id}": {
      "get": {
        "operationId": "orders-getById",
        "summary": "Get order by ID",
        "description": "Retrieve detailed information about a specific order including customer, address, order lines, and payment information.",
        "tags": [
          "orders"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "customer_id": {
                      "type": "string"
                    },
                    "delivery_address_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "source_warehouse_id": {
                      "type": "string"
                    },
                    "order_date": {
                      "type": "string"
                    },
                    "scheduled_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "draft",
                        "confirmed",
                        "dispatched",
                        "en_route",
                        "delivered",
                        "invoiced",
                        "cancelled",
                        "paid",
                        "completed_no_sale"
                      ]
                    },
                    "total_amount": {
                      "type": "number"
                    },
                    "tax_amount": {
                      "type": "number",
                      "nullable": true
                    },
                    "tax_percent": {
                      "type": "number",
                      "nullable": true
                    },
                    "created_by_user_id": {
                      "type": "string"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "order_type": {
                      "type": "string"
                    },
                    "service_type": {
                      "type": "string"
                    },
                    "exchange_empty_qty": {
                      "type": "number"
                    },
                    "requires_pickup": {
                      "type": "boolean"
                    },
                    "customer": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true
                        },
                        "account_status": {
                          "type": "string",
                          "nullable": true
                        },
                        "credit_terms_days": {
                          "type": "number",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "email",
                        "phone",
                        "account_status",
                        "credit_terms_days"
                      ],
                      "additionalProperties": false
                    },
                    "delivery_address": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "line1": {
                          "type": "string"
                        },
                        "line2": {
                          "type": "string",
                          "nullable": true
                        },
                        "city": {
                          "type": "string"
                        },
                        "state": {
                          "type": "string",
                          "nullable": true
                        },
                        "postal_code": {
                          "type": "string",
                          "nullable": true
                        },
                        "country": {
                          "type": "string"
                        },
                        "instructions": {
                          "type": "string",
                          "nullable": true
                        },
                        "latitude": {
                          "type": "number",
                          "nullable": true
                        },
                        "longitude": {
                          "type": "number",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "line1",
                        "line2",
                        "city",
                        "state",
                        "postal_code",
                        "country",
                        "instructions",
                        "latitude",
                        "longitude"
                      ],
                      "additionalProperties": false,
                      "nullable": true
                    },
                    "source_warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "is_mobile": {
                          "type": "boolean",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "is_mobile"
                      ],
                      "additionalProperties": false
                    },
                    "order_lines": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "unit_price": {
                            "type": "number"
                          },
                          "subtotal": {
                            "type": "number"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string"
                              },
                              "capacity_kg": {
                                "type": "number",
                                "nullable": true
                              },
                              "tare_weight_kg": {
                                "type": "number",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure",
                              "capacity_kg",
                              "tare_weight_kg"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "product_id",
                          "quantity",
                          "unit_price",
                          "subtotal",
                          "product"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "payments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "amount": {
                            "type": "number"
                          },
                          "payment_method": {
                            "type": "string"
                          },
                          "payment_status": {
                            "type": "string"
                          },
                          "payment_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "transaction_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "reference_number": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "id",
                          "amount",
                          "payment_method",
                          "payment_status",
                          "payment_date",
                          "transaction_id",
                          "reference_number"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "is_high_value": {
                      "type": "boolean"
                    },
                    "days_since_order": {
                      "type": "number"
                    },
                    "estimated_delivery_window": {
                      "type": "string"
                    },
                    "risk_level": {
                      "type": "string",
                      "enum": [
                        "low",
                        "medium",
                        "high"
                      ]
                    },
                    "payment_summary": {
                      "type": "object",
                      "properties": {
                        "order_total": {
                          "type": "number"
                        },
                        "total_paid": {
                          "type": "number"
                        },
                        "total_pending": {
                          "type": "number"
                        },
                        "total_failed": {
                          "type": "number"
                        },
                        "balance": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        },
                        "payment_count": {
                          "type": "number"
                        },
                        "completed_payment_count": {
                          "type": "number"
                        },
                        "last_payment_date": {
                          "type": "string",
                          "nullable": true
                        },
                        "payment_methods": {
                          "type": "object",
                          "additionalProperties": {
                            "type": "number"
                          }
                        },
                        "is_overdue": {
                          "type": "boolean"
                        },
                        "days_overdue": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "order_total",
                        "total_paid",
                        "total_pending",
                        "total_failed",
                        "balance",
                        "status",
                        "payment_count",
                        "completed_payment_count",
                        "last_payment_date",
                        "payment_methods",
                        "is_overdue",
                        "days_overdue"
                      ],
                      "additionalProperties": false
                    },
                    "payment_balance": {
                      "type": "number"
                    },
                    "payment_status": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "customer_id",
                    "delivery_address_id",
                    "source_warehouse_id",
                    "order_date",
                    "scheduled_date",
                    "notes",
                    "status",
                    "total_amount",
                    "tax_amount",
                    "tax_percent",
                    "created_by_user_id",
                    "created_at",
                    "updated_at",
                    "order_type",
                    "service_type",
                    "exchange_empty_qty",
                    "requires_pickup",
                    "customer",
                    "delivery_address",
                    "source_warehouse",
                    "order_lines",
                    "payments",
                    "is_high_value",
                    "days_since_order",
                    "estimated_delivery_window",
                    "risk_level",
                    "payment_summary",
                    "payment_balance",
                    "payment_status"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "put": {
        "operationId": "orders-updateOrder",
        "summary": "Update order details",
        "description": "Update order details including customer, address, products, and delivery information",
        "tags": [
          "orders"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "customer_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "delivery_address_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "source_warehouse_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "order_type": {
                    "type": "string",
                    "enum": [
                      "delivery",
                      "visit"
                    ]
                  },
                  "notes": {
                    "type": "string"
                  },
                  "delivery_date": {
                    "type": "string"
                  },
                  "delivery_time_window_start": {
                    "type": "string"
                  },
                  "delivery_time_window_end": {
                    "type": "string"
                  },
                  "delivery_instructions": {
                    "type": "string"
                  },
                  "order_lines": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "quantity": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "unit_price": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "subtotal": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity",
                        "unit_price"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "customer_id": {
                      "type": "string"
                    },
                    "delivery_address_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "source_warehouse_id": {
                      "type": "string"
                    },
                    "order_date": {
                      "type": "string"
                    },
                    "scheduled_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "draft",
                        "confirmed",
                        "dispatched",
                        "en_route",
                        "delivered",
                        "invoiced",
                        "cancelled",
                        "paid",
                        "completed_no_sale"
                      ]
                    },
                    "total_amount": {
                      "type": "number"
                    },
                    "tax_amount": {
                      "type": "number",
                      "nullable": true
                    },
                    "tax_percent": {
                      "type": "number",
                      "nullable": true
                    },
                    "created_by_user_id": {
                      "type": "string"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "order_type": {
                      "type": "string"
                    },
                    "service_type": {
                      "type": "string"
                    },
                    "exchange_empty_qty": {
                      "type": "number"
                    },
                    "requires_pickup": {
                      "type": "boolean"
                    },
                    "customer": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true
                        },
                        "account_status": {
                          "type": "string",
                          "nullable": true
                        },
                        "credit_terms_days": {
                          "type": "number",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "email",
                        "phone",
                        "account_status",
                        "credit_terms_days"
                      ],
                      "additionalProperties": false
                    },
                    "delivery_address": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "line1": {
                          "type": "string"
                        },
                        "line2": {
                          "type": "string",
                          "nullable": true
                        },
                        "city": {
                          "type": "string"
                        },
                        "state": {
                          "type": "string",
                          "nullable": true
                        },
                        "postal_code": {
                          "type": "string",
                          "nullable": true
                        },
                        "country": {
                          "type": "string"
                        },
                        "instructions": {
                          "type": "string",
                          "nullable": true
                        },
                        "latitude": {
                          "type": "number",
                          "nullable": true
                        },
                        "longitude": {
                          "type": "number",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "line1",
                        "line2",
                        "city",
                        "state",
                        "postal_code",
                        "country",
                        "instructions",
                        "latitude",
                        "longitude"
                      ],
                      "additionalProperties": false,
                      "nullable": true
                    },
                    "source_warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "is_mobile": {
                          "type": "boolean",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "is_mobile"
                      ],
                      "additionalProperties": false
                    },
                    "order_lines": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "unit_price": {
                            "type": "number"
                          },
                          "subtotal": {
                            "type": "number"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string"
                              },
                              "capacity_kg": {
                                "type": "number",
                                "nullable": true
                              },
                              "tare_weight_kg": {
                                "type": "number",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure",
                              "capacity_kg",
                              "tare_weight_kg"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "product_id",
                          "quantity",
                          "unit_price",
                          "subtotal",
                          "product"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "payments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "amount": {
                            "type": "number"
                          },
                          "payment_method": {
                            "type": "string"
                          },
                          "payment_status": {
                            "type": "string"
                          },
                          "payment_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "transaction_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "reference_number": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "id",
                          "amount",
                          "payment_method",
                          "payment_status",
                          "payment_date",
                          "transaction_id",
                          "reference_number"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "is_high_value": {
                      "type": "boolean"
                    },
                    "days_since_order": {
                      "type": "number"
                    },
                    "estimated_delivery_window": {
                      "type": "string"
                    },
                    "risk_level": {
                      "type": "string",
                      "enum": [
                        "low",
                        "medium",
                        "high"
                      ]
                    },
                    "payment_summary": {
                      "type": "object",
                      "properties": {
                        "order_total": {
                          "type": "number"
                        },
                        "total_paid": {
                          "type": "number"
                        },
                        "total_pending": {
                          "type": "number"
                        },
                        "total_failed": {
                          "type": "number"
                        },
                        "balance": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        },
                        "payment_count": {
                          "type": "number"
                        },
                        "completed_payment_count": {
                          "type": "number"
                        },
                        "last_payment_date": {
                          "type": "string",
                          "nullable": true
                        },
                        "payment_methods": {
                          "type": "object",
                          "additionalProperties": {
                            "type": "number"
                          }
                        },
                        "is_overdue": {
                          "type": "boolean"
                        },
                        "days_overdue": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "order_total",
                        "total_paid",
                        "total_pending",
                        "total_failed",
                        "balance",
                        "status",
                        "payment_count",
                        "completed_payment_count",
                        "last_payment_date",
                        "payment_methods",
                        "is_overdue",
                        "days_overdue"
                      ],
                      "additionalProperties": false
                    },
                    "payment_balance": {
                      "type": "number"
                    },
                    "payment_status": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "customer_id",
                    "delivery_address_id",
                    "source_warehouse_id",
                    "order_date",
                    "scheduled_date",
                    "notes",
                    "status",
                    "total_amount",
                    "tax_amount",
                    "tax_percent",
                    "created_by_user_id",
                    "created_at",
                    "updated_at",
                    "order_type",
                    "service_type",
                    "exchange_empty_qty",
                    "requires_pickup",
                    "customer",
                    "delivery_address",
                    "source_warehouse",
                    "order_lines",
                    "payments",
                    "is_high_value",
                    "days_since_order",
                    "estimated_delivery_window",
                    "risk_level",
                    "payment_summary",
                    "payment_balance",
                    "payment_status"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/orders/{order_id}/calculate-total": {
      "post": {
        "operationId": "orders-calculateTotal",
        "summary": "Calculate order total",
        "description": "Calculate the total amount for an order including tax calculations and line item breakdowns.",
        "tags": [
          "orders"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "subtotal": {
                      "type": "number"
                    },
                    "tax_amount": {
                      "type": "number"
                    },
                    "total_amount": {
                      "type": "number"
                    },
                    "breakdown": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "quantity": {
                            "type": "number"
                          },
                          "unit_price": {
                            "type": "number"
                          },
                          "subtotal": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "quantity",
                          "unit_price",
                          "subtotal"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "subtotal",
                    "tax_amount",
                    "total_amount",
                    "breakdown"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/orders/{order_id}/status": {
      "post": {
        "operationId": "orders-updateStatus",
        "summary": "Update order status",
        "description": "Update order status with inventory management, business rule validation, and automated workflows.",
        "tags": [
          "orders"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "new_status": {
                    "type": "string",
                    "enum": [
                      "draft",
                      "confirmed",
                      "dispatched",
                      "en_route",
                      "delivered",
                      "invoiced",
                      "cancelled",
                      "paid",
                      "completed_no_sale"
                    ]
                  },
                  "scheduled_date": {
                    "type": "string",
                    "format": "date-time",
                    "nullable": true
                  },
                  "reason": {
                    "type": "string"
                  },
                  "metadata": {
                    "type": "object",
                    "additionalProperties": {}
                  }
                },
                "required": [
                  "new_status"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "customer_id": {
                      "type": "string"
                    },
                    "delivery_address_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "source_warehouse_id": {
                      "type": "string"
                    },
                    "order_date": {
                      "type": "string"
                    },
                    "scheduled_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "draft",
                        "confirmed",
                        "dispatched",
                        "en_route",
                        "delivered",
                        "invoiced",
                        "cancelled",
                        "paid",
                        "completed_no_sale"
                      ]
                    },
                    "total_amount": {
                      "type": "number"
                    },
                    "tax_amount": {
                      "type": "number",
                      "nullable": true
                    },
                    "tax_percent": {
                      "type": "number",
                      "nullable": true
                    },
                    "created_by_user_id": {
                      "type": "string"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "order_type": {
                      "type": "string"
                    },
                    "service_type": {
                      "type": "string"
                    },
                    "exchange_empty_qty": {
                      "type": "number"
                    },
                    "requires_pickup": {
                      "type": "boolean"
                    },
                    "customer": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true
                        },
                        "account_status": {
                          "type": "string",
                          "nullable": true
                        },
                        "credit_terms_days": {
                          "type": "number",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "email",
                        "phone",
                        "account_status",
                        "credit_terms_days"
                      ],
                      "additionalProperties": false
                    },
                    "delivery_address": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "line1": {
                          "type": "string"
                        },
                        "line2": {
                          "type": "string",
                          "nullable": true
                        },
                        "city": {
                          "type": "string"
                        },
                        "state": {
                          "type": "string",
                          "nullable": true
                        },
                        "postal_code": {
                          "type": "string",
                          "nullable": true
                        },
                        "country": {
                          "type": "string"
                        },
                        "instructions": {
                          "type": "string",
                          "nullable": true
                        },
                        "latitude": {
                          "type": "number",
                          "nullable": true
                        },
                        "longitude": {
                          "type": "number",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "line1",
                        "line2",
                        "city",
                        "state",
                        "postal_code",
                        "country",
                        "instructions",
                        "latitude",
                        "longitude"
                      ],
                      "additionalProperties": false,
                      "nullable": true
                    },
                    "source_warehouse": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "is_mobile": {
                          "type": "boolean",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "is_mobile"
                      ],
                      "additionalProperties": false
                    },
                    "order_lines": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "unit_price": {
                            "type": "number"
                          },
                          "subtotal": {
                            "type": "number"
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string"
                              },
                              "capacity_kg": {
                                "type": "number",
                                "nullable": true
                              },
                              "tare_weight_kg": {
                                "type": "number",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure",
                              "capacity_kg",
                              "tare_weight_kg"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "product_id",
                          "quantity",
                          "unit_price",
                          "subtotal",
                          "product"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "payments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "amount": {
                            "type": "number"
                          },
                          "payment_method": {
                            "type": "string"
                          },
                          "payment_status": {
                            "type": "string"
                          },
                          "payment_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "transaction_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "reference_number": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "id",
                          "amount",
                          "payment_method",
                          "payment_status",
                          "payment_date",
                          "transaction_id",
                          "reference_number"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "is_high_value": {
                      "type": "boolean"
                    },
                    "days_since_order": {
                      "type": "number"
                    },
                    "estimated_delivery_window": {
                      "type": "string"
                    },
                    "risk_level": {
                      "type": "string",
                      "enum": [
                        "low",
                        "medium",
                        "high"
                      ]
                    },
                    "payment_summary": {
                      "type": "object",
                      "properties": {
                        "order_total": {
                          "type": "number"
                        },
                        "total_paid": {
                          "type": "number"
                        },
                        "total_pending": {
                          "type": "number"
                        },
                        "total_failed": {
                          "type": "number"
                        },
                        "balance": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        },
                        "payment_count": {
                          "type": "number"
                        },
                        "completed_payment_count": {
                          "type": "number"
                        },
                        "last_payment_date": {
                          "type": "string",
                          "nullable": true
                        },
                        "payment_methods": {
                          "type": "object",
                          "additionalProperties": {
                            "type": "number"
                          }
                        },
                        "is_overdue": {
                          "type": "boolean"
                        },
                        "days_overdue": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "order_total",
                        "total_paid",
                        "total_pending",
                        "total_failed",
                        "balance",
                        "status",
                        "payment_count",
                        "completed_payment_count",
                        "last_payment_date",
                        "payment_methods",
                        "is_overdue",
                        "days_overdue"
                      ],
                      "additionalProperties": false
                    },
                    "payment_balance": {
                      "type": "number"
                    },
                    "payment_status": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "customer_id",
                    "delivery_address_id",
                    "source_warehouse_id",
                    "order_date",
                    "scheduled_date",
                    "notes",
                    "status",
                    "total_amount",
                    "tax_amount",
                    "tax_percent",
                    "created_by_user_id",
                    "created_at",
                    "updated_at",
                    "order_type",
                    "service_type",
                    "exchange_empty_qty",
                    "requires_pickup",
                    "customer",
                    "delivery_address",
                    "source_warehouse",
                    "order_lines",
                    "payments",
                    "is_high_value",
                    "days_since_order",
                    "estimated_delivery_window",
                    "risk_level",
                    "payment_summary",
                    "payment_balance",
                    "payment_status"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/orders/{order_id}/update-tax": {
      "post": {
        "operationId": "orders-updateTax",
        "summary": "Update order tax",
        "description": "Update the tax percentage for an order and recalculate totals.",
        "tags": [
          "orders"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "tax_percent": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100
                  }
                },
                "required": [
                  "tax_percent"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "subtotal": {
                      "type": "number"
                    },
                    "tax_percent": {
                      "type": "number"
                    },
                    "tax_amount": {
                      "type": "number"
                    },
                    "total_amount": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "subtotal",
                    "tax_percent",
                    "tax_amount",
                    "total_amount"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/orders/allocate-to-truck": {
      "post": {
        "operationId": "orders-allocateToTruck",
        "summary": "Allocate order to truck",
        "description": "Allocate an order to a specific truck for delivery with capacity validation.",
        "tags": [
          "orders",
          "trucks"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "order_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "truck_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "allocation_date": {
                    "type": "string"
                  },
                  "force_allocation": {
                    "type": "boolean",
                    "default": false
                  }
                },
                "required": [
                  "order_id",
                  "allocation_date"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/orders/{order_id}/convert-visit-to-delivery": {
      "post": {
        "operationId": "orders-convertVisitToDelivery",
        "summary": "Convert visit order to delivery order",
        "description": "Convert a visit order to a delivery order by adding products and quantities",
        "tags": [
          "orders",
          "visit"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "order_lines": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "quantity": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity"
                      ],
                      "additionalProperties": false
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "order_lines"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "order_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "total_amount": {
                      "type": "number"
                    },
                    "products_count": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "success",
                    "message",
                    "order_id",
                    "total_amount",
                    "products_count"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/price-lists": {
      "get": {
        "operationId": "pricing-listPriceLists",
        "summary": "List price lists with filtering and pagination",
        "description": "Retrieve a paginated list of price lists with optional filtering by search text, currency, and status.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "currency_code",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "minLength": 3,
              "maxLength": 3
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "future",
                "expired"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "priceLists": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "currency_code": {
                            "type": "string"
                          },
                          "start_date": {
                            "type": "string"
                          },
                          "end_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "is_default": {
                            "type": "boolean"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "product_count": {
                            "type": "number"
                          },
                          "status": {
                            "type": "string"
                          },
                          "statusInfo": {
                            "type": "object",
                            "properties": {
                              "status": {
                                "type": "string",
                                "enum": [
                                  "active",
                                  "future",
                                  "expired"
                                ]
                              },
                              "daysUntilStart": {
                                "type": "number"
                              },
                              "daysUntilEnd": {
                                "type": "number"
                              }
                            },
                            "required": [
                              "status"
                            ],
                            "additionalProperties": false
                          },
                          "isExpiringSoon": {
                            "type": "boolean"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "description",
                          "currency_code",
                          "start_date",
                          "end_date",
                          "is_default",
                          "created_at",
                          "updated_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "priceLists",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "pricing-createPriceList",
        "summary": "Create new price list",
        "description": "Create a new price list with validation for date ranges and name uniqueness.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "description": {
                    "type": "string"
                  },
                  "currency_code": {
                    "type": "string",
                    "minLength": 3,
                    "maxLength": 3,
                    "default": "KES"
                  },
                  "start_date": {
                    "type": "string"
                  },
                  "end_date": {
                    "type": "string"
                  },
                  "is_default": {
                    "type": "boolean",
                    "default": false
                  }
                },
                "required": [
                  "name",
                  "start_date"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "start_date": {
                      "type": "string"
                    },
                    "end_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "is_default": {
                      "type": "boolean"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "product_count": {
                      "type": "number"
                    },
                    "status": {
                      "type": "string"
                    },
                    "statusInfo": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "active",
                            "future",
                            "expired"
                          ]
                        },
                        "daysUntilStart": {
                          "type": "number"
                        },
                        "daysUntilEnd": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "status"
                      ],
                      "additionalProperties": false
                    },
                    "isExpiringSoon": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "currency_code",
                    "start_date",
                    "end_date",
                    "is_default",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/price-lists/{price_list_id}": {
      "get": {
        "operationId": "pricing-getPriceList",
        "summary": "Get price list by ID",
        "description": "Retrieve detailed information about a specific price list.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "price_list_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "start_date": {
                      "type": "string"
                    },
                    "end_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "is_default": {
                      "type": "boolean"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "product_count": {
                      "type": "number"
                    },
                    "status": {
                      "type": "string"
                    },
                    "statusInfo": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "active",
                            "future",
                            "expired"
                          ]
                        },
                        "daysUntilStart": {
                          "type": "number"
                        },
                        "daysUntilEnd": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "status"
                      ],
                      "additionalProperties": false
                    },
                    "isExpiringSoon": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "currency_code",
                    "start_date",
                    "end_date",
                    "is_default",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/price-lists/{id}": {
      "put": {
        "operationId": "pricing-updatePriceList",
        "summary": "Update price list",
        "description": "Update price list information including name, dates, currency, and default status.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "description": {
                    "type": "string"
                  },
                  "currency_code": {
                    "type": "string",
                    "minLength": 3,
                    "maxLength": 3
                  },
                  "start_date": {
                    "type": "string"
                  },
                  "end_date": {
                    "type": "string"
                  },
                  "is_default": {
                    "type": "boolean"
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "start_date": {
                      "type": "string"
                    },
                    "end_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "is_default": {
                      "type": "boolean"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "product_count": {
                      "type": "number"
                    },
                    "status": {
                      "type": "string"
                    },
                    "statusInfo": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "active",
                            "future",
                            "expired"
                          ]
                        },
                        "daysUntilStart": {
                          "type": "number"
                        },
                        "daysUntilEnd": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "status"
                      ],
                      "additionalProperties": false
                    },
                    "isExpiringSoon": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "currency_code",
                    "start_date",
                    "end_date",
                    "is_default",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/price-lists/{price_list_id}/items": {
      "get": {
        "operationId": "pricing-getPriceListItems",
        "summary": "Get price list items",
        "description": "Retrieve paginated list of items in a specific price list with product details.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "price_list_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "price_list_id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "unit_price": {
                            "type": "number"
                          },
                          "min_qty": {
                            "type": "number",
                            "nullable": true
                          },
                          "surcharge_pct": {
                            "type": "number",
                            "nullable": true
                          },
                          "price_excluding_tax": {
                            "type": "number",
                            "nullable": true
                          },
                          "tax_amount": {
                            "type": "number",
                            "nullable": true
                          },
                          "price_including_tax": {
                            "type": "number",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string"
                              },
                              "tax_category": {
                                "type": "string",
                                "nullable": true
                              },
                              "tax_rate": {
                                "type": "number",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure",
                              "tax_category",
                              "tax_rate"
                            ],
                            "additionalProperties": false
                          },
                          "price_list": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "description": {
                                "type": "string",
                                "nullable": true
                              },
                              "currency_code": {
                                "type": "string"
                              },
                              "start_date": {
                                "type": "string"
                              },
                              "end_date": {
                                "type": "string",
                                "nullable": true
                              },
                              "is_default": {
                                "type": "boolean"
                              },
                              "created_at": {
                                "type": "string"
                              },
                              "updated_at": {
                                "type": "string",
                                "nullable": true
                              },
                              "product_count": {
                                "type": "number"
                              },
                              "status": {
                                "type": "string"
                              },
                              "statusInfo": {
                                "type": "object",
                                "properties": {
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "active",
                                      "future",
                                      "expired"
                                    ]
                                  },
                                  "daysUntilStart": {
                                    "type": "number"
                                  },
                                  "daysUntilEnd": {
                                    "type": "number"
                                  }
                                },
                                "required": [
                                  "status"
                                ],
                                "additionalProperties": false
                              },
                              "isExpiringSoon": {
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "description",
                              "currency_code",
                              "start_date",
                              "end_date",
                              "is_default",
                              "created_at",
                              "updated_at"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "price_list_id",
                          "product_id",
                          "unit_price",
                          "min_qty",
                          "surcharge_pct",
                          "price_excluding_tax",
                          "tax_amount",
                          "price_including_tax",
                          "created_at",
                          "updated_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/price-list-items": {
      "post": {
        "operationId": "pricing-createPriceListItem",
        "summary": "Create price list item",
        "description": "Add a new product to a price list with pricing information.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "price_list_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "product_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "unit_price": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "min_qty": {
                    "type": "integer",
                    "minimum": 1
                  },
                  "surcharge_pct": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100
                  },
                  "price_excluding_tax": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "tax_amount": {
                    "type": "number",
                    "minimum": 0
                  },
                  "price_including_tax": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  }
                },
                "required": [
                  "price_list_id",
                  "product_id",
                  "unit_price"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "price_list_id": {
                      "type": "string"
                    },
                    "product_id": {
                      "type": "string"
                    },
                    "unit_price": {
                      "type": "number"
                    },
                    "min_qty": {
                      "type": "number",
                      "nullable": true
                    },
                    "surcharge_pct": {
                      "type": "number",
                      "nullable": true
                    },
                    "price_excluding_tax": {
                      "type": "number",
                      "nullable": true
                    },
                    "tax_amount": {
                      "type": "number",
                      "nullable": true
                    },
                    "price_including_tax": {
                      "type": "number",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "product": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "sku": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "unit_of_measure": {
                          "type": "string"
                        },
                        "tax_category": {
                          "type": "string",
                          "nullable": true
                        },
                        "tax_rate": {
                          "type": "number",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "sku",
                        "name",
                        "unit_of_measure",
                        "tax_category",
                        "tax_rate"
                      ],
                      "additionalProperties": false
                    },
                    "price_list": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true
                        },
                        "currency_code": {
                          "type": "string"
                        },
                        "start_date": {
                          "type": "string"
                        },
                        "end_date": {
                          "type": "string",
                          "nullable": true
                        },
                        "is_default": {
                          "type": "boolean"
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "updated_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "product_count": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        },
                        "statusInfo": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "active",
                                "future",
                                "expired"
                              ]
                            },
                            "daysUntilStart": {
                              "type": "number"
                            },
                            "daysUntilEnd": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "status"
                          ],
                          "additionalProperties": false
                        },
                        "isExpiringSoon": {
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "description",
                        "currency_code",
                        "start_date",
                        "end_date",
                        "is_default",
                        "created_at",
                        "updated_at"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "id",
                    "price_list_id",
                    "product_id",
                    "unit_price",
                    "min_qty",
                    "surcharge_pct",
                    "price_excluding_tax",
                    "tax_amount",
                    "price_including_tax",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/calculate-final-price": {
      "post": {
        "operationId": "pricing-calculateFinalPrice",
        "summary": "Calculate final price with surcharge",
        "description": "Calculate the final price for a product including any surcharge percentage.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "unitPrice": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "surchargePercent": {
                    "type": "number"
                  }
                },
                "required": [
                  "unitPrice"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "finalPrice": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "finalPrice"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/price-list-status": {
      "get": {
        "operationId": "pricing-getPriceListStatus",
        "summary": "Get price list status",
        "description": "Determine the status of a price list based on start and end dates.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "startDate",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "endDate",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "active",
                        "future",
                        "expired"
                      ]
                    },
                    "daysUntilStart": {
                      "type": "number"
                    },
                    "daysUntilEnd": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "status"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/validate-date-range": {
      "post": {
        "operationId": "pricing-validateDateRange",
        "summary": "Validate date range",
        "description": "Validate that a start and end date range is valid for a price list.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "startDate": {
                    "type": "string"
                  },
                  "endDate": {
                    "type": "string"
                  }
                },
                "required": [
                  "startDate"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "valid": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "valid"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/is-expiring-soon": {
      "get": {
        "operationId": "pricing-isExpiringSoon",
        "summary": "Check if expiring soon",
        "description": "Check if a price list is expiring within a specified number of days.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "endDate",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "not": {}
                },
                {
                  "type": "number"
                }
              ],
              "default": 30
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "expiringSoon": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "expiringSoon"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/product-price/{productId}": {
      "get": {
        "operationId": "pricing-getProductPrice",
        "summary": "Get product price",
        "description": "Get the current price for a specific product, optionally for a specific customer and date.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "customerId",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "unitPrice": {
                      "type": "number"
                    },
                    "surchargePercent": {
                      "type": "number"
                    },
                    "finalPrice": {
                      "type": "number"
                    },
                    "priceListId": {
                      "type": "string"
                    },
                    "priceListName": {
                      "type": "string"
                    },
                    "priceExcludingTax": {
                      "type": "number"
                    },
                    "taxAmount": {
                      "type": "number"
                    },
                    "priceIncludingTax": {
                      "type": "number"
                    },
                    "taxRate": {
                      "type": "number"
                    },
                    "taxCategory": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "unitPrice",
                    "surchargePercent",
                    "finalPrice",
                    "priceListId",
                    "priceListName"
                  ],
                  "additionalProperties": false,
                  "nullable": true
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/product-prices": {
      "post": {
        "operationId": "pricing-getProductPrices",
        "summary": "Get multiple product prices",
        "description": "Get current prices for multiple products, optionally for a specific customer and date.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "productIds": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    }
                  },
                  "customerId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "date": {
                    "type": "string"
                  }
                },
                "required": [
                  "productIds"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object",
                    "properties": {
                      "unitPrice": {
                        "type": "number"
                      },
                      "surchargePercent": {
                        "type": "number"
                      },
                      "finalPrice": {
                        "type": "number"
                      },
                      "priceListId": {
                        "type": "string"
                      },
                      "priceListName": {
                        "type": "string"
                      },
                      "priceExcludingTax": {
                        "type": "number"
                      },
                      "taxAmount": {
                        "type": "number"
                      },
                      "priceIncludingTax": {
                        "type": "number"
                      },
                      "taxRate": {
                        "type": "number"
                      },
                      "taxCategory": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "unitPrice",
                      "surchargePercent",
                      "finalPrice",
                      "priceListId",
                      "priceListName"
                    ],
                    "additionalProperties": false,
                    "nullable": true
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/product/{productId}/price-list-items": {
      "get": {
        "operationId": "pricing-getProductPriceListItems",
        "summary": "Get product price list items",
        "description": "Get all price list items for a specific product across all price lists.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "price_list_id": {
                        "type": "string"
                      },
                      "product_id": {
                        "type": "string"
                      },
                      "unit_price": {
                        "type": "number"
                      },
                      "min_qty": {
                        "type": "number",
                        "nullable": true
                      },
                      "surcharge_pct": {
                        "type": "number",
                        "nullable": true
                      },
                      "price_excluding_tax": {
                        "type": "number",
                        "nullable": true
                      },
                      "tax_amount": {
                        "type": "number",
                        "nullable": true
                      },
                      "price_including_tax": {
                        "type": "number",
                        "nullable": true
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string",
                        "nullable": true
                      },
                      "product": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "sku": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "unit_of_measure": {
                            "type": "string"
                          },
                          "tax_category": {
                            "type": "string",
                            "nullable": true
                          },
                          "tax_rate": {
                            "type": "number",
                            "nullable": true
                          }
                        },
                        "required": [
                          "id",
                          "sku",
                          "name",
                          "unit_of_measure",
                          "tax_category",
                          "tax_rate"
                        ],
                        "additionalProperties": false
                      },
                      "price_list": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "currency_code": {
                            "type": "string"
                          },
                          "start_date": {
                            "type": "string"
                          },
                          "end_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "is_default": {
                            "type": "boolean"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "product_count": {
                            "type": "number"
                          },
                          "status": {
                            "type": "string"
                          },
                          "statusInfo": {
                            "type": "object",
                            "properties": {
                              "status": {
                                "type": "string",
                                "enum": [
                                  "active",
                                  "future",
                                  "expired"
                                ]
                              },
                              "daysUntilStart": {
                                "type": "number"
                              },
                              "daysUntilEnd": {
                                "type": "number"
                              }
                            },
                            "required": [
                              "status"
                            ],
                            "additionalProperties": false
                          },
                          "isExpiringSoon": {
                            "type": "boolean"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "description",
                          "currency_code",
                          "start_date",
                          "end_date",
                          "is_default",
                          "created_at",
                          "updated_at",
                          "status",
                          "statusInfo"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "required": [
                      "id",
                      "price_list_id",
                      "product_id",
                      "unit_price",
                      "min_qty",
                      "surcharge_pct",
                      "price_excluding_tax",
                      "tax_amount",
                      "price_including_tax",
                      "created_at",
                      "updated_at",
                      "price_list"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/calculate-order-totals": {
      "post": {
        "operationId": "pricing-calculateOrderTotals",
        "summary": "Calculate order totals",
        "description": "Calculate subtotal, tax amount, and grand total for an order with line items.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "lines": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "quantity": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "unit_price": {
                          "type": "number",
                          "minimum": 0
                        },
                        "subtotal": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "quantity",
                        "unit_price"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "taxPercent": {
                    "type": "number",
                    "default": 0
                  }
                },
                "required": [
                  "lines"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "subtotal": {
                      "type": "number"
                    },
                    "taxAmount": {
                      "type": "number"
                    },
                    "grandTotal": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "subtotal",
                    "taxAmount",
                    "grandTotal"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/validate-product-pricing": {
      "post": {
        "operationId": "pricing-validateProductPricing",
        "summary": "Validate product pricing",
        "description": "Validate if a requested price for a product is within acceptable ranges.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "productId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "requestedPrice": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "quantity": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "priceListId": {
                    "type": "string",
                    "format": "uuid"
                  }
                },
                "required": [
                  "productId",
                  "requestedPrice",
                  "quantity"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "valid": {
                      "type": "boolean"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "actualPrice": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "valid",
                    "errors"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/active-price-lists": {
      "get": {
        "operationId": "pricing-getActivePriceLists",
        "summary": "Get active price lists",
        "description": "Get all price lists that are currently active for a specific date.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "description": {
                        "type": "string",
                        "nullable": true
                      },
                      "currency_code": {
                        "type": "string"
                      },
                      "start_date": {
                        "type": "string"
                      },
                      "end_date": {
                        "type": "string",
                        "nullable": true
                      },
                      "is_default": {
                        "type": "boolean"
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string",
                        "nullable": true
                      },
                      "product_count": {
                        "type": "number"
                      },
                      "status": {
                        "type": "string"
                      },
                      "statusInfo": {
                        "type": "object",
                        "properties": {
                          "status": {
                            "type": "string",
                            "enum": [
                              "active",
                              "future",
                              "expired"
                            ]
                          },
                          "daysUntilStart": {
                            "type": "number"
                          },
                          "daysUntilEnd": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "status"
                        ],
                        "additionalProperties": false
                      },
                      "isExpiringSoon": {
                        "type": "boolean"
                      }
                    },
                    "required": [
                      "id",
                      "name",
                      "description",
                      "currency_code",
                      "start_date",
                      "end_date",
                      "is_default",
                      "created_at",
                      "updated_at"
                    ],
                    "additionalProperties": false
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/format-currency": {
      "post": {
        "operationId": "pricing-formatCurrency",
        "summary": "Format currency",
        "description": "Format a numeric amount as a currency string.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "amount": {
                    "type": "number"
                  },
                  "currencyCode": {
                    "type": "string",
                    "default": "KES"
                  }
                },
                "required": [
                  "amount"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "formatted": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "formatted"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/price-lists": {
      "get": {
        "operationId": "pricing-list",
        "summary": "List price lists with filtering and pagination",
        "description": "Retrieve a paginated list of price lists with optional filtering by search text, currency, and status.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "currency_code",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "minLength": 3,
              "maxLength": 3
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "future",
                "expired"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "priceLists": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true
                          },
                          "currency_code": {
                            "type": "string"
                          },
                          "start_date": {
                            "type": "string"
                          },
                          "end_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "is_default": {
                            "type": "boolean"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "product_count": {
                            "type": "number"
                          },
                          "status": {
                            "type": "string"
                          },
                          "statusInfo": {
                            "type": "object",
                            "properties": {
                              "status": {
                                "type": "string",
                                "enum": [
                                  "active",
                                  "future",
                                  "expired"
                                ]
                              },
                              "daysUntilStart": {
                                "type": "number"
                              },
                              "daysUntilEnd": {
                                "type": "number"
                              }
                            },
                            "required": [
                              "status"
                            ],
                            "additionalProperties": false
                          },
                          "isExpiringSoon": {
                            "type": "boolean"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "description",
                          "currency_code",
                          "start_date",
                          "end_date",
                          "is_default",
                          "created_at",
                          "updated_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "priceLists",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "pricing-create",
        "summary": "Create new price list",
        "description": "Create a new price list with validation for date ranges and name uniqueness.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "description": {
                    "type": "string"
                  },
                  "currency_code": {
                    "type": "string",
                    "minLength": 3,
                    "maxLength": 3,
                    "default": "KES"
                  },
                  "start_date": {
                    "type": "string"
                  },
                  "end_date": {
                    "type": "string"
                  },
                  "is_default": {
                    "type": "boolean",
                    "default": false
                  }
                },
                "required": [
                  "name",
                  "start_date"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "start_date": {
                      "type": "string"
                    },
                    "end_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "is_default": {
                      "type": "boolean"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "product_count": {
                      "type": "number"
                    },
                    "status": {
                      "type": "string"
                    },
                    "statusInfo": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "active",
                            "future",
                            "expired"
                          ]
                        },
                        "daysUntilStart": {
                          "type": "number"
                        },
                        "daysUntilEnd": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "status"
                      ],
                      "additionalProperties": false
                    },
                    "isExpiringSoon": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "currency_code",
                    "start_date",
                    "end_date",
                    "is_default",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/price-lists/{id}": {
      "get": {
        "operationId": "pricing-getById",
        "summary": "Get price list by ID",
        "description": "Retrieve detailed information about a specific price list.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "start_date": {
                      "type": "string"
                    },
                    "end_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "is_default": {
                      "type": "boolean"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "product_count": {
                      "type": "number"
                    },
                    "status": {
                      "type": "string"
                    },
                    "statusInfo": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "active",
                            "future",
                            "expired"
                          ]
                        },
                        "daysUntilStart": {
                          "type": "number"
                        },
                        "daysUntilEnd": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "status"
                      ],
                      "additionalProperties": false
                    },
                    "isExpiringSoon": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "currency_code",
                    "start_date",
                    "end_date",
                    "is_default",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "put": {
        "operationId": "pricing-update",
        "summary": "Update price list",
        "description": "Update price list information including name, dates, currency, and default status.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "description": {
                    "type": "string"
                  },
                  "currency_code": {
                    "type": "string",
                    "minLength": 3,
                    "maxLength": 3
                  },
                  "start_date": {
                    "type": "string"
                  },
                  "end_date": {
                    "type": "string"
                  },
                  "is_default": {
                    "type": "boolean"
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "start_date": {
                      "type": "string"
                    },
                    "end_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "is_default": {
                      "type": "boolean"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "product_count": {
                      "type": "number"
                    },
                    "status": {
                      "type": "string"
                    },
                    "statusInfo": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "active",
                            "future",
                            "expired"
                          ]
                        },
                        "daysUntilStart": {
                          "type": "number"
                        },
                        "daysUntilEnd": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "status"
                      ],
                      "additionalProperties": false
                    },
                    "isExpiringSoon": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "currency_code",
                    "start_date",
                    "end_date",
                    "is_default",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "delete": {
        "operationId": "pricing-delete",
        "summary": "Delete price list",
        "description": "Delete a price list after validating that it is not referenced by existing orders.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "success"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/price-lists/{id}/set-default": {
      "put": {
        "operationId": "pricing-setDefault",
        "summary": "Set price list as default",
        "description": "Set a specific price list as the default price list for the organization.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string",
                      "nullable": true
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "start_date": {
                      "type": "string"
                    },
                    "end_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "is_default": {
                      "type": "boolean"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "product_count": {
                      "type": "number"
                    },
                    "status": {
                      "type": "string"
                    },
                    "statusInfo": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "active",
                            "future",
                            "expired"
                          ]
                        },
                        "daysUntilStart": {
                          "type": "number"
                        },
                        "daysUntilEnd": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "status"
                      ],
                      "additionalProperties": false
                    },
                    "isExpiringSoon": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "id",
                    "name",
                    "description",
                    "currency_code",
                    "start_date",
                    "end_date",
                    "is_default",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/price-lists/{price_list_id}/items": {
      "get": {
        "operationId": "pricing-getItems",
        "summary": "Get price list items",
        "description": "Retrieve paginated list of items in a specific price list with product details.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "price_list_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "price_list_id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "unit_price": {
                            "type": "number"
                          },
                          "min_qty": {
                            "type": "number",
                            "nullable": true
                          },
                          "surcharge_pct": {
                            "type": "number",
                            "nullable": true
                          },
                          "price_excluding_tax": {
                            "type": "number",
                            "nullable": true
                          },
                          "tax_amount": {
                            "type": "number",
                            "nullable": true
                          },
                          "price_including_tax": {
                            "type": "number",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string"
                              },
                              "tax_category": {
                                "type": "string",
                                "nullable": true
                              },
                              "tax_rate": {
                                "type": "number",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure",
                              "tax_category",
                              "tax_rate"
                            ],
                            "additionalProperties": false
                          },
                          "price_list": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "description": {
                                "type": "string",
                                "nullable": true
                              },
                              "currency_code": {
                                "type": "string"
                              },
                              "start_date": {
                                "type": "string"
                              },
                              "end_date": {
                                "type": "string",
                                "nullable": true
                              },
                              "is_default": {
                                "type": "boolean"
                              },
                              "created_at": {
                                "type": "string"
                              },
                              "updated_at": {
                                "type": "string",
                                "nullable": true
                              },
                              "product_count": {
                                "type": "number"
                              },
                              "status": {
                                "type": "string"
                              },
                              "statusInfo": {
                                "type": "object",
                                "properties": {
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "active",
                                      "future",
                                      "expired"
                                    ]
                                  },
                                  "daysUntilStart": {
                                    "type": "number"
                                  },
                                  "daysUntilEnd": {
                                    "type": "number"
                                  }
                                },
                                "required": [
                                  "status"
                                ],
                                "additionalProperties": false
                              },
                              "isExpiringSoon": {
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "description",
                              "currency_code",
                              "start_date",
                              "end_date",
                              "is_default",
                              "created_at",
                              "updated_at"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "price_list_id",
                          "product_id",
                          "unit_price",
                          "min_qty",
                          "surcharge_pct",
                          "price_excluding_tax",
                          "tax_amount",
                          "price_including_tax",
                          "created_at",
                          "updated_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/price-list-items": {
      "post": {
        "operationId": "pricing-createItem",
        "summary": "Create price list item",
        "description": "Add a new product to a price list with pricing information.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "price_list_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "product_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "unit_price": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "min_qty": {
                    "type": "integer",
                    "minimum": 1
                  },
                  "surcharge_pct": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100
                  },
                  "price_excluding_tax": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "tax_amount": {
                    "type": "number",
                    "minimum": 0
                  },
                  "price_including_tax": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  }
                },
                "required": [
                  "price_list_id",
                  "product_id",
                  "unit_price"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "price_list_id": {
                      "type": "string"
                    },
                    "product_id": {
                      "type": "string"
                    },
                    "unit_price": {
                      "type": "number"
                    },
                    "min_qty": {
                      "type": "number",
                      "nullable": true
                    },
                    "surcharge_pct": {
                      "type": "number",
                      "nullable": true
                    },
                    "price_excluding_tax": {
                      "type": "number",
                      "nullable": true
                    },
                    "tax_amount": {
                      "type": "number",
                      "nullable": true
                    },
                    "price_including_tax": {
                      "type": "number",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "product": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "sku": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "unit_of_measure": {
                          "type": "string"
                        },
                        "tax_category": {
                          "type": "string",
                          "nullable": true
                        },
                        "tax_rate": {
                          "type": "number",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "sku",
                        "name",
                        "unit_of_measure",
                        "tax_category",
                        "tax_rate"
                      ],
                      "additionalProperties": false
                    },
                    "price_list": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true
                        },
                        "currency_code": {
                          "type": "string"
                        },
                        "start_date": {
                          "type": "string"
                        },
                        "end_date": {
                          "type": "string",
                          "nullable": true
                        },
                        "is_default": {
                          "type": "boolean"
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "updated_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "product_count": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        },
                        "statusInfo": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "active",
                                "future",
                                "expired"
                              ]
                            },
                            "daysUntilStart": {
                              "type": "number"
                            },
                            "daysUntilEnd": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "status"
                          ],
                          "additionalProperties": false
                        },
                        "isExpiringSoon": {
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "description",
                        "currency_code",
                        "start_date",
                        "end_date",
                        "is_default",
                        "created_at",
                        "updated_at"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "id",
                    "price_list_id",
                    "product_id",
                    "unit_price",
                    "min_qty",
                    "surcharge_pct",
                    "price_excluding_tax",
                    "tax_amount",
                    "price_including_tax",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/price-list-items/{id}": {
      "put": {
        "operationId": "pricing-updateItem",
        "summary": "Update price list item",
        "description": "Update pricing information for a specific item in a price list.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "unit_price": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "min_qty": {
                    "type": "integer",
                    "minimum": 1
                  },
                  "surcharge_pct": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100
                  },
                  "price_excluding_tax": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "tax_amount": {
                    "type": "number",
                    "minimum": 0
                  },
                  "price_including_tax": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "price_list_id": {
                      "type": "string"
                    },
                    "product_id": {
                      "type": "string"
                    },
                    "unit_price": {
                      "type": "number"
                    },
                    "min_qty": {
                      "type": "number",
                      "nullable": true
                    },
                    "surcharge_pct": {
                      "type": "number",
                      "nullable": true
                    },
                    "price_excluding_tax": {
                      "type": "number",
                      "nullable": true
                    },
                    "tax_amount": {
                      "type": "number",
                      "nullable": true
                    },
                    "price_including_tax": {
                      "type": "number",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "product": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "sku": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "unit_of_measure": {
                          "type": "string"
                        },
                        "tax_category": {
                          "type": "string",
                          "nullable": true
                        },
                        "tax_rate": {
                          "type": "number",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "sku",
                        "name",
                        "unit_of_measure",
                        "tax_category",
                        "tax_rate"
                      ],
                      "additionalProperties": false
                    },
                    "price_list": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true
                        },
                        "currency_code": {
                          "type": "string"
                        },
                        "start_date": {
                          "type": "string"
                        },
                        "end_date": {
                          "type": "string",
                          "nullable": true
                        },
                        "is_default": {
                          "type": "boolean"
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "updated_at": {
                          "type": "string",
                          "nullable": true
                        },
                        "product_count": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        },
                        "statusInfo": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "active",
                                "future",
                                "expired"
                              ]
                            },
                            "daysUntilStart": {
                              "type": "number"
                            },
                            "daysUntilEnd": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "status"
                          ],
                          "additionalProperties": false
                        },
                        "isExpiringSoon": {
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "description",
                        "currency_code",
                        "start_date",
                        "end_date",
                        "is_default",
                        "created_at",
                        "updated_at"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "id",
                    "price_list_id",
                    "product_id",
                    "unit_price",
                    "min_qty",
                    "surcharge_pct",
                    "price_excluding_tax",
                    "tax_amount",
                    "price_including_tax",
                    "created_at",
                    "updated_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "delete": {
        "operationId": "pricing-deleteItem",
        "summary": "Delete price list item",
        "description": "Remove a product from a price list.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "price_list_id": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "price_list_id"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/price-lists/bulk-add": {
      "post": {
        "operationId": "pricing-bulkAddProducts",
        "summary": "Bulk add products to price list",
        "description": "Add multiple products to a price list with various pricing methods including copy from another list, markup, or fixed pricing.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "price_list_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "product_ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    }
                  },
                  "pricing_method": {
                    "type": "string",
                    "enum": [
                      "fixed",
                      "copy_from_list",
                      "markup",
                      "cost_plus"
                    ]
                  },
                  "unit_price": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "source_price_list_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "markup_percentage": {
                    "type": "number"
                  },
                  "min_qty": {
                    "type": "integer",
                    "minimum": 1
                  },
                  "surcharge_pct": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100
                  }
                },
                "required": [
                  "price_list_id",
                  "product_ids",
                  "pricing_method"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "price_list_id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "unit_price": {
                            "type": "number"
                          },
                          "min_qty": {
                            "type": "number",
                            "nullable": true
                          },
                          "surcharge_pct": {
                            "type": "number",
                            "nullable": true
                          },
                          "price_excluding_tax": {
                            "type": "number",
                            "nullable": true
                          },
                          "tax_amount": {
                            "type": "number",
                            "nullable": true
                          },
                          "price_including_tax": {
                            "type": "number",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string"
                              },
                              "tax_category": {
                                "type": "string",
                                "nullable": true
                              },
                              "tax_rate": {
                                "type": "number",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure",
                              "tax_category",
                              "tax_rate"
                            ],
                            "additionalProperties": false
                          },
                          "price_list": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "description": {
                                "type": "string",
                                "nullable": true
                              },
                              "currency_code": {
                                "type": "string"
                              },
                              "start_date": {
                                "type": "string"
                              },
                              "end_date": {
                                "type": "string",
                                "nullable": true
                              },
                              "is_default": {
                                "type": "boolean"
                              },
                              "created_at": {
                                "type": "string"
                              },
                              "updated_at": {
                                "type": "string",
                                "nullable": true
                              },
                              "product_count": {
                                "type": "number"
                              },
                              "status": {
                                "type": "string"
                              },
                              "statusInfo": {
                                "type": "object",
                                "properties": {
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "active",
                                      "future",
                                      "expired"
                                    ]
                                  },
                                  "daysUntilStart": {
                                    "type": "number"
                                  },
                                  "daysUntilEnd": {
                                    "type": "number"
                                  }
                                },
                                "required": [
                                  "status"
                                ],
                                "additionalProperties": false
                              },
                              "isExpiringSoon": {
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "description",
                              "currency_code",
                              "start_date",
                              "end_date",
                              "is_default",
                              "created_at",
                              "updated_at"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "price_list_id",
                          "product_id",
                          "unit_price",
                          "min_qty",
                          "surcharge_pct",
                          "price_excluding_tax",
                          "tax_amount",
                          "price_including_tax",
                          "created_at",
                          "updated_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "successCount": {
                      "type": "number"
                    },
                    "errorCount": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "items",
                    "errors",
                    "successCount",
                    "errorCount"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/stats": {
      "get": {
        "operationId": "pricing-getStats",
        "summary": "Get pricing statistics",
        "description": "Retrieve comprehensive statistics about price lists, products, and pricing coverage.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "total_price_lists": {
                      "type": "number"
                    },
                    "active_price_lists": {
                      "type": "number"
                    },
                    "future_price_lists": {
                      "type": "number"
                    },
                    "expired_price_lists": {
                      "type": "number"
                    },
                    "expiring_soon": {
                      "type": "number"
                    },
                    "products_without_pricing": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "total_price_lists",
                    "active_price_lists",
                    "future_price_lists",
                    "expired_price_lists",
                    "expiring_soon",
                    "products_without_pricing"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/calculate": {
      "post": {
        "operationId": "pricing-calculate",
        "summary": "Calculate dynamic pricing for multiple items",
        "description": "Calculate the final price for multiple products based on their pricing in active price lists.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "customer_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "quantity": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "price_list_id": {
                          "type": "string",
                          "format": "uuid"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "pricing_date": {
                    "type": "string"
                  }
                },
                "required": [
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string"
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "unit_price": {
                            "type": "number"
                          },
                          "surcharge_pct": {
                            "type": "number",
                            "nullable": true
                          },
                          "final_price": {
                            "type": "number"
                          },
                          "subtotal": {
                            "type": "number"
                          },
                          "price_list_id": {
                            "type": "string"
                          },
                          "price_list_name": {
                            "type": "string"
                          },
                          "min_qty": {
                            "type": "number",
                            "nullable": true
                          },
                          "error": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "product_id",
                          "quantity",
                          "unit_price",
                          "surcharge_pct",
                          "final_price",
                          "subtotal",
                          "price_list_id",
                          "price_list_name",
                          "min_qty"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalAmount": {
                      "type": "number"
                    },
                    "currency": {
                      "type": "string"
                    },
                    "pricing_date": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "items",
                    "totalAmount",
                    "currency",
                    "pricing_date"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/price-lists/validate": {
      "post": {
        "operationId": "pricing-validatePriceList",
        "summary": "Validate price list items",
        "description": "Validate the pricing information for multiple items in a price list.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "price_list_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "unit_price": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        }
                      },
                      "required": [
                        "product_id",
                        "unit_price"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "price_list_id",
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "price_list_id": {
                      "type": "string"
                    },
                    "price_list_name": {
                      "type": "string"
                    },
                    "validation_results": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string"
                          },
                          "product_sku": {
                            "type": "string"
                          },
                          "product_name": {
                            "type": "string"
                          },
                          "unit_price": {
                            "type": "number"
                          },
                          "is_valid": {
                            "type": "boolean"
                          },
                          "warnings": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          }
                        },
                        "required": [
                          "product_id",
                          "product_sku",
                          "product_name",
                          "unit_price",
                          "is_valid",
                          "warnings"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "total_items": {
                      "type": "number"
                    },
                    "valid_items": {
                      "type": "number"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "overall_valid": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "price_list_id",
                    "price_list_name",
                    "validation_results",
                    "total_items",
                    "valid_items",
                    "errors",
                    "overall_valid"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/bulk-update": {
      "post": {
        "operationId": "pricing-bulkUpdatePrices",
        "summary": "Bulk update prices for a price list",
        "description": "Update multiple price list items in a single price list with new pricing information.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "price_list_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "updates": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "unit_price": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "min_qty": {
                          "type": "integer",
                          "minimum": 1
                        },
                        "surcharge_pct": {
                          "type": "number",
                          "minimum": 0,
                          "maximum": 100
                        }
                      },
                      "required": [
                        "product_id",
                        "unit_price"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "price_list_id",
                  "updates"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "updated_items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "price_list_id": {
                            "type": "string"
                          },
                          "product_id": {
                            "type": "string"
                          },
                          "unit_price": {
                            "type": "number"
                          },
                          "min_qty": {
                            "type": "number",
                            "nullable": true
                          },
                          "surcharge_pct": {
                            "type": "number",
                            "nullable": true
                          },
                          "price_excluding_tax": {
                            "type": "number",
                            "nullable": true
                          },
                          "tax_amount": {
                            "type": "number",
                            "nullable": true
                          },
                          "price_including_tax": {
                            "type": "number",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "product": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "sku": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "unit_of_measure": {
                                "type": "string"
                              },
                              "tax_category": {
                                "type": "string",
                                "nullable": true
                              },
                              "tax_rate": {
                                "type": "number",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "sku",
                              "name",
                              "unit_of_measure",
                              "tax_category",
                              "tax_rate"
                            ],
                            "additionalProperties": false
                          },
                          "price_list": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "description": {
                                "type": "string",
                                "nullable": true
                              },
                              "currency_code": {
                                "type": "string"
                              },
                              "start_date": {
                                "type": "string"
                              },
                              "end_date": {
                                "type": "string",
                                "nullable": true
                              },
                              "is_default": {
                                "type": "boolean"
                              },
                              "created_at": {
                                "type": "string"
                              },
                              "updated_at": {
                                "type": "string",
                                "nullable": true
                              },
                              "product_count": {
                                "type": "number"
                              },
                              "status": {
                                "type": "string"
                              },
                              "statusInfo": {
                                "type": "object",
                                "properties": {
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "active",
                                      "future",
                                      "expired"
                                    ]
                                  },
                                  "daysUntilStart": {
                                    "type": "number"
                                  },
                                  "daysUntilEnd": {
                                    "type": "number"
                                  }
                                },
                                "required": [
                                  "status"
                                ],
                                "additionalProperties": false
                              },
                              "isExpiringSoon": {
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "description",
                              "currency_code",
                              "start_date",
                              "end_date",
                              "is_default",
                              "created_at",
                              "updated_at"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "required": [
                          "id",
                          "price_list_id",
                          "product_id",
                          "unit_price",
                          "min_qty",
                          "surcharge_pct",
                          "price_excluding_tax",
                          "tax_amount",
                          "price_including_tax",
                          "created_at",
                          "updated_at"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "success_count": {
                      "type": "number"
                    },
                    "error_count": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "updated_items",
                    "errors",
                    "success_count",
                    "error_count"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/{customer_id}/pricing-tiers": {
      "get": {
        "operationId": "pricing-getCustomerPricingTiers",
        "summary": "Get customer pricing tiers",
        "description": "Get pricing tier information and applicable price lists for a specific customer.",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "customer": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "tier": {
                          "type": "string"
                        },
                        "credit_terms_days": {
                          "type": "number",
                          "nullable": true
                        },
                        "payment_terms": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "tier",
                        "credit_terms_days",
                        "payment_terms"
                      ],
                      "additionalProperties": false
                    },
                    "pricing_info": {
                      "type": "object",
                      "properties": {
                        "tier_discount_percentage": {
                          "type": "number"
                        },
                        "applicable_price_lists": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "start_date": {
                                "type": "string"
                              },
                              "end_date": {
                                "type": "string",
                                "nullable": true
                              },
                              "is_default": {
                                "type": "boolean"
                              },
                              "currency_code": {
                                "type": "string"
                              },
                              "description": {
                                "type": "string",
                                "nullable": true
                              },
                              "created_at": {
                                "type": "string"
                              },
                              "updated_at": {
                                "type": "string",
                                "nullable": true
                              }
                            },
                            "required": [
                              "id",
                              "name",
                              "start_date",
                              "end_date",
                              "is_default",
                              "currency_code",
                              "description",
                              "created_at",
                              "updated_at"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "special_pricing_rules": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [
                        "tier_discount_percentage",
                        "applicable_price_lists",
                        "special_pricing_rules"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "customer",
                    "pricing_info"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/calculate-weight-based": {
      "post": {
        "operationId": "pricing-calculateWeightBased",
        "summary": "Calculate weight-based pricing for gas cylinders",
        "description": "Calculate price using weight-based formula: netGasWeight_kg × gasPricePerKg + depositAmount + tax",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "product_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "quantity": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0,
                    "default": 1
                  },
                  "custom_gas_weight_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "custom_price_per_kg": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "customer_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "pricing_date": {
                    "type": "string"
                  }
                },
                "required": [
                  "product_id"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "netGasWeight_kg": {
                      "type": "number"
                    },
                    "gasPricePerKg": {
                      "type": "number"
                    },
                    "gasCharge": {
                      "type": "number"
                    },
                    "depositAmount": {
                      "type": "number"
                    },
                    "taxAmount": {
                      "type": "number"
                    },
                    "totalAmount": {
                      "type": "number"
                    },
                    "product_id": {
                      "type": "string"
                    },
                    "quantity": {
                      "type": "number"
                    },
                    "calculation_date": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "netGasWeight_kg",
                    "gasPricePerKg",
                    "gasCharge",
                    "depositAmount",
                    "taxAmount",
                    "totalAmount"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/deposit-rate/{capacity_l}": {
      "get": {
        "operationId": "pricing-getDepositRate",
        "summary": "Get deposit rate for cylinder capacity",
        "description": "Retrieve the current deposit rate for a specific cylinder capacity",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "capacity_l",
            "in": "path",
            "required": true,
            "schema": {
              "type": "number",
              "exclusiveMinimum": true,
              "minimum": 0
            }
          },
          {
            "name": "currency_code",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "minLength": 3,
              "maxLength": 3,
              "default": "KES"
            }
          },
          {
            "name": "as_of_date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "capacity_l": {
                      "type": "number"
                    },
                    "deposit_amount": {
                      "type": "number"
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "as_of_date": {
                      "type": "string"
                    },
                    "rate_details": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "capacity_l": {
                          "type": "number"
                        },
                        "deposit_amount": {
                          "type": "number"
                        },
                        "currency_code": {
                          "type": "string"
                        },
                        "effective_date": {
                          "type": "string"
                        },
                        "end_date": {
                          "type": "string",
                          "nullable": true
                        },
                        "is_active": {
                          "type": "boolean"
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "updated_at": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "capacity_l",
                        "deposit_amount",
                        "currency_code",
                        "effective_date",
                        "end_date",
                        "is_active",
                        "created_at",
                        "updated_at"
                      ],
                      "additionalProperties": false,
                      "nullable": true
                    }
                  },
                  "required": [
                    "capacity_l",
                    "deposit_amount",
                    "currency_code",
                    "as_of_date",
                    "rate_details"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/calculate-total-with-deposits": {
      "post": {
        "operationId": "pricing-calculateTotalWithDeposits",
        "summary": "Calculate order total including deposits",
        "description": "Calculate comprehensive order total including gas charges, deposits, and taxes for multiple items",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "customer_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "quantity": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "pricing_method": {
                          "type": "string",
                          "enum": [
                            "per_unit",
                            "per_kg",
                            "flat_rate",
                            "tiered"
                          ]
                        },
                        "price_list_id": {
                          "type": "string",
                          "format": "uuid"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "include_deposits": {
                    "type": "boolean",
                    "default": true
                  },
                  "tax_rate": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100
                  },
                  "pricing_date": {
                    "type": "string"
                  }
                },
                "required": [
                  "items"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "customer_id": {
                      "type": "string"
                    },
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string"
                          },
                          "product_name": {
                            "type": "string"
                          },
                          "product_sku": {
                            "type": "string"
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "pricing_method": {
                            "type": "string"
                          },
                          "unit_price": {
                            "type": "number"
                          },
                          "gas_weight_kg": {
                            "type": "number"
                          },
                          "price_per_kg": {
                            "type": "number"
                          },
                          "gas_charge": {
                            "type": "number"
                          },
                          "deposit_amount": {
                            "type": "number"
                          },
                          "subtotal": {
                            "type": "number"
                          },
                          "tax_amount": {
                            "type": "number"
                          },
                          "total": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "product_id",
                          "product_name",
                          "product_sku",
                          "quantity",
                          "pricing_method",
                          "gas_charge",
                          "deposit_amount",
                          "subtotal",
                          "tax_amount",
                          "total"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_gas_charges": {
                          "type": "number"
                        },
                        "total_deposits": {
                          "type": "number"
                        },
                        "subtotal": {
                          "type": "number"
                        },
                        "tax_amount": {
                          "type": "number"
                        },
                        "grand_total": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "total_gas_charges",
                        "total_deposits",
                        "subtotal",
                        "tax_amount",
                        "grand_total"
                      ],
                      "additionalProperties": false
                    },
                    "include_deposits": {
                      "type": "boolean"
                    },
                    "tax_rate": {
                      "type": "number"
                    },
                    "calculation_date": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "customer_id",
                    "items",
                    "summary",
                    "include_deposits",
                    "calculation_date"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/pricing/calculate-final-price-enhanced": {
      "post": {
        "operationId": "pricing-calculateFinalPriceEnhanced",
        "summary": "Calculate final price with enhanced pricing methods",
        "description": "Calculate final price supporting per_unit, per_kg, flat_rate, and tiered pricing methods",
        "tags": [
          "pricing"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "product_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "quantity": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "pricing_method": {
                    "type": "string",
                    "enum": [
                      "per_unit",
                      "per_kg",
                      "flat_rate",
                      "tiered"
                    ]
                  },
                  "unit_price": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "surcharge_percent": {
                    "type": "number"
                  },
                  "customer_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "date": {
                    "type": "string"
                  }
                },
                "required": [
                  "product_id",
                  "quantity",
                  "pricing_method",
                  "unit_price"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "product_id": {
                      "type": "string"
                    },
                    "product_name": {
                      "type": "string"
                    },
                    "product_sku": {
                      "type": "string"
                    },
                    "quantity": {
                      "type": "number"
                    },
                    "pricing_method": {
                      "type": "string"
                    },
                    "unit_price": {
                      "type": "number"
                    },
                    "surcharge_percent": {
                      "type": "number"
                    },
                    "final_price": {
                      "type": "number"
                    },
                    "price_per_unit": {
                      "type": "number"
                    },
                    "calculation_date": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "product_id",
                    "quantity",
                    "pricing_method",
                    "unit_price",
                    "surcharge_percent",
                    "final_price",
                    "price_per_unit",
                    "calculation_date"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deposits/rates": {
      "get": {
        "operationId": "deposits-listRates",
        "summary": "List all cylinder deposit rates",
        "description": "Retrieve a paginated list of deposit rates with filtering options",
        "tags": [
          "deposits"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "capacity_l",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "currency_code",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "minLength": 3,
              "maxLength": 3
            }
          },
          {
            "name": "is_active",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "effective_date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "capacity_l",
                "deposit_amount",
                "effective_date",
                "created_at"
              ],
              "default": "capacity_l"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "rates": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "capacity_l": {
                            "type": "number"
                          },
                          "deposit_amount": {
                            "type": "number"
                          },
                          "currency_code": {
                            "type": "string"
                          },
                          "effective_date": {
                            "type": "string"
                          },
                          "end_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "is_active": {
                            "type": "boolean"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "created_by": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "id",
                          "capacity_l",
                          "deposit_amount",
                          "currency_code",
                          "effective_date",
                          "end_date",
                          "notes",
                          "is_active",
                          "created_at",
                          "updated_at",
                          "created_by"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "rates",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "deposits-createRate",
        "summary": "Create new deposit rate",
        "description": "Create a new deposit rate for a specific cylinder capacity",
        "tags": [
          "deposits"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "capacity_l": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "deposit_amount": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "currency_code": {
                    "type": "string",
                    "minLength": 3,
                    "maxLength": 3,
                    "default": "KES"
                  },
                  "effective_date": {
                    "type": "string"
                  },
                  "end_date": {
                    "type": "string"
                  },
                  "notes": {
                    "type": "string"
                  },
                  "is_active": {
                    "type": "boolean",
                    "default": true
                  }
                },
                "required": [
                  "capacity_l",
                  "deposit_amount",
                  "effective_date"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "capacity_l": {
                      "type": "number"
                    },
                    "deposit_amount": {
                      "type": "number"
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "effective_date": {
                      "type": "string"
                    },
                    "end_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "is_active": {
                      "type": "boolean"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "created_by": {
                      "type": "string",
                      "nullable": true
                    }
                  },
                  "required": [
                    "id",
                    "capacity_l",
                    "deposit_amount",
                    "currency_code",
                    "effective_date",
                    "end_date",
                    "notes",
                    "is_active",
                    "created_at",
                    "updated_at",
                    "created_by"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deposits/rates/{id}": {
      "put": {
        "operationId": "deposits-updateRate",
        "summary": "Update deposit rate",
        "description": "Update an existing deposit rate",
        "tags": [
          "deposits"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "deposit_amount": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "end_date": {
                    "type": "string"
                  },
                  "notes": {
                    "type": "string"
                  },
                  "is_active": {
                    "type": "boolean"
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "capacity_l": {
                      "type": "number"
                    },
                    "deposit_amount": {
                      "type": "number"
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "effective_date": {
                      "type": "string"
                    },
                    "end_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "is_active": {
                      "type": "boolean"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    },
                    "created_by": {
                      "type": "string",
                      "nullable": true
                    }
                  },
                  "required": [
                    "id",
                    "capacity_l",
                    "deposit_amount",
                    "currency_code",
                    "effective_date",
                    "end_date",
                    "notes",
                    "is_active",
                    "created_at",
                    "updated_at",
                    "created_by"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "delete": {
        "operationId": "deposits-deleteRate",
        "summary": "Delete deposit rate",
        "description": "Delete a deposit rate (soft delete by setting end date)",
        "tags": [
          "deposits"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deposits/rates/by-capacity/{capacity}": {
      "get": {
        "operationId": "deposits-getRateByCapacity",
        "summary": "Get deposit rate for specific capacity",
        "description": "Retrieve the current deposit rate for a specific cylinder capacity",
        "tags": [
          "deposits"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "capacity",
            "in": "path",
            "required": true,
            "schema": {
              "type": "number",
              "exclusiveMinimum": true,
              "minimum": 0
            }
          },
          {
            "name": "currency_code",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "minLength": 3,
              "maxLength": 3,
              "default": "KES"
            }
          },
          {
            "name": "as_of_date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "capacity_l": {
                      "type": "number"
                    },
                    "deposit_amount": {
                      "type": "number"
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "effective_date": {
                      "type": "string"
                    },
                    "rate_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "is_default": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "capacity_l",
                    "deposit_amount",
                    "currency_code",
                    "effective_date",
                    "rate_id",
                    "is_default"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deposits/rates/bulk-update": {
      "post": {
        "operationId": "deposits-bulkUpdateRates",
        "summary": "Bulk update deposit rates",
        "description": "Update multiple deposit rates at once with optional end-dating of current rates",
        "tags": [
          "deposits"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "updates": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "capacity_l": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "deposit_amount": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "currency_code": {
                          "type": "string",
                          "minLength": 3,
                          "maxLength": 3,
                          "default": "KES"
                        }
                      },
                      "required": [
                        "capacity_l",
                        "deposit_amount"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "effective_date": {
                    "type": "string"
                  },
                  "notes": {
                    "type": "string"
                  },
                  "end_current_rates": {
                    "type": "boolean",
                    "default": true
                  }
                },
                "required": [
                  "updates",
                  "effective_date"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "created_rates": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "capacity_l": {
                            "type": "number"
                          },
                          "deposit_amount": {
                            "type": "number"
                          },
                          "currency_code": {
                            "type": "string"
                          },
                          "effective_date": {
                            "type": "string"
                          },
                          "end_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "is_active": {
                            "type": "boolean"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          },
                          "created_by": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "id",
                          "capacity_l",
                          "deposit_amount",
                          "currency_code",
                          "effective_date",
                          "end_date",
                          "notes",
                          "is_active",
                          "created_at",
                          "updated_at",
                          "created_by"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "ended_rates": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "format": "uuid"
                      }
                    },
                    "success_count": {
                      "type": "number"
                    },
                    "error_count": {
                      "type": "number"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "created_rates",
                    "ended_rates",
                    "success_count",
                    "error_count",
                    "errors"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/{customer_id}/deposits/balance": {
      "get": {
        "operationId": "deposits-getCustomerBalance",
        "summary": "Get customer deposit balance",
        "description": "Retrieve the current deposit balance for a customer with optional cylinder breakdown",
        "tags": [
          "deposits",
          "customers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "include_details",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "customer_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "customer_name": {
                      "type": "string"
                    },
                    "total_deposit_balance": {
                      "type": "number"
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "last_updated": {
                      "type": "string"
                    },
                    "cylinder_breakdown": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "capacity_l": {
                            "type": "number"
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "unit_deposit": {
                            "type": "number"
                          },
                          "total_deposit": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "capacity_l",
                          "quantity",
                          "unit_deposit",
                          "total_deposit"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "pending_refunds": {
                      "type": "number"
                    },
                    "available_for_refund": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "customer_id",
                    "customer_name",
                    "total_deposit_balance",
                    "currency_code",
                    "last_updated",
                    "pending_refunds",
                    "available_for_refund"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/{customer_id}/deposits/history": {
      "get": {
        "operationId": "deposits-getCustomerHistory",
        "summary": "Get customer deposit history",
        "description": "Retrieve the deposit transaction history for a customer with filtering and pagination",
        "tags": [
          "deposits",
          "customers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          },
          {
            "name": "transaction_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "charge",
                "refund",
                "adjustment",
                "all"
              ],
              "default": "all"
            }
          },
          {
            "name": "from_date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "to_date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "transaction_date",
                "amount",
                "transaction_type"
              ],
              "default": "transaction_date"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "customer_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "customer_name": {
                      "type": "string"
                    },
                    "transactions": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "customer_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "transaction_type": {
                            "type": "string",
                            "enum": [
                              "charge",
                              "refund",
                              "adjustment"
                            ]
                          },
                          "amount": {
                            "type": "number"
                          },
                          "currency_code": {
                            "type": "string"
                          },
                          "transaction_date": {
                            "type": "string"
                          },
                          "order_id": {
                            "type": "string",
                            "format": "uuid",
                            "nullable": true
                          },
                          "notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_by": {
                            "type": "string",
                            "nullable": true
                          },
                          "is_voided": {
                            "type": "boolean"
                          },
                          "voided_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "voided_by": {
                            "type": "string",
                            "nullable": true
                          },
                          "void_reason": {
                            "type": "string",
                            "nullable": true
                          },
                          "cylinder_details": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "product_id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "product_name": {
                                  "type": "string"
                                },
                                "capacity_l": {
                                  "type": "number"
                                },
                                "quantity": {
                                  "type": "number"
                                },
                                "unit_deposit": {
                                  "type": "number"
                                },
                                "condition": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "product_id",
                                "product_name",
                                "capacity_l",
                                "quantity",
                                "unit_deposit",
                                "condition"
                              ],
                              "additionalProperties": false
                            }
                          }
                        },
                        "required": [
                          "id",
                          "customer_id",
                          "transaction_type",
                          "amount",
                          "currency_code",
                          "transaction_date",
                          "order_id",
                          "notes",
                          "created_by",
                          "is_voided",
                          "voided_at",
                          "voided_by",
                          "void_reason",
                          "cylinder_details"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_charged": {
                          "type": "number"
                        },
                        "total_refunded": {
                          "type": "number"
                        },
                        "total_adjustments": {
                          "type": "number"
                        },
                        "current_balance": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "total_charged",
                        "total_refunded",
                        "total_adjustments",
                        "current_balance"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "customer_id",
                    "customer_name",
                    "transactions",
                    "totalCount",
                    "totalPages",
                    "currentPage",
                    "summary"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/{customer_id}/deposits/charge": {
      "post": {
        "operationId": "deposits-chargeCustomer",
        "summary": "Charge deposit to customer",
        "description": "Charge cylinder deposits to a customer account when cylinders are delivered",
        "tags": [
          "deposits",
          "customers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "cylinders": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "quantity": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "capacity_l": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "unit_deposit": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity",
                        "capacity_l"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "order_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "notes": {
                    "type": "string"
                  },
                  "override_reason": {
                    "type": "string"
                  }
                },
                "required": [
                  "cylinders"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "transaction_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "customer_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "total_charged": {
                      "type": "number"
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "new_balance": {
                      "type": "number"
                    },
                    "cylinders_charged": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "product_name": {
                            "type": "string"
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "capacity_l": {
                            "type": "number"
                          },
                          "unit_deposit": {
                            "type": "number"
                          },
                          "total_deposit": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "product_id",
                          "product_name",
                          "quantity",
                          "capacity_l",
                          "unit_deposit",
                          "total_deposit"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "order_id": {
                      "type": "string",
                      "format": "uuid",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "transaction_id",
                    "customer_id",
                    "total_charged",
                    "currency_code",
                    "new_balance",
                    "cylinders_charged",
                    "order_id",
                    "created_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/{customer_id}/deposits/refund": {
      "post": {
        "operationId": "deposits-refundCustomer",
        "summary": "Refund deposit to customer",
        "description": "Process cylinder deposit refunds when cylinders are returned, with condition-based deductions",
        "tags": [
          "deposits",
          "customers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "cylinders": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "quantity": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "capacity_l": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "condition": {
                          "type": "string",
                          "enum": [
                            "good",
                            "damaged",
                            "missing"
                          ],
                          "default": "good"
                        },
                        "damage_percentage": {
                          "type": "number",
                          "minimum": 0,
                          "maximum": 100
                        },
                        "serial_numbers": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity",
                        "capacity_l"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "order_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "notes": {
                    "type": "string"
                  },
                  "refund_method": {
                    "type": "string",
                    "enum": [
                      "credit",
                      "cash",
                      "bank_transfer"
                    ],
                    "default": "credit"
                  }
                },
                "required": [
                  "cylinders"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "transaction_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "customer_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "total_refunded": {
                      "type": "number"
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "new_balance": {
                      "type": "number"
                    },
                    "cylinders_refunded": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "product_name": {
                            "type": "string"
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "capacity_l": {
                            "type": "number"
                          },
                          "condition": {
                            "type": "string"
                          },
                          "unit_refund": {
                            "type": "number"
                          },
                          "total_refund": {
                            "type": "number"
                          },
                          "damage_deduction": {
                            "type": "number",
                            "nullable": true
                          }
                        },
                        "required": [
                          "product_id",
                          "product_name",
                          "quantity",
                          "capacity_l",
                          "condition",
                          "unit_refund",
                          "total_refund",
                          "damage_deduction"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "refund_method": {
                      "type": "string"
                    },
                    "order_id": {
                      "type": "string",
                      "format": "uuid",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "transaction_id",
                    "customer_id",
                    "total_refunded",
                    "currency_code",
                    "new_balance",
                    "cylinders_refunded",
                    "refund_method",
                    "order_id",
                    "created_at"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/customers/{customer_id}/deposits/cylinders": {
      "get": {
        "operationId": "deposits-getCustomerCylinders",
        "summary": "Get customer cylinders",
        "description": "Retrieve information about cylinders currently held by a customer",
        "tags": [
          "deposits",
          "customers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "customer_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "include_history",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          },
          {
            "name": "group_by_capacity",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "customer_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "customer_name": {
                      "type": "string"
                    },
                    "total_cylinders": {
                      "type": "number"
                    },
                    "total_deposit_value": {
                      "type": "number"
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "cylinders_by_capacity": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "capacity_l": {
                            "type": "number"
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "unit_deposit": {
                            "type": "number"
                          },
                          "total_deposit": {
                            "type": "number"
                          },
                          "last_charged_date": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "capacity_l",
                          "quantity",
                          "unit_deposit",
                          "total_deposit",
                          "last_charged_date"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "recent_activity": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "date": {
                            "type": "string"
                          },
                          "type": {
                            "type": "string"
                          },
                          "capacity_l": {
                            "type": "number"
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "amount": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "date",
                          "type",
                          "capacity_l",
                          "quantity",
                          "amount"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "customer_id",
                    "customer_name",
                    "total_cylinders",
                    "total_deposit_value",
                    "currency_code",
                    "cylinders_by_capacity"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deposits/transactions": {
      "get": {
        "operationId": "deposits-listTransactions",
        "summary": "List deposit transactions",
        "description": "Retrieve a paginated list of all deposit transactions with comprehensive filtering",
        "tags": [
          "deposits"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          },
          {
            "name": "customer_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "transaction_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "charge",
                "refund",
                "adjustment"
              ]
            }
          },
          {
            "name": "from_date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "to_date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "min_amount",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "max_amount",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "currency_code",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "minLength": 3,
              "maxLength": 3
            }
          },
          {
            "name": "include_voided",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          },
          {
            "name": "sort_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "transaction_date",
                "amount",
                "customer_name"
              ],
              "default": "transaction_date"
            }
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "transactions": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "customer_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "transaction_type": {
                            "type": "string",
                            "enum": [
                              "charge",
                              "refund",
                              "adjustment"
                            ]
                          },
                          "amount": {
                            "type": "number"
                          },
                          "currency_code": {
                            "type": "string"
                          },
                          "transaction_date": {
                            "type": "string"
                          },
                          "order_id": {
                            "type": "string",
                            "format": "uuid",
                            "nullable": true
                          },
                          "notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_by": {
                            "type": "string",
                            "nullable": true
                          },
                          "is_voided": {
                            "type": "boolean"
                          },
                          "voided_at": {
                            "type": "string",
                            "nullable": true
                          },
                          "voided_by": {
                            "type": "string",
                            "nullable": true
                          },
                          "void_reason": {
                            "type": "string",
                            "nullable": true
                          },
                          "cylinder_details": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "product_id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "product_name": {
                                  "type": "string"
                                },
                                "capacity_l": {
                                  "type": "number"
                                },
                                "quantity": {
                                  "type": "number"
                                },
                                "unit_deposit": {
                                  "type": "number"
                                },
                                "condition": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "product_id",
                                "product_name",
                                "capacity_l",
                                "quantity",
                                "unit_deposit",
                                "condition"
                              ],
                              "additionalProperties": false
                            }
                          }
                        },
                        "required": [
                          "id",
                          "customer_id",
                          "transaction_type",
                          "amount",
                          "currency_code",
                          "transaction_date",
                          "order_id",
                          "notes",
                          "created_by",
                          "is_voided",
                          "voided_at",
                          "voided_by",
                          "void_reason",
                          "cylinder_details"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_charges": {
                          "type": "number"
                        },
                        "total_refunds": {
                          "type": "number"
                        },
                        "total_adjustments": {
                          "type": "number"
                        },
                        "net_deposits": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "total_charges",
                        "total_refunds",
                        "total_adjustments",
                        "net_deposits"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "transactions",
                    "totalCount",
                    "totalPages",
                    "currentPage",
                    "summary"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deposits/transactions/calculate-refund": {
      "post": {
        "operationId": "deposits-calculateRefund",
        "summary": "Calculate deposit refund",
        "description": "Calculate the refund amount for cylinder returns based on condition and depreciation",
        "tags": [
          "deposits"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "customer_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "cylinders": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "quantity": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "capacity_l": {
                          "type": "number",
                          "exclusiveMinimum": true,
                          "minimum": 0
                        },
                        "condition": {
                          "type": "string",
                          "enum": [
                            "good",
                            "damaged",
                            "missing"
                          ],
                          "default": "good"
                        },
                        "damage_percentage": {
                          "type": "number",
                          "minimum": 0,
                          "maximum": 100
                        },
                        "days_held": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity",
                        "capacity_l"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "apply_depreciation": {
                    "type": "boolean",
                    "default": false
                  },
                  "depreciation_rate_per_year": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100
                  }
                },
                "required": [
                  "customer_id",
                  "cylinders"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "customer_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "total_refund_amount": {
                      "type": "number"
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "cylinder_calculations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "product_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "product_name": {
                            "type": "string"
                          },
                          "capacity_l": {
                            "type": "number"
                          },
                          "quantity": {
                            "type": "number"
                          },
                          "original_deposit": {
                            "type": "number"
                          },
                          "condition": {
                            "type": "string"
                          },
                          "damage_deduction": {
                            "type": "number"
                          },
                          "depreciation_deduction": {
                            "type": "number"
                          },
                          "refund_amount": {
                            "type": "number"
                          },
                          "refund_percentage": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "product_id",
                          "product_name",
                          "capacity_l",
                          "quantity",
                          "original_deposit",
                          "condition",
                          "damage_deduction",
                          "depreciation_deduction",
                          "refund_amount",
                          "refund_percentage"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "deductions_summary": {
                      "type": "object",
                      "properties": {
                        "damage_deductions": {
                          "type": "number"
                        },
                        "depreciation_deductions": {
                          "type": "number"
                        },
                        "total_deductions": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "damage_deductions",
                        "depreciation_deductions",
                        "total_deductions"
                      ],
                      "additionalProperties": false
                    },
                    "eligibility": {
                      "type": "object",
                      "properties": {
                        "is_eligible": {
                          "type": "boolean"
                        },
                        "reasons": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [
                        "is_eligible",
                        "reasons"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "customer_id",
                    "total_refund_amount",
                    "currency_code",
                    "cylinder_calculations",
                    "deductions_summary",
                    "eligibility"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deposits/validate-rate": {
      "post": {
        "operationId": "deposits-validateRate",
        "summary": "Validate deposit rate",
        "description": "Validate a deposit rate for conflicts and business rules",
        "tags": [
          "deposits",
          "validation"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "capacity_l": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "deposit_amount": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "currency_code": {
                    "type": "string",
                    "minLength": 3,
                    "maxLength": 3,
                    "default": "KES"
                  },
                  "effective_date": {
                    "type": "string"
                  },
                  "check_conflicts": {
                    "type": "boolean",
                    "default": true
                  }
                },
                "required": [
                  "capacity_l",
                  "deposit_amount",
                  "effective_date"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "is_valid": {
                      "type": "boolean"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "conflicts": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "existing_rate_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "capacity_l": {
                            "type": "number"
                          },
                          "effective_date": {
                            "type": "string"
                          },
                          "end_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "conflict_type": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "existing_rate_id",
                          "capacity_l",
                          "effective_date",
                          "end_date",
                          "conflict_type"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "is_valid",
                    "errors",
                    "warnings",
                    "conflicts"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deposits/validate-refund": {
      "post": {
        "operationId": "deposits-validateRefund",
        "summary": "Validate deposit refund",
        "description": "Validate if a customer is eligible for a deposit refund",
        "tags": [
          "deposits",
          "validation"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "customer_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "cylinder_count": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "capacity_l": {
                    "type": "number",
                    "exclusiveMinimum": true,
                    "minimum": 0
                  },
                  "check_balance": {
                    "type": "boolean",
                    "default": true
                  }
                },
                "required": [
                  "customer_id",
                  "cylinder_count",
                  "capacity_l"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "is_eligible": {
                      "type": "boolean"
                    },
                    "customer_balance": {
                      "type": "number"
                    },
                    "requested_refund": {
                      "type": "number"
                    },
                    "available_cylinders": {
                      "type": "number"
                    },
                    "validation_errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "validation_warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "is_eligible",
                    "customer_balance",
                    "requested_refund",
                    "available_cylinders",
                    "validation_errors",
                    "validation_warnings"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deposits/adjust": {
      "post": {
        "operationId": "deposits-adjustDeposit",
        "summary": "Adjust customer deposit",
        "description": "Manually adjust a customer deposit balance with proper authorization",
        "tags": [
          "deposits"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "customer_id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "adjustment_amount": {
                    "type": "number"
                  },
                  "currency_code": {
                    "type": "string",
                    "minLength": 3,
                    "maxLength": 3,
                    "default": "KES"
                  },
                  "reason": {
                    "type": "string"
                  },
                  "reference_number": {
                    "type": "string"
                  },
                  "approved_by": {
                    "type": "string"
                  }
                },
                "required": [
                  "customer_id",
                  "adjustment_amount",
                  "reason"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "transaction_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "customer_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "adjustment_amount": {
                      "type": "number"
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "previous_balance": {
                      "type": "number"
                    },
                    "new_balance": {
                      "type": "number"
                    },
                    "reason": {
                      "type": "string"
                    },
                    "reference_number": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "created_by": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "transaction_id",
                    "customer_id",
                    "adjustment_amount",
                    "currency_code",
                    "previous_balance",
                    "new_balance",
                    "reason",
                    "reference_number",
                    "created_at",
                    "created_by"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deposits/audit-trail/{transaction_id}": {
      "get": {
        "operationId": "deposits-getAuditTrail",
        "summary": "Get deposit audit trail",
        "description": "Retrieve the complete audit trail for a deposit transaction",
        "tags": [
          "deposits"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "transaction_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "include_related",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "transaction_id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "transaction_type": {
                      "type": "string"
                    },
                    "amount": {
                      "type": "number"
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "created_by": {
                      "type": "string"
                    },
                    "audit_entries": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "action": {
                            "type": "string"
                          },
                          "field_name": {
                            "type": "string",
                            "nullable": true
                          },
                          "old_value": {
                            "type": "string",
                            "nullable": true
                          },
                          "new_value": {
                            "type": "string",
                            "nullable": true
                          },
                          "changed_at": {
                            "type": "string"
                          },
                          "changed_by": {
                            "type": "string"
                          },
                          "ip_address": {
                            "type": "string",
                            "nullable": true
                          },
                          "user_agent": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "id",
                          "action",
                          "field_name",
                          "old_value",
                          "new_value",
                          "changed_at",
                          "changed_by",
                          "ip_address",
                          "user_agent"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "related_transactions": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "type": {
                            "type": "string"
                          },
                          "amount": {
                            "type": "number"
                          },
                          "created_at": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "type",
                          "amount",
                          "created_at"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "transaction_id",
                    "transaction_type",
                    "amount",
                    "currency_code",
                    "created_at",
                    "created_by",
                    "audit_entries"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deposits/reports/summary": {
      "get": {
        "operationId": "deposits-getSummaryReport",
        "summary": "Get deposit summary report",
        "description": "Generate a summary report of deposit transactions for a specified period",
        "tags": [
          "deposits",
          "reports"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "from_date",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "to_date",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "group_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "customer",
                "capacity",
                "month",
                "transaction_type"
              ],
              "default": "transaction_type"
            }
          },
          {
            "name": "currency_code",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "minLength": 3,
              "maxLength": 3
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "period": {
                      "type": "object",
                      "properties": {
                        "from_date": {
                          "type": "string"
                        },
                        "to_date": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "from_date",
                        "to_date"
                      ],
                      "additionalProperties": false
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_charges": {
                          "type": "number"
                        },
                        "total_refunds": {
                          "type": "number"
                        },
                        "total_adjustments": {
                          "type": "number"
                        },
                        "net_change": {
                          "type": "number"
                        },
                        "ending_balance": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "total_charges",
                        "total_refunds",
                        "total_adjustments",
                        "net_change",
                        "ending_balance"
                      ],
                      "additionalProperties": false
                    },
                    "breakdown": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "group": {
                            "type": "string"
                          },
                          "charges": {
                            "type": "number"
                          },
                          "refunds": {
                            "type": "number"
                          },
                          "adjustments": {
                            "type": "number"
                          },
                          "net_change": {
                            "type": "number"
                          },
                          "transaction_count": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "group",
                          "charges",
                          "refunds",
                          "adjustments",
                          "net_change",
                          "transaction_count"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "currency_code": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "period",
                    "summary",
                    "breakdown",
                    "currency_code"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/deposits/reports/outstanding": {
      "get": {
        "operationId": "deposits-getOutstandingReport",
        "summary": "Get outstanding deposits report",
        "description": "Generate a report of outstanding cylinder deposits by customer",
        "tags": [
          "deposits",
          "reports"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "as_of_date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "min_days_outstanding",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "customer_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "group_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "customer",
                "capacity",
                "age"
              ],
              "default": "customer"
            }
          },
          {
            "name": "include_zero_balance",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "as_of_date": {
                      "type": "string"
                    },
                    "total_outstanding": {
                      "type": "number"
                    },
                    "currency_code": {
                      "type": "string"
                    },
                    "customer_count": {
                      "type": "number"
                    },
                    "cylinder_count": {
                      "type": "number"
                    },
                    "breakdown": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "group": {
                            "type": "string"
                          },
                          "outstanding_amount": {
                            "type": "number"
                          },
                          "customer_count": {
                            "type": "number"
                          },
                          "cylinder_count": {
                            "type": "number"
                          },
                          "average_days_outstanding": {
                            "type": "number"
                          },
                          "oldest_deposit_date": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "group",
                          "outstanding_amount",
                          "customer_count",
                          "cylinder_count",
                          "average_days_outstanding",
                          "oldest_deposit_date"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "top_customers": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "customer_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "customer_name": {
                            "type": "string"
                          },
                          "outstanding_amount": {
                            "type": "number"
                          },
                          "cylinder_count": {
                            "type": "number"
                          },
                          "oldest_deposit_date": {
                            "type": "string"
                          },
                          "days_outstanding": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "customer_id",
                          "customer_name",
                          "outstanding_amount",
                          "cylinder_count",
                          "oldest_deposit_date",
                          "days_outstanding"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "as_of_date",
                    "total_outstanding",
                    "currency_code",
                    "customer_count",
                    "cylinder_count",
                    "breakdown",
                    "top_customers"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/users": {
      "get": {
        "operationId": "users-list",
        "summary": "List users",
        "description": "Get a list of users with filtering options",
        "tags": [
          "users"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "role",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "admin",
                "driver",
                "user"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "users": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "auth_user_id": {
                            "type": "string",
                            "format": "uuid",
                            "nullable": true
                          },
                          "email": {
                            "type": "string",
                            "format": "email"
                          },
                          "name": {
                            "type": "string"
                          },
                          "role": {
                            "type": "string",
                            "enum": [
                              "admin",
                              "driver",
                              "user"
                            ]
                          },
                          "active": {
                            "type": "boolean"
                          },
                          "phone": {
                            "type": "string",
                            "nullable": true
                          },
                          "license_number": {
                            "type": "string",
                            "nullable": true
                          },
                          "hire_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "emergency_contact": {
                            "type": "string",
                            "nullable": true
                          },
                          "emergency_phone": {
                            "type": "string",
                            "nullable": true
                          },
                          "notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "employee_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "department": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "auth_user_id",
                          "email",
                          "name",
                          "role",
                          "active"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "users",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "post": {
        "operationId": "users-create",
        "summary": "Create user",
        "description": "Create a new user account using the proper auth registration flow",
        "tags": [
          "users"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "admin",
                      "driver",
                      "user"
                    ],
                    "default": "user"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "license_number": {
                    "type": "string"
                  },
                  "hire_date": {
                    "type": "string"
                  },
                  "emergency_contact": {
                    "type": "string"
                  },
                  "emergency_phone": {
                    "type": "string"
                  },
                  "notes": {
                    "type": "string"
                  },
                  "employee_id": {
                    "type": "string"
                  },
                  "department": {
                    "type": "string"
                  }
                },
                "required": [
                  "email",
                  "name"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "auth_user_id": {
                      "type": "string",
                      "format": "uuid",
                      "nullable": true
                    },
                    "email": {
                      "type": "string",
                      "format": "email"
                    },
                    "name": {
                      "type": "string"
                    },
                    "role": {
                      "type": "string",
                      "enum": [
                        "admin",
                        "driver",
                        "user"
                      ]
                    },
                    "active": {
                      "type": "boolean"
                    },
                    "phone": {
                      "type": "string",
                      "nullable": true
                    },
                    "license_number": {
                      "type": "string",
                      "nullable": true
                    },
                    "hire_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "emergency_contact": {
                      "type": "string",
                      "nullable": true
                    },
                    "emergency_phone": {
                      "type": "string",
                      "nullable": true
                    },
                    "notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "employee_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "department": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "auth_user_id",
                    "email",
                    "name",
                    "role",
                    "active"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/users/drivers": {
      "get": {
        "operationId": "users-getDrivers",
        "summary": "Get drivers",
        "description": "Get a list of users with driver role",
        "tags": [
          "users",
          "drivers"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "active",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "available",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 1000,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "drivers": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "auth_user_id": {
                            "type": "string",
                            "format": "uuid",
                            "nullable": true
                          },
                          "email": {
                            "type": "string",
                            "format": "email"
                          },
                          "name": {
                            "type": "string"
                          },
                          "role": {
                            "type": "string",
                            "enum": [
                              "admin",
                              "driver",
                              "user"
                            ]
                          },
                          "active": {
                            "type": "boolean"
                          },
                          "phone": {
                            "type": "string",
                            "nullable": true
                          },
                          "license_number": {
                            "type": "string",
                            "nullable": true
                          },
                          "hire_date": {
                            "type": "string",
                            "nullable": true
                          },
                          "emergency_contact": {
                            "type": "string",
                            "nullable": true
                          },
                          "emergency_phone": {
                            "type": "string",
                            "nullable": true
                          },
                          "notes": {
                            "type": "string",
                            "nullable": true
                          },
                          "employee_id": {
                            "type": "string",
                            "nullable": true
                          },
                          "department": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "id",
                          "auth_user_id",
                          "email",
                          "name",
                          "role",
                          "active"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "totalPages": {
                      "type": "number"
                    },
                    "currentPage": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "drivers",
                    "totalCount",
                    "totalPages",
                    "currentPage"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/users/validate": {
      "post": {
        "operationId": "users-validate",
        "summary": "Validate user data",
        "description": "Validate user data for duplicates",
        "tags": [
          "users",
          "validation"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "employee_id": {
                    "type": "string"
                  },
                  "exclude_id": {
                    "type": "string",
                    "format": "uuid"
                  }
                },
                "required": [
                  "email"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "valid": {
                      "type": "boolean"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "warnings": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "valid",
                    "errors",
                    "warnings"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/users/validate-email": {
      "post": {
        "operationId": "users-validateEmail",
        "summary": "Validate email exists",
        "description": "Check if user email exists in the system",
        "tags": [
          "users",
          "password-reset"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  }
                },
                "required": [
                  "email"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "exists": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "user_name": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "exists",
                    "message"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/users/reset-password-simple": {
      "post": {
        "operationId": "users-resetPasswordSimple",
        "summary": "Reset password (simple)",
        "description": "Reset user password after validating email exists (no token required)",
        "tags": [
          "users",
          "password-reset"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8,
                    "allOf": [
                      {
                        "pattern": "[A-Z]"
                      },
                      {
                        "pattern": "[a-z]"
                      },
                      {
                        "pattern": "\\d"
                      },
                      {
                        "pattern": "[!@#$%^&*(),.?\":{}|<>]"
                      }
                    ]
                  },
                  "confirm_password": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "email",
                  "password",
                  "confirm_password"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/users/{user_id}": {
      "get": {
        "operationId": "users-getById",
        "summary": "Get user by ID",
        "description": "Get a single user by their ID",
        "tags": [
          "users"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "auth_user_id": {
                      "type": "string",
                      "format": "uuid",
                      "nullable": true
                    },
                    "email": {
                      "type": "string",
                      "format": "email"
                    },
                    "name": {
                      "type": "string"
                    },
                    "role": {
                      "type": "string",
                      "enum": [
                        "admin",
                        "driver",
                        "user"
                      ]
                    },
                    "active": {
                      "type": "boolean"
                    },
                    "phone": {
                      "type": "string",
                      "nullable": true
                    },
                    "license_number": {
                      "type": "string",
                      "nullable": true
                    },
                    "hire_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "emergency_contact": {
                      "type": "string",
                      "nullable": true
                    },
                    "emergency_phone": {
                      "type": "string",
                      "nullable": true
                    },
                    "notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "employee_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "department": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "auth_user_id",
                    "email",
                    "name",
                    "role",
                    "active"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      },
      "delete": {
        "operationId": "users-delete",
        "summary": "Delete user",
        "description": "Delete or deactivate a user account",
        "tags": [
          "users"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/users/{id}": {
      "put": {
        "operationId": "users-update",
        "summary": "Update user",
        "description": "Update user information",
        "tags": [
          "users"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "admin",
                      "driver",
                      "user"
                    ]
                  },
                  "phone": {
                    "type": "string"
                  },
                  "license_number": {
                    "type": "string"
                  },
                  "hire_date": {
                    "type": "string"
                  },
                  "emergency_contact": {
                    "type": "string"
                  },
                  "emergency_phone": {
                    "type": "string"
                  },
                  "notes": {
                    "type": "string"
                  },
                  "employee_id": {
                    "type": "string"
                  },
                  "department": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "auth_user_id": {
                      "type": "string",
                      "format": "uuid",
                      "nullable": true
                    },
                    "email": {
                      "type": "string",
                      "format": "email"
                    },
                    "name": {
                      "type": "string"
                    },
                    "role": {
                      "type": "string",
                      "enum": [
                        "admin",
                        "driver",
                        "user"
                      ]
                    },
                    "active": {
                      "type": "boolean"
                    },
                    "phone": {
                      "type": "string",
                      "nullable": true
                    },
                    "license_number": {
                      "type": "string",
                      "nullable": true
                    },
                    "hire_date": {
                      "type": "string",
                      "nullable": true
                    },
                    "emergency_contact": {
                      "type": "string",
                      "nullable": true
                    },
                    "emergency_phone": {
                      "type": "string",
                      "nullable": true
                    },
                    "notes": {
                      "type": "string",
                      "nullable": true
                    },
                    "employee_id": {
                      "type": "string",
                      "nullable": true
                    },
                    "department": {
                      "type": "string",
                      "nullable": true
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "auth_user_id",
                    "email",
                    "name",
                    "role",
                    "active"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    },
    "/users/{user_id}/change-password": {
      "post": {
        "operationId": "users-changePassword",
        "summary": "Change user password",
        "description": "Change password for a user",
        "tags": [
          "users"
        ],
        "security": [
          {
            "Authorization": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "new_password": {
                    "type": "string",
                    "minLength": 6
                  }
                },
                "required": [
                  "new_password"
                ],
                "additionalProperties": false
              }
            }
          }
        },
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "message"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "Authorization": {
        "type": "http",
        "scheme": "bearer"
      }
    },
    "responses": {
      "error": {
        "description": "Error response",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                },
                "code": {
                  "type": "string"
                },
                "issues": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "message": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "message"
                    ],
                    "additionalProperties": false
                  }
                }
              },
              "required": [
                "message",
                "code"
              ],
              "additionalProperties": false
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "auth"
    },
    {
      "name": "orders"
    },
    {
      "name": "customers"
    },
    {
      "name": "products"
    },
    {
      "name": "inventory"
    },
    {
      "name": "transfers"
    },
    {
      "name": "trucks"
    },
    {
      "name": "trips"
    },
    {
      "name": "warehouses"
    },
    {
      "name": "pricing"
    },
    {
      "name": "deposits"
    }
  ],
  "externalDocs": {
    "url": "https://example.com"
  }
}